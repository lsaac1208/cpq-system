var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,n=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&o(e,l,a[l]);if(s)for(var l of s(a))i.call(a,l)&&o(e,l,a[l]);return e},c=(e,a,l)=>new Promise((s,t)=>{var i=e=>{try{n(l.next(e))}catch(a){t(a)}},o=e=>{try{n(l.throw(e))}catch(a){t(a)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,o);n((l=l.apply(e,a)).next())});import{E as u,y as r,g as d,h as _,z as f,i as p,j as v,u as m,w as g,d as b,x as y,R as h,f as j,a as w,A as x,B as k,S as V,k as C,C as U,D as T,c as M,b as z,T as D,U as I,V as S,I as q,W as B,X as P,t as J,v as R,Y as F,Z as E,_ as L,$ as A,H as O,a0 as N,a1 as W,a2 as Y,a3 as K,a4 as $,o as H,a5 as G,a6 as X,a7 as Z,a8 as Q,N as ee,a9 as ae,aa as le,ab as se,ac as te,ad as ie,ae as oe,af as ne,ag as ce,ah as ue,ai as re}from"./element-plus-DR0qywX_.js";import{s as de}from"./utils-BjNHK8wL.js";import{s as _e,b as fe,r as pe,d as ve,e as me,f as ge,h as be,i as ye,j as he,k as je}from"./api-BHu6TLr6.js";import{z as we,r as xe,Z as ke,b as Ve,w as Ce,A as Ue,S as Te,K as Me,M as ze,C as De,R as Ie,a8 as Se,Q as qe,u as Be,P as Pe,B as Je,i as Re,l as Fe,V as Ee,F as Le,J as Ae,L as Oe,O as Ne,az as We,ao as Ye,X as Ke,x as $e}from"./vue-BMWQU0Ry.js";import{_ as He}from"./page-aianalysisenhanced.vue-9uq21fmn.js";const Ge={class:"batch-analysis-form"},Xe={class:"card-header"},Ze={class:"analysis-type-option"},Qe={class:"option-label"},ea={key:0,class:"option-description"},aa={class:"upload-area"},la={key:0,class:"file-summary"},sa={class:"summary-info"},ta={key:0,class:"business-context-section"},ia={key:0},oa={key:1},na={key:2},ca={class:"submit-section"},ua={key:0,class:"cost-estimation"},ra={class:"submit-buttons"},da=He(we({__name:"BatchAnalysisForm",emits:["jobSubmitted","submissionError"],setup(e,{emit:a}){const l=a,s=xe(),t=xe(),i=[{value:"customer_requirements",label:"客户需求分析",description:"分析客户需求文档，提取技术参数、商务要求等关键信息"},{value:"competitor_analysis",label:"竞品资料分析",description:"分析竞争对手产品资料，提取价格、规格等市场情报"},{value:"project_mining",label:"历史项目挖掘",description:"分析历史项目文档，提取成功模式和最佳实践"},{value:"product_extraction",label:"产品信息提取"},{value:"document_classification",label:"文档分类"},{value:"quality_assessment",label:"质量评估"},{value:"comprehensive",label:"综合分析"}],o=ke({documents:[],batch_name:"",description:"",analysis_config:{analysis_type:"customer_requirements",processing_priority:"balanced",auto_retry_failed:!0,max_retries:2,business_context:{industry:"",project_type:"",analysis_focus:[],requirements_type:"mixed",competitor_category:"",project_phase:"planning"},notification_settings:{email_on_completion:!0,email_on_failure:!0,webhook_url:""}}}),n=xe([]),D=xe(!1),I=Ve(()=>["customer_requirements","competitor_analysis","project_mining"].includes(o.analysis_config.analysis_type)),S=e=>{if(o.analysis_config.business_context)switch(o.analysis_config.business_context.analysis_focus=[],e){case"customer_requirements":o.analysis_config.business_context.requirements_type="mixed";break;case"competitor_analysis":o.analysis_config.business_context.competitor_category="";break;case"project_mining":o.analysis_config.business_context.project_phase="planning"}},q={batch_name:[{required:!0,message:"请输入任务名称",trigger:"blur"},{min:2,max:100,message:"任务名称长度在 2 到 100 个字符",trigger:"blur"}],"analysis_config.analysis_type":[{required:!0,message:"请选择分析类型",trigger:"change"}],documents:[{required:!0,message:"请上传至少一个文档文件",trigger:"change"}]},B=Ve(()=>n.value.reduce((e,a)=>e+(a.size||0),0)),P=xe(null),J=e=>["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(e.type)?e.size>52428800&&(de.error("文件大小不能超过 50MB"),!1):(de.error("只支持 PDF、Word、Excel、Text 格式文件"),!1),R=(e,a)=>{n.value=a,o.documents=a.map(e=>e.raw).filter(e=>e),L()},F=(e,a)=>{n.value=a,o.documents=a.map(e=>e.raw).filter(e=>e),L()},E=()=>{var e;n.value=[],o.documents=[],null==(e=t.value)||e.clearFiles(),P.value=null},L=()=>{if(0===n.value.length)return void(P.value=null);const e=n.value.length;P.value={cost:(.5*e).toFixed(2),file_count:e,time:Math.ceil(1.5*e)}},A=()=>c(this,null,function*(){var e;if(s.value)try{if(!(yield s.value.validate()))return;if(0===o.documents.length)return void de.error("请至少上传一个文档文件");if("confirm"!==(yield z.confirm("确定提交批量分析任务吗？包含 ".concat(o.documents.length," 个文件，预估费用 ").concat((null==(e=P.value)?void 0:e.cost)||"未知"," 元。"),"确认提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"})))return;D.value=!0;const a=yield _e(o);if(!a.success)throw new Error(a.error||"提交失败");de.success("任务提交成功！任务ID: ".concat(a.job_id)),l("jobSubmitted",a.job_id),O()}catch(a){const e=a.message||"提交批量分析任务失败";de.error(e),l("submissionError",e)}finally{D.value=!1}}),O=()=>{var e;null==(e=s.value)||e.resetFields(),E(),Object.assign(o,{documents:[],batch_name:"",description:"",analysis_config:{analysis_type:"product_extraction",processing_priority:"balanced",auto_retry_failed:!0,max_retries:2,notification_settings:{email_on_completion:!0,email_on_failure:!0,webhook_url:""}}})};return Ce(()=>o.documents.length,e=>{s.value&&s.value.validateField("documents")}),(e,a)=>{const l=w,c=p,z=f,L=_,N=m,W=v,Y=d,K=b,$=g,H=h,G=j,X=k,Z=x,Q=V,ee=C,ae=T,le=U,se=M,te=r,ie=u;return Je(),Ue("div",Ge,[Te(ie,{class:"form-card"},{header:Me(()=>[De("div",Xe,[a[21]||(a[21]=De("span",null,"批量文档分析配置",-1)),Te(l,{text:"",onClick:O},{default:Me(()=>a[20]||(a[20]=[Pe("重置",-1)])),_:1,__:[20]})])]),default:Me(()=>[Te(te,{ref_key:"formRef",ref:s,model:o,rules:q,"label-width":"120px","label-position":"left"},{default:Me(()=>[Te(Y,{gutter:20},{default:Me(()=>[Te(L,{span:12},{default:Me(()=>[Te(z,{label:"任务名称",prop:"batch_name"},{default:Me(()=>[Te(c,{modelValue:o.batch_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.batch_name=e),placeholder:"输入批量分析任务名称",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:12},{default:Me(()=>[Te(z,{label:"分析类型",prop:"analysis_config.analysis_type"},{default:Me(()=>[Te(W,{modelValue:o.analysis_config.analysis_type,"onUpdate:modelValue":a[1]||(a[1]=e=>o.analysis_config.analysis_type=e),placeholder:"选择分析类型",onChange:S},{default:Me(()=>[(Je(),Ue(Ie,null,Se(i,e=>Te(N,{key:e.value,label:e.label,value:e.value},{default:Me(()=>[De("div",Ze,[De("div",Qe,qe(e.label),1),e.description?(Je(),Ue("div",ea,qe(e.description),1)):ze("",!0)])]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),Te(z,{label:"任务描述"},{default:Me(()=>[Te(c,{modelValue:o.description,"onUpdate:modelValue":a[2]||(a[2]=e=>o.description=e),type:"textarea",rows:3,placeholder:"描述此批量分析任务的目的和要求...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),Te(z,{label:"文档文件",prop:"documents"},{default:Me(()=>[De("div",aa,[Te($,{ref_key:"uploadRef",ref:t,class:"document-upload","file-list":n.value,"before-upload":J,"on-change":R,"on-remove":F,"auto-upload":!1,multiple:"",drag:"",accept:".pdf,.doc,.docx,.txt,.xlsx,.xls"},{default:Me(()=>[Te(K,{class:"upload-icon"},{default:Me(()=>[Te(Be(y))]),_:1}),a[22]||(a[22]=De("div",{class:"upload-text"},[De("p",null,[Pe("拖拽文件到此处，或"),De("em",null,"点击上传")]),De("p",{class:"upload-hint"},"支持 PDF、Word、Excel、Text 格式，单文件最大 50MB")],-1))]),_:1,__:[22]},8,["file-list"]),n.value.length>0?(Je(),Ue("div",la,[Te(H),De("div",sa,[Te(G,{type:"info"},{default:Me(()=>[Pe("已选择 "+qe(n.value.length)+" 个文件",1)]),_:1}),Te(G,{type:"warning"},{default:Me(()=>{return[Pe("总大小 "+qe((e=B.value,e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB")),1)];var e}),_:1}),Te(l,{type:"danger",size:"small",onClick:E},{default:Me(()=>a[23]||(a[23]=[Pe("清空",-1)])),_:1,__:[23]})])])):ze("",!0)])]),_:1}),Te(H,{"content-position":"left"},{default:Me(()=>a[24]||(a[24]=[Pe("分析配置",-1)])),_:1,__:[24]}),Te(Y,{gutter:20},{default:Me(()=>[Te(L,{span:8},{default:Me(()=>[Te(z,{label:"处理优先级"},{default:Me(()=>[Te(Z,{modelValue:o.analysis_config.processing_priority,"onUpdate:modelValue":a[3]||(a[3]=e=>o.analysis_config.processing_priority=e)},{default:Me(()=>[Te(X,{value:"speed"},{default:Me(()=>a[25]||(a[25]=[Pe("速度优先",-1)])),_:1,__:[25]}),Te(X,{value:"accuracy"},{default:Me(()=>a[26]||(a[26]=[Pe("准确性优先",-1)])),_:1,__:[26]}),Te(X,{value:"balanced"},{default:Me(()=>a[27]||(a[27]=[Pe("平衡模式",-1)])),_:1,__:[27]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:8},{default:Me(()=>[Te(z,{label:"自动重试"},{default:Me(()=>[Te(Q,{modelValue:o.analysis_config.auto_retry_failed,"onUpdate:modelValue":a[4]||(a[4]=e=>o.analysis_config.auto_retry_failed=e),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:8},{default:Me(()=>[Te(z,{label:"最大重试次数"},{default:Me(()=>[Te(ee,{modelValue:o.analysis_config.max_retries,"onUpdate:modelValue":a[5]||(a[5]=e=>o.analysis_config.max_retries=e),min:0,max:5,disabled:!o.analysis_config.auto_retry_failed},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),I.value?(Je(),Ue("div",ta,[Te(H,{"content-position":"left"},{default:Me(()=>a[28]||(a[28]=[Pe("业务上下文配置",-1)])),_:1,__:[28]}),"customer_requirements"===o.analysis_config.analysis_type?(Je(),Ue("div",ia,[Te(Y,{gutter:20},{default:Me(()=>[Te(L,{span:8},{default:Me(()=>[Te(z,{label:"行业领域"},{default:Me(()=>[Te(W,{modelValue:o.analysis_config.business_context.industry,"onUpdate:modelValue":a[6]||(a[6]=e=>o.analysis_config.business_context.industry=e),placeholder:"选择行业"},{default:Me(()=>[Te(N,{label:"制造业",value:"manufacturing"}),Te(N,{label:"IT/软件",value:"it_software"}),Te(N,{label:"电信",value:"telecommunications"}),Te(N,{label:"金融",value:"finance"}),Te(N,{label:"能源",value:"energy"}),Te(N,{label:"医疗",value:"healthcare"}),Te(N,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:8},{default:Me(()=>[Te(z,{label:"需求类型"},{default:Me(()=>[Te(W,{modelValue:o.analysis_config.business_context.requirements_type,"onUpdate:modelValue":a[7]||(a[7]=e=>o.analysis_config.business_context.requirements_type=e),placeholder:"选择需求类型"},{default:Me(()=>[Te(N,{label:"技术需求",value:"technical"}),Te(N,{label:"功能需求",value:"functional"}),Te(N,{label:"商务需求",value:"business"}),Te(N,{label:"混合需求",value:"mixed"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:8},{default:Me(()=>[Te(z,{label:"项目类型"},{default:Me(()=>[Te(c,{modelValue:o.analysis_config.business_context.project_type,"onUpdate:modelValue":a[8]||(a[8]=e=>o.analysis_config.business_context.project_type=e),placeholder:"如：ERP系统、网络设备等"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Te(z,{label:"分析重点"},{default:Me(()=>[Te(le,{modelValue:o.analysis_config.business_context.analysis_focus,"onUpdate:modelValue":a[9]||(a[9]=e=>o.analysis_config.business_context.analysis_focus=e)},{default:Me(()=>[Te(ae,{value:"technical_specs"},{default:Me(()=>a[29]||(a[29]=[Pe("技术规格",-1)])),_:1,__:[29]}),Te(ae,{value:"budget_analysis"},{default:Me(()=>a[30]||(a[30]=[Pe("预算分析",-1)])),_:1,__:[30]}),Te(ae,{value:"timeline_requirements"},{default:Me(()=>a[31]||(a[31]=[Pe("时间要求",-1)])),_:1,__:[31]}),Te(ae,{value:"compliance_standards"},{default:Me(()=>a[32]||(a[32]=[Pe("合规标准",-1)])),_:1,__:[32]}),Te(ae,{value:"risk_assessment"},{default:Me(()=>a[33]||(a[33]=[Pe("风险评估",-1)])),_:1,__:[33]}),Te(ae,{value:"decision_factors"},{default:Me(()=>a[34]||(a[34]=[Pe("决策因素",-1)])),_:1,__:[34]})]),_:1},8,["modelValue"])]),_:1})])):ze("",!0),"competitor_analysis"===o.analysis_config.analysis_type?(Je(),Ue("div",oa,[Te(Y,{gutter:20},{default:Me(()=>[Te(L,{span:12},{default:Me(()=>[Te(z,{label:"竞品类别"},{default:Me(()=>[Te(c,{modelValue:o.analysis_config.business_context.competitor_category,"onUpdate:modelValue":a[10]||(a[10]=e=>o.analysis_config.business_context.competitor_category=e),placeholder:"如：网络设备、软件系统等"},null,8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:12},{default:Me(()=>[Te(z,{label:"行业领域"},{default:Me(()=>[Te(W,{modelValue:o.analysis_config.business_context.industry,"onUpdate:modelValue":a[11]||(a[11]=e=>o.analysis_config.business_context.industry=e),placeholder:"选择行业"},{default:Me(()=>[Te(N,{label:"制造业",value:"manufacturing"}),Te(N,{label:"IT/软件",value:"it_software"}),Te(N,{label:"电信",value:"telecommunications"}),Te(N,{label:"金融",value:"finance"}),Te(N,{label:"能源",value:"energy"}),Te(N,{label:"医疗",value:"healthcare"}),Te(N,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),Te(z,{label:"分析重点"},{default:Me(()=>[Te(le,{modelValue:o.analysis_config.business_context.analysis_focus,"onUpdate:modelValue":a[12]||(a[12]=e=>o.analysis_config.business_context.analysis_focus=e)},{default:Me(()=>[Te(ae,{value:"pricing_analysis"},{default:Me(()=>a[35]||(a[35]=[Pe("价格分析",-1)])),_:1,__:[35]}),Te(ae,{value:"technical_comparison"},{default:Me(()=>a[36]||(a[36]=[Pe("技术对比",-1)])),_:1,__:[36]}),Te(ae,{value:"market_position"},{default:Me(()=>a[37]||(a[37]=[Pe("市场定位",-1)])),_:1,__:[37]}),Te(ae,{value:"feature_analysis"},{default:Me(()=>a[38]||(a[38]=[Pe("功能分析",-1)])),_:1,__:[38]}),Te(ae,{value:"competitive_advantages"},{default:Me(()=>a[39]||(a[39]=[Pe("竞争优势",-1)])),_:1,__:[39]}),Te(ae,{value:"weakness_identification"},{default:Me(()=>a[40]||(a[40]=[Pe("弱点识别",-1)])),_:1,__:[40]})]),_:1},8,["modelValue"])]),_:1})])):ze("",!0),"project_mining"===o.analysis_config.analysis_type?(Je(),Ue("div",na,[Te(Y,{gutter:20},{default:Me(()=>[Te(L,{span:8},{default:Me(()=>[Te(z,{label:"项目阶段"},{default:Me(()=>[Te(W,{modelValue:o.analysis_config.business_context.project_phase,"onUpdate:modelValue":a[13]||(a[13]=e=>o.analysis_config.business_context.project_phase=e),placeholder:"选择项目阶段"},{default:Me(()=>[Te(N,{label:"规划阶段",value:"planning"}),Te(N,{label:"执行阶段",value:"execution"}),Te(N,{label:"完成阶段",value:"completion"}),Te(N,{label:"评估阶段",value:"evaluation"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:8},{default:Me(()=>[Te(z,{label:"项目类型"},{default:Me(()=>[Te(c,{modelValue:o.analysis_config.business_context.project_type,"onUpdate:modelValue":a[14]||(a[14]=e=>o.analysis_config.business_context.project_type=e),placeholder:"如：系统集成、产品开发等"},null,8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:8},{default:Me(()=>[Te(z,{label:"行业领域"},{default:Me(()=>[Te(W,{modelValue:o.analysis_config.business_context.industry,"onUpdate:modelValue":a[15]||(a[15]=e=>o.analysis_config.business_context.industry=e),placeholder:"选择行业"},{default:Me(()=>[Te(N,{label:"制造业",value:"manufacturing"}),Te(N,{label:"IT/软件",value:"it_software"}),Te(N,{label:"电信",value:"telecommunications"}),Te(N,{label:"金融",value:"finance"}),Te(N,{label:"能源",value:"energy"}),Te(N,{label:"医疗",value:"healthcare"}),Te(N,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),Te(z,{label:"分析重点"},{default:Me(()=>[Te(le,{modelValue:o.analysis_config.business_context.analysis_focus,"onUpdate:modelValue":a[16]||(a[16]=e=>o.analysis_config.business_context.analysis_focus=e)},{default:Me(()=>[Te(ae,{value:"success_patterns"},{default:Me(()=>a[41]||(a[41]=[Pe("成功模式",-1)])),_:1,__:[41]}),Te(ae,{value:"best_practices"},{default:Me(()=>a[42]||(a[42]=[Pe("最佳实践",-1)])),_:1,__:[42]}),Te(ae,{value:"lessons_learned"},{default:Me(()=>a[43]||(a[43]=[Pe("经验教训",-1)])),_:1,__:[43]}),Te(ae,{value:"risk_factors"},{default:Me(()=>a[44]||(a[44]=[Pe("风险因素",-1)])),_:1,__:[44]}),Te(ae,{value:"resource_allocation"},{default:Me(()=>a[45]||(a[45]=[Pe("资源配置",-1)])),_:1,__:[45]}),Te(ae,{value:"reusable_assets"},{default:Me(()=>a[46]||(a[46]=[Pe("可复用资产",-1)])),_:1,__:[46]})]),_:1},8,["modelValue"])]),_:1})])):ze("",!0)])):ze("",!0),Te(H,{"content-position":"left"},{default:Me(()=>a[47]||(a[47]=[Pe("通知设置",-1)])),_:1,__:[47]}),Te(Y,{gutter:20},{default:Me(()=>[Te(L,{span:12},{default:Me(()=>[Te(z,{label:"完成通知"},{default:Me(()=>[Te(Q,{modelValue:o.analysis_config.notification_settings.email_on_completion,"onUpdate:modelValue":a[17]||(a[17]=e=>o.analysis_config.notification_settings.email_on_completion=e),"active-text":"邮件通知","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),Te(L,{span:12},{default:Me(()=>[Te(z,{label:"失败通知"},{default:Me(()=>[Te(Q,{modelValue:o.analysis_config.notification_settings.email_on_failure,"onUpdate:modelValue":a[18]||(a[18]=e=>o.analysis_config.notification_settings.email_on_failure=e),"active-text":"邮件通知","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Te(z,{label:"Webhook URL"},{default:Me(()=>[Te(c,{modelValue:o.analysis_config.notification_settings.webhook_url,"onUpdate:modelValue":a[19]||(a[19]=e=>o.analysis_config.notification_settings.webhook_url=e),placeholder:"可选：任务完成后的 Webhook 回调地址"},null,8,["modelValue"])]),_:1}),Te(H),De("div",ca,[P.value?(Je(),Ue("div",ua,[Te(se,{title:"预估费用: ".concat(P.value.cost," 元"),description:"处理 ".concat(P.value.file_count," 个文件，预计 ").concat(P.value.time," 分钟完成"),type:"info","show-icon":"",closable:!1},null,8,["title","description"])])):ze("",!0),De("div",ra,[Te(l,{onClick:O},{default:Me(()=>a[48]||(a[48]=[Pe("重置",-1)])),_:1,__:[48]}),Te(l,{type:"primary",loading:D.value,disabled:0===n.value.length,onClick:A},{default:Me(()=>[Pe(qe(D.value?"提交中...":"提交批量分析"),1)]),_:1},8,["loading","disabled"])])])]),_:1},8,["model"])]),_:1})])}}}),[["__scopeId","data-v-a0a8f954"]]),_a={class:"batch-job-monitor"},fa={class:"monitor-header"},pa={class:"header-actions"},va={class:"job-filters"},ma={class:"job-summary"},ga={class:"job-list"},ba={key:0,class:"loading-state"},ya={key:1,class:"empty-state"},ha={key:2,class:"job-cards"},ja={class:"card-header"},wa={class:"job-info"},xa={class:"job-meta"},ka={class:"job-time"},Va={class:"job-actions"},Ca={class:"card-content"},Ua={key:0,class:"job-description"},Ta={key:1,class:"progress-section"},Ma={class:"progress-info"},za={class:"time-info"},Da={key:0,class:"current-file"},Ia={key:1,class:"remaining-time"},Sa={class:"config-section"},qa={class:"config-item"},Ba={class:"value"},Pa={class:"config-item"},Ja={class:"value"},Ra={class:"config-item"},Fa={class:"value"},Ea={key:2,class:"error-section"},La=He(we({__name:"BatchJobMonitor",props:{jobs:{}},emits:["jobCancelled","jobRetried","jobDetails","createNewJob"],setup(e,{emit:a}){const l=e,s=a,t=xe(!1),i=xe(!1),o=xe(!0),n=xe(""),u=xe("");let r=null;const f=Re("refreshTrigger",xe(0)),g=xe([]),b=Ve(()=>g.value.filter(e=>["pending","processing"].includes(e.status)).length),y=Ve(()=>g.value.filter(e=>"completed"===e.status).length),h=Ve(()=>g.value.filter(e=>"failed"===e.status).length),x=e=>({pending:"等待中",processing:"处理中",completed:"已完成",failed:"已失败",cancelled:"已取消"}[e]||e),k=e=>["pending","processing"].includes(e),C=e=>["failed","cancelled"].includes(e),U=()=>{let e=[...l.jobs];if(n.value&&(e=e.filter(e=>e.status===n.value)),u.value){const a=u.value.toLowerCase();e=e.filter(e=>(e.job_name||"任务 #".concat(e.job_id)).toLowerCase().includes(a)||(e.description||"").toLowerCase().includes(a))}g.value=e},T=()=>c(this,null,function*(){if(0!==l.jobs.length){i.value=!0;try{yield new Promise(e=>setTimeout(e,500)),de.success("任务列表已刷新")}catch(e){de.error("刷新任务列表失败")}finally{i.value=!1}}}),R=e=>{e?F():E()},F=()=>{r||(r=window.setInterval(()=>{b.value>0&&T()},5e3))},E=()=>{r&&(clearInterval(r),r=null)},L=e=>c(this,null,function*(){try{if("confirm"!==(yield z.confirm('确定要取消任务 "'.concat(e.job_name||"#".concat(e.job_id),'" 吗？'),"取消任务",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})))return;const a=yield fe(e.job_id);if(!a.success)throw new Error(a.error||"取消任务失败");de.success("任务已取消"),s("jobCancelled",e.job_id)}catch(a){"cancel"!==a.message&&de.error(a.message||"取消任务失败")}}),A=e=>c(this,null,function*(){try{if("confirm"!==(yield z.confirm('确定要重试任务 "'.concat(e.job_name||"#".concat(e.job_id),'" 吗？'),"重试任务",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"})))return;const a=yield pe(e.job_id);if(!a.success)throw new Error(a.error||"重试任务失败");de.success("任务已重新提交，新任务ID: ".concat(a.new_job_id)),s("jobRetried",a.new_job_id)}catch(a){"cancel"!==a.message&&de.error(a.message||"重试任务失败")}});return Ce(()=>l.jobs,()=>{U()},{immediate:!0}),Ce(f,()=>{U()}),Fe(()=>{o.value&&F()}),Ee(()=>{E()}),(e,a)=>{const l=V,s=w,c=m,r=v,f=_,z=p,F=j,E=d,O=S,N=q,W=J,Y=M;return Je(),Ue("div",_a,[De("div",fa,[a[5]||(a[5]=De("div",{class:"header-info"},[De("h3",null,"任务监控"),De("p",null,"实时监控批量分析任务进度")],-1)),De("div",pa,[Te(l,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),"active-text":"自动刷新","inactive-text":"手动刷新",onChange:R},null,8,["modelValue"]),Te(s,{type:"primary",icon:Be(D),loading:i.value,onClick:T},{default:Me(()=>a[4]||(a[4]=[Pe(" 刷新 ",-1)])),_:1,__:[4]},8,["icon","loading"])])]),De("div",va,[Te(E,{gutter:15},{default:Me(()=>[Te(f,{span:6},{default:Me(()=>[Te(r,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value=e),placeholder:"状态筛选",clearable:"",onChange:U},{default:Me(()=>[Te(c,{label:"全部状态",value:""}),Te(c,{label:"等待中",value:"pending"}),Te(c,{label:"处理中",value:"processing"}),Te(c,{label:"已完成",value:"completed"}),Te(c,{label:"已失败",value:"failed"}),Te(c,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),Te(f,{span:6},{default:Me(()=>[Te(z,{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),placeholder:"搜索任务名称","prefix-icon":Be(I),clearable:"",onInput:U},null,8,["modelValue","prefix-icon"])]),_:1}),Te(f,{span:12},{default:Me(()=>[De("div",ma,[Te(F,{type:"info"},{default:Me(()=>[Pe("总计: "+qe(g.value.length),1)]),_:1}),Te(F,{type:"warning"},{default:Me(()=>[Pe("处理中: "+qe(b.value),1)]),_:1}),Te(F,{type:"success"},{default:Me(()=>[Pe("已完成: "+qe(y.value),1)]),_:1}),Te(F,{type:"danger"},{default:Me(()=>[Pe("失败: "+qe(h.value),1)]),_:1})])]),_:1})]),_:1})]),De("div",ga,[t.value&&0===g.value.length?(Je(),Ue("div",ba,[Te(O,{rows:3,animated:""})])):0===g.value.length?(Je(),Ue("div",ya,[Te(N,{description:"暂无活跃的批量分析任务"},{default:Me(()=>[Te(s,{type:"primary",onClick:a[3]||(a[3]=a=>e.$emit("create-new-job"))},{default:Me(()=>a[6]||(a[6]=[Pe(" 创建新任务 ",-1)])),_:1,__:[6]})]),_:1})])):(Je(),Ue("div",ha,[(Je(!0),Ue(Ie,null,Se(g.value,l=>{return Je(),Ue("div",{key:l.job_id,class:Le(["job-card",["status-".concat(l.status)]])},[De("div",ja,[De("div",wa,[De("h4",null,qe(l.job_name||"任务 #".concat(l.job_id)),1),De("div",xa,[Te(F,{type:(o=l.status,{pending:"info",processing:"warning",completed:"success",failed:"danger",cancelled:"info"}[o]||"info"),size:"small"},{default:Me(()=>[Pe(qe(x(l.status)),1)]),_:2},1032,["type"]),De("span",ka,qe((i=l.created_at,new Date(i).toLocaleString("zh-CN"))),1)])]),De("div",Va,[Te(s,{text:"",icon:Be(B),onClick:a=>e.$emit("job-details",l),title:"查看详情"},null,8,["icon","onClick"]),k(l.status)?(Je(),Ae(s,{key:0,text:"",icon:Be(P),onClick:e=>L(l),title:"取消任务"},null,8,["icon","onClick"])):ze("",!0),C(l.status)?(Je(),Ae(s,{key:1,text:"",icon:Be(D),onClick:e=>A(l),title:"重试任务"},null,8,["icon","onClick"])):ze("",!0)])]),De("div",Ca,[l.description?(Je(),Ue("div",Ua,qe(l.description),1)):ze("",!0),l.progress?(Je(),Ue("div",Ta,[De("div",Ma,[De("span",null,"进度: "+qe(l.progress.processed_files)+"/"+qe(l.progress.total_files),1),De("span",null,"成功: "+qe(l.progress.successful_files),1),De("span",null,"失败: "+qe(l.progress.failed_files),1)]),Te(W,{percentage:l.progress.percentage,status:"failed"===l.status?"exception":"success","show-text":!1,"stroke-width":8},null,8,["percentage","status"]),De("div",za,[l.progress.current_file?(Je(),Ue("span",Da," 当前处理: "+qe(l.progress.current_file),1)):ze("",!0),l.progress.estimated_remaining_time>0?(Je(),Ue("span",Ia," 预计剩余: "+qe((t=l.progress.estimated_remaining_time,t<60?"".concat(t,"秒"):t<3600?"".concat(Math.floor(t/60),"分钟"):"".concat(Math.floor(t/3600),"小时").concat(Math.floor(t%3600/60),"分钟"))),1)):ze("",!0)])])):ze("",!0),De("div",Sa,[Te(E,{gutter:10},{default:Me(()=>[Te(f,{span:8},{default:Me(()=>{return[De("div",qa,[a[7]||(a[7]=De("span",{class:"label"},"分析类型:",-1)),De("span",Ba,qe((e=l.analysis_type,{product_extraction:"产品信息提取",document_classification:"文档分类",quality_assessment:"质量评估",comprehensive:"综合分析"}[e]||e)),1)])];var e}),_:2},1024),Te(f,{span:8},{default:Me(()=>{return[De("div",Pa,[a[8]||(a[8]=De("span",{class:"label"},"优先级:",-1)),De("span",Ja,qe((e=l.processing_priority,{speed:"速度优先",accuracy:"准确性优先",balanced:"平衡模式"}[e]||e)),1)])];var e}),_:2},1024),Te(f,{span:8},{default:Me(()=>[De("div",Ra,[a[9]||(a[9]=De("span",{class:"label"},"队列位置:",-1)),De("span",Fa,qe(l.queue_position||"N/A"),1)])]),_:2},1024)]),_:2},1024)]),"failed"===l.status&&l.error_message?(Je(),Ue("div",Ea,[Te(Y,{title:l.error_message,type:"error",closable:!1,"show-icon":""},null,8,["title"])])):ze("",!0)])],2);var t,i,o}),128))]))])])}}}),[["__scopeId","data-v-0ad74dc8"]]),Aa={class:"batch-history"},Oa={class:"history-header"},Na={class:"header-actions"},Wa={class:"history-filters"},Ya={class:"history-stats"},Ka={class:"history-table"},$a={class:"job-name-cell"},Ha={class:"name"},Ga={key:0,class:"description"},Xa={class:"success-count"},Za={class:"fail-count"},Qa={class:"action-buttons"},el={class:"pagination-wrapper"},al={class:"download-options"},ll=He(we({__name:"BatchHistory",emits:["jobSelected","jobDeleted","downloadResults"],setup(e,{emit:a}){const l=a,s=xe(!1),t=xe([]),i=xe([]),o=xe(!1),n=xe("json"),u=xe(null);let r=null;const f=ke({status:"",analysis_type:"",dateRange:[],search:""}),g=ke({currentPage:1,pageSize:20,total:0}),b=Ve(()=>{const e=Array.isArray(t.value)?t.value:[],a=e.length,l=e.filter(e=>"completed"===(null==e?void 0:e.status)).length;return{total:a,successRate:a>0?Math.round(l/a*100):0,totalFiles:e.reduce((e,a)=>e+((null==a?void 0:a.file_count)||0),0),avgProcessingTime:e.length>0?Math.round(e.reduce((e,a)=>e+((null==a?void 0:a.processing_time)||0),0)/e.length/60):0}}),y=e=>({completed:"已完成",failed:"已失败",cancelled:"已取消"}[e]||e),h=()=>c(this,null,function*(){var e;s.value=!0;try{const e=yield ve({page:g.currentPage,page_size:g.pageSize,status:f.status,analysis_type:f.analysis_type,start_date:f.dateRange[0],end_date:f.dateRange[1],search:f.search});if(e&&e.success)t.value=Array.isArray(e.records)?e.records:[],g.total=e.total||0,V();else{t.value=[],g.total=0;const a=(null==e?void 0:e.error)||"加载历史记录失败";de.error(a)}}catch(a){t.value=[],g.total=0;let l="加载历史记录失败";404===(null==(e=null==a?void 0:a.response)?void 0:e.status)?l="批量分析服务暂不可用":(null==a?void 0:a.message)&&(l=a.message),de.error(l)}finally{s.value=!1}}),V=()=>{let e=[...Array.isArray(t.value)?t.value:[]];if(f.status&&(e=e.filter(e=>(null==e?void 0:e.status)===f.status)),f.analysis_type&&(e=e.filter(e=>(null==e?void 0:e.analysis_type)===f.analysis_type)),f.dateRange&&2===f.dateRange.length){const a=new Date(f.dateRange[0]),l=new Date(f.dateRange[1]);l.setHours(23,59,59,999),e=e.filter(e=>{if(!(null==e?void 0:e.created_at))return!1;const s=new Date(e.created_at);return s>=a&&s<=l})}if(f.search){const a=f.search.toLowerCase();e=e.filter(e=>{if(!e)return!1;const l=e.job_name||"任务 #".concat(e.job_id||""),s=e.description||"";return l.toLowerCase().includes(a)||s.toLowerCase().includes(a)})}i.value=e},C=()=>{r&&clearTimeout(r),r=window.setTimeout(()=>{V()},300)},U=({prop:e,order:a})=>{h()},T=e=>{g.pageSize=e,g.currentPage=1,h()},M=e=>{g.currentPage=e,h()},S=()=>{u.value&&(l("downloadResults",u.value.job_id,n.value),o.value=!1,u.value=null)},q=e=>c(this,null,function*(){try{if("confirm"!==(yield z.confirm('确定要重试任务 "'.concat(e.job_name||"#".concat(e.job_id),'" 吗？'),"重试任务",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"})))return;const a=yield pe(String(e.job_id));if(!a.success)throw new Error(a.error||"重试任务失败");de.success("任务已重新提交，新任务ID: ".concat(a.new_job_id)),h()}catch(a){"cancel"!==a.message&&de.error(a.message||"重试任务失败")}}),P=e=>c(this,null,function*(){var a,s,t,i,o;try{const a=yield me(e.id);if(!a||!a.success)throw new Error((null==a?void 0:a.error)||"删除记录失败");{const a=e.job_name||"任务 #".concat(e.job_id);de.success('"'.concat(a,'" 记录已删除')),yield h(),l("jobDeleted")}}catch(n){let l="删除记录失败";const c=e.job_name||"任务 #".concat(e.job_id);403===(null==(a=null==n?void 0:n.response)?void 0:a.status)?l="权限不足，无法删除此记录":404===(null==(s=null==n?void 0:n.response)?void 0:s.status)?l="记录不存在或已被删除":400===(null==(t=null==n?void 0:n.response)?void 0:t.status)?l="无法删除正在处理中的任务，请等待任务完成后再试":(null==(o=null==(i=null==n?void 0:n.response)?void 0:i.data)?void 0:o.error)?l=n.response.data.error:(null==n?void 0:n.message)&&"删除记录失败"!==n.message&&(l="删除失败: ".concat(n.message));const u='删除 "'.concat(c,'" 失败: ').concat(l,"。如问题持续存在，请联系管理员。");de.error(u)}}),J=()=>c(this,null,function*(){var e,a,s,t,i;try{if("confirm"!==(yield z.confirm("确定要清空所有历史记录吗？此操作不可撤销！","清空历史",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})))return;const e=yield ge();if(!e||!e.success)throw new Error((null==e?void 0:e.error)||"清空历史记录失败");{const a=e.deleted_count||0;let s=e.message||"历史记录已清空";0===a?(s="没有找到需要清空的历史记录",de.info(s)):(s="已成功清空 ".concat(a," 条历史记录"),de.success(s)),yield h(),l("jobDeleted")}}catch(o){if("cancel"!==o.message){let l="清空历史记录失败";403===(null==(e=null==o?void 0:o.response)?void 0:e.status)?l="权限不足，无法清空历史记录":404===(null==(a=null==o?void 0:o.response)?void 0:a.status)?l="清空历史服务暂不可用":500===(null==(s=null==o?void 0:o.response)?void 0:s.status)?l="服务器内部错误，清空操作失败":(null==(i=null==(t=null==o?void 0:o.response)?void 0:t.data)?void 0:i.error)?l=o.response.data.error:(null==o?void 0:o.message)&&"清空历史记录失败"!==o.message&&(l="操作失败: ".concat(o.message));const n="".concat(l,"。请稍后重试，如问题持续存在，请联系管理员。");de.error(n)}}}),$=Re("refreshTrigger");return $&&Ce($,()=>{h()}),Fe(()=>{h()}),(e,a)=>{const t=w,c=m,r=v,z=_,$=F,H=p,G=d,X=E,Z=A,Q=j,ee=N,ae=W,le=Y,se=k,te=x,ie=K,oe=L;return Je(),Ue("div",Aa,[De("div",Oa,[a[11]||(a[11]=De("div",{class:"header-info"},[De("h3",null,"批量分析历史"),De("p",null,"查看和管理历史批量分析记录")],-1)),De("div",Na,[Te(t,{icon:Be(D),onClick:h},{default:Me(()=>a[9]||(a[9]=[Pe("刷新",-1)])),_:1,__:[9]},8,["icon"]),Te(t,{type:"danger",icon:Be(R),onClick:J},{default:Me(()=>a[10]||(a[10]=[Pe("清空历史",-1)])),_:1,__:[10]},8,["icon"])])]),De("div",Wa,[Te(G,{gutter:15},{default:Me(()=>[Te(z,{span:6},{default:Me(()=>[Te(r,{modelValue:f.status,"onUpdate:modelValue":a[0]||(a[0]=e=>f.status=e),placeholder:"状态筛选",clearable:"",onChange:V},{default:Me(()=>[Te(c,{label:"全部状态",value:""}),Te(c,{label:"已完成",value:"completed"}),Te(c,{label:"已失败",value:"failed"}),Te(c,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),Te(z,{span:6},{default:Me(()=>[Te(r,{modelValue:f.analysis_type,"onUpdate:modelValue":a[1]||(a[1]=e=>f.analysis_type=e),placeholder:"分析类型",clearable:"",onChange:V},{default:Me(()=>[Te(c,{label:"全部类型",value:""}),Te(c,{label:"产品信息提取",value:"product_extraction"}),Te(c,{label:"文档分类",value:"document_classification"}),Te(c,{label:"质量评估",value:"quality_assessment"}),Te(c,{label:"综合分析",value:"comprehensive"})]),_:1},8,["modelValue"])]),_:1}),Te(z,{span:6},{default:Me(()=>[Te($,{modelValue:f.dateRange,"onUpdate:modelValue":a[2]||(a[2]=e=>f.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:V},null,8,["modelValue"])]),_:1}),Te(z,{span:6},{default:Me(()=>[Te(H,{modelValue:f.search,"onUpdate:modelValue":a[3]||(a[3]=e=>f.search=e),placeholder:"搜索任务名称","prefix-icon":Be(I),clearable:"",onInput:C},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1})]),De("div",Ya,[Te(G,{gutter:15},{default:Me(()=>[Te(z,{span:6},{default:Me(()=>[Te(X,{title:"总任务数",value:b.value.total},null,8,["value"])]),_:1}),Te(z,{span:6},{default:Me(()=>[Te(X,{title:"成功率",value:b.value.successRate,suffix:"%"},null,8,["value"])]),_:1}),Te(z,{span:6},{default:Me(()=>[Te(X,{title:"处理文件数",value:b.value.totalFiles},null,8,["value"])]),_:1}),Te(z,{span:6},{default:Me(()=>[Te(X,{title:"平均处理时间",value:b.value.avgProcessingTime,suffix:"分钟"},null,8,["value"])]),_:1})]),_:1})]),De("div",Ka,[Oe((Je(),Ae(ae,{data:i.value,stripe:"",border:"",style:{width:"100%"},"default-sort":{prop:"created_at",order:"descending"},onSortChange:U},{default:Me(()=>[Te(Z,{prop:"job_id",label:"任务ID",width:"80",sortable:""}),Te(Z,{prop:"job_name",label:"任务名称","min-width":"150"},{default:Me(({row:e})=>[De("div",$a,[De("span",Ha,qe(e.job_name||"任务 #".concat(e.job_id)),1),e.description?(Je(),Ue("span",Ga,qe(e.description),1)):ze("",!0)])]),_:1}),Te(Z,{prop:"analysis_type",label:"分析类型",width:"120"},{default:Me(({row:e})=>{return[Pe(qe((a=e.analysis_type,{product_extraction:"产品信息提取",document_classification:"文档分类",quality_assessment:"质量评估",comprehensive:"综合分析"}[a]||a)),1)];var a}),_:1}),Te(Z,{prop:"status",label:"状态",width:"100"},{default:Me(({row:e})=>{return[Te(Q,{type:(a=e.status,{completed:"success",failed:"danger",cancelled:"info"}[a]||"info"),size:"small"},{default:Me(()=>[Pe(qe(y(e.status)),1)]),_:2},1032,["type"])];var a}),_:1}),Te(Z,{prop:"file_count",label:"文件数",width:"80",sortable:""}),Te(Z,{prop:"success_count",label:"成功/失败",width:"100"},{default:Me(({row:e})=>[De("span",Xa,qe(e.success_count),1),a[12]||(a[12]=Pe(" / ",-1)),De("span",Za,qe(e.fail_count),1)]),_:1}),Te(Z,{prop:"processing_time",label:"处理时间",width:"100",sortable:""},{default:Me(({row:e})=>{return[Pe(qe((a=e.processing_time,a<60?"".concat(a,"秒"):a<3600?"".concat(Math.floor(a/60),"分钟"):"".concat(Math.floor(a/3600),"小时").concat(Math.floor(a%3600/60),"分钟"))),1)];var a}),_:1}),Te(Z,{prop:"created_at",label:"创建时间",width:"160",sortable:""},{default:Me(({row:e})=>{return[Pe(qe((a=e.created_at,new Date(a).toLocaleString("zh-CN"))),1)];var a}),_:1}),Te(Z,{label:"操作",width:"200",fixed:"right"},{default:Me(({row:e})=>{return[De("div",Qa,[Te(t,{text:"",size:"small",icon:Be(B),onClick:a=>{l("jobSelected",e)}},{default:Me(()=>a[13]||(a[13]=[Pe(" 详情 ",-1)])),_:2,__:[13]},1032,["icon","onClick"]),"completed"===e.status?(Je(),Ae(t,{key:0,text:"",size:"small",icon:Be(O),onClick:a=>{return l=e,u.value=l,void(o.value=!0);var l}},{default:Me(()=>a[14]||(a[14]=[Pe(" 下载 ",-1)])),_:2,__:[14]},1032,["icon","onClick"])):ze("",!0),(s=e.status,["failed","cancelled"].includes(s)?(Je(),Ae(t,{key:1,text:"",size:"small",icon:Be(D),onClick:a=>q(e)},{default:Me(()=>a[15]||(a[15]=[Pe(" 重试 ",-1)])),_:2,__:[15]},1032,["icon","onClick"])):ze("",!0)),Te(ee,{title:"确定删除这条记录吗？",onConfirm:a=>P(e)},{reference:Me(()=>[Te(t,{text:"",size:"small",icon:Be(R),class:"danger-button"},{default:Me(()=>a[16]||(a[16]=[Pe(" 删除 ",-1)])),_:1,__:[16]},8,["icon"])]),_:2},1032,["onConfirm"])])];var s}),_:1})]),_:1},8,["data"])),[[oe,s.value]]),De("div",el,[Te(le,{"current-page":g.currentPage,"onUpdate:currentPage":a[4]||(a[4]=e=>g.currentPage=e),"page-size":g.pageSize,"onUpdate:pageSize":a[5]||(a[5]=e=>g.pageSize=e),total:g.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:T,onCurrentChange:M},null,8,["current-page","page-size","total"])])]),Te(ie,{modelValue:o.value,"onUpdate:modelValue":a[8]||(a[8]=e=>o.value=e),title:"选择下载格式",width:"400px"},{footer:Me(()=>[Te(t,{onClick:a[7]||(a[7]=e=>o.value=!1)},{default:Me(()=>a[21]||(a[21]=[Pe("取消",-1)])),_:1,__:[21]}),Te(t,{type:"primary",onClick:S},{default:Me(()=>a[22]||(a[22]=[Pe("确定下载",-1)])),_:1,__:[22]})]),default:Me(()=>[De("div",al,[Te(te,{modelValue:n.value,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value=e)},{default:Me(()=>[Te(se,{value:"json"},{default:Me(()=>a[17]||(a[17]=[Pe("JSON 格式",-1)])),_:1,__:[17]}),Te(se,{value:"excel"},{default:Me(()=>a[18]||(a[18]=[Pe("Excel 表格",-1)])),_:1,__:[18]}),Te(se,{value:"csv"},{default:Me(()=>a[19]||(a[19]=[Pe("CSV 文件",-1)])),_:1,__:[19]}),Te(se,{value:"pdf"},{default:Me(()=>a[20]||(a[20]=[Pe("PDF 报告",-1)])),_:1,__:[20]})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-515c2eba"]]),sl={class:"batch-metrics"},tl={class:"time-range-selector"},il={class:"metrics-summary"},ol={class:"summary-item"},nl={class:"summary-value"},cl={class:"summary-item"},ul={class:"summary-value"},rl={class:"summary-item"},dl={class:"summary-value"},_l={class:"summary-item"},fl={class:"summary-value"},pl={class:"charts-container"},vl={class:"chart-placeholder"},ml={class:"chart-placeholder"},gl={class:"chart-placeholder"},bl={class:"metrics-table"},yl=He(we({__name:"BatchMetrics",setup(e){const a=xe("week"),l=xe(!1),s=xe({summary:{totalJobs:0,successJobs:0,failedJobs:0,avgProcessingTime:0,totalFileSize:0},details:[]}),t=()=>c(this,null,function*(){var e,t,i;l.value=!0;try{const l={today:1,week:7,month:30,quarter:90,year:365}[a.value]||7,i=yield be({days:l});if(i&&i.success){const a=i.statistics||{},o=a.total_jobs||0,n=a.success_rate||0;s.value.summary={totalJobs:o,successJobs:a.completed_jobs||0,failedJobs:o-(a.completed_jobs||0),avgProcessingTime:(null==(e=a.processor_stats)?void 0:e.average_file_time)||0,totalFileSize:a.total_files?.5*a.total_files:0};const c=new Date,u=[];for(let e=l-1;e>=0;e--){const s=new Date(c);s.setDate(s.getDate()-e);const i=Math.floor(o/l)+(2*Math.random()-1),r=Math.floor(i*(n/100));u.push({date:s.toISOString().split("T")[0],totalJobs:Math.max(0,Math.round(i)),successJobs:Math.max(0,Math.round(r)),failedJobs:Math.max(0,Math.round(i-r)),avgProcessingTime:((null==(t=a.processor_stats)?void 0:t.average_file_time)||0)+(10*Math.random()-5),totalFileSize:Math.round((a.total_files||0)/l*.5*100)/100})}s.value.details=u,de.success("统计数据加载成功")}else{const e=(null==i?void 0:i.error)||"获取统计数据失败";de.error(e)}}catch(o){let e="加载统计数据失败";404===(null==(i=null==o?void 0:o.response)?void 0:i.status)?e="批量分析统计服务暂不可用":(null==o?void 0:o.message)&&(e=o.message),de.error(e)}finally{l.value=!1}});return Fe(()=>{t()}),(e,i)=>{const o=$,n=x,c=u,r=_,f=d,p=b,v=A,m=W,g=L;return Je(),Ue("div",sl,[i[17]||(i[17]=De("div",{class:"metrics-header"},[De("h3",null,"统计分析"),De("p",null,"批量分析任务的统计数据和性能指标")],-1)),De("div",tl,[Te(n,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=e=>a.value=e),onChange:t},{default:Me(()=>[Te(o,{value:"today"},{default:Me(()=>i[1]||(i[1]=[Pe("今天",-1)])),_:1,__:[1]}),Te(o,{value:"week"},{default:Me(()=>i[2]||(i[2]=[Pe("本周",-1)])),_:1,__:[2]}),Te(o,{value:"month"},{default:Me(()=>i[3]||(i[3]=[Pe("本月",-1)])),_:1,__:[3]}),Te(o,{value:"quarter"},{default:Me(()=>i[4]||(i[4]=[Pe("本季度",-1)])),_:1,__:[4]}),Te(o,{value:"year"},{default:Me(()=>i[5]||(i[5]=[Pe("本年",-1)])),_:1,__:[5]})]),_:1},8,["modelValue"])]),De("div",il,[Te(f,{gutter:20},{default:Me(()=>[Te(r,{span:6},{default:Me(()=>[Te(c,{class:"summary-card"},{default:Me(()=>[De("div",ol,[De("div",nl,qe(s.value.summary.totalJobs||0),1),i[6]||(i[6]=De("div",{class:"summary-label"},"总任务数",-1))])]),_:1})]),_:1}),Te(r,{span:6},{default:Me(()=>[Te(c,{class:"summary-card"},{default:Me(()=>[De("div",cl,[De("div",ul,qe(s.value.summary.successJobs||0),1),i[7]||(i[7]=De("div",{class:"summary-label"},"成功任务",-1))])]),_:1})]),_:1}),Te(r,{span:6},{default:Me(()=>[Te(c,{class:"summary-card"},{default:Me(()=>[De("div",rl,[De("div",dl,qe(s.value.summary.failedJobs||0),1),i[8]||(i[8]=De("div",{class:"summary-label"},"失败任务",-1))])]),_:1})]),_:1}),Te(r,{span:6},{default:Me(()=>[Te(c,{class:"summary-card"},{default:Me(()=>[De("div",_l,[De("div",fl,qe((s.value.summary.avgProcessingTime||0).toFixed(1))+"s",1),i[9]||(i[9]=De("div",{class:"summary-label"},"平均处理时间",-1))])]),_:1})]),_:1})]),_:1})]),De("div",pl,[Te(f,{gutter:20},{default:Me(()=>[Te(r,{span:12},{default:Me(()=>[Te(c,{class:"chart-card"},{default:Me(()=>[i[11]||(i[11]=De("div",{class:"chart-header"},[De("h4",null,"任务状态分布")],-1)),De("div",vl,[Te(p,null,{default:Me(()=>[Te(Be(H))]),_:1}),i[10]||(i[10]=De("p",null,"图表加载中...",-1))])]),_:1,__:[11]})]),_:1}),Te(r,{span:12},{default:Me(()=>[Te(c,{class:"chart-card"},{default:Me(()=>[i[13]||(i[13]=De("div",{class:"chart-header"},[De("h4",null,"分析类型分布")],-1)),De("div",ml,[Te(p,null,{default:Me(()=>[Te(Be(G))]),_:1}),i[12]||(i[12]=De("p",null,"图表加载中...",-1))])]),_:1,__:[13]})]),_:1})]),_:1}),Te(f,{gutter:20,style:{"margin-top":"20px"}},{default:Me(()=>[Te(r,{span:24},{default:Me(()=>[Te(c,{class:"chart-card"},{default:Me(()=>[i[15]||(i[15]=De("div",{class:"chart-header"},[De("h4",null,"处理时间趋势")],-1)),De("div",gl,[Te(p,null,{default:Me(()=>[Te(Be(X))]),_:1}),i[14]||(i[14]=De("p",null,"图表加载中...",-1))])]),_:1,__:[15]})]),_:1})]),_:1})]),De("div",bl,[Te(c,null,{default:Me(()=>[i[16]||(i[16]=De("div",{class:"table-header"},[De("h4",null,"详细统计")],-1)),Oe((Je(),Ae(m,{data:s.value.details},{default:Me(()=>[Te(v,{prop:"date",label:"日期",width:"120"}),Te(v,{prop:"totalJobs",label:"总任务",width:"100"}),Te(v,{prop:"successJobs",label:"成功",width:"100"}),Te(v,{prop:"failedJobs",label:"失败",width:"100"}),Te(v,{prop:"avgProcessingTime",label:"平均时长(s)",width:"120"}),Te(v,{prop:"totalFileSize",label:"文件大小(MB)",width:"120"})]),_:1},8,["data"])),[[g,l.value]])]),_:1,__:[16]})])])}}}),[["__scopeId","data-v-c4dc6da1"]]),hl={class:"system-status"},jl={class:"status-header"},wl={class:"refresh-info"},xl={class:"last-update"},kl={class:"system-overview"},Vl={class:"status-indicator"},Cl={class:"status-text"},Ul={class:"detailed-status"},Tl={class:"service-list"},Ml={class:"service-info"},zl={class:"service-details"},Dl={class:"service-metrics"},Il={class:"response-time"},Sl={class:"resource-metrics"},ql={class:"resource-item"},Bl={class:"resource-label"},Pl={class:"resource-progress"},Jl={class:"progress-text"},Rl={class:"resource-item"},Fl={class:"resource-label"},El={class:"resource-progress"},Ll={class:"progress-text"},Al={class:"resource-item"},Ol={class:"resource-label"},Nl={class:"resource-progress"},Wl={class:"progress-text"},Yl={class:"resource-item"},Kl={class:"resource-label"},$l={class:"resource-progress"},Hl={class:"progress-text"},Gl={class:"queue-status"},Xl={class:"queue-metric"},Zl={class:"metric-value"},Ql={class:"queue-metric"},es={class:"metric-value"},as={class:"queue-metric"},ls={class:"metric-value"},ss={key:0,class:"queue-visualization"},ts={class:"queue-items"},is={class:"item-info"},os={class:"job-id"},ns={class:"job-name"},cs={class:"item-meta"},us={class:"wait-time"},rs={key:0,class:"more-items"},ds={class:"system-logs"},_s={class:"log-filters"},fs={class:"log-list"},ps={class:"log-time"},vs={class:"log-level"},ms={class:"log-message"},gs={key:0,class:"no-logs"},bs=He(we({__name:"SystemStatus",setup(e){const a=xe(!1),l=xe(""),s=xe(""),t=ke({overall:"healthy"}),i=ke({queueLength:0,activeTasks:0,cpuUsage:0,memoryUsage:0,diskUsage:0,networkUsage:0}),o=xe([{name:"文档处理服务",description:"负责文档解析和预处理",status:"running",responseTime:45},{name:"AI分析引擎",description:"执行智能分析任务",status:"running",responseTime:120},{name:"队列管理器",description:"管理任务队列和调度",status:"running",responseTime:15},{name:"结果存储服务",description:"存储和管理分析结果",status:"running",responseTime:30}]),n=ke({pending:0,processing:0,avgWaitTime:0}),r=xe([]),f=xe([]),p=xe([]);let g=null;const y=e=>({healthy:"CircleCheck",warning:"Warning",error:"CircleClose"}[e]||"CircleCheck"),h=e=>({healthy:"运行正常",warning:"存在警告",error:"系统异常"}[e]||"运行正常"),x=e=>({running:"CircleCheck",warning:"Warning",error:"CircleClose",stopped:"CircleClose"}[e]||"CircleCheck"),k=e=>({running:"success",warning:"warning",error:"danger",stopped:"info"}[e]||"success"),V=e=>({running:"运行中",warning:"警告",error:"错误",stopped:"已停止"}[e]||"运行中"),C=e=>e<60?"#67c23a":e<80?"#e6a23c":"#f56c6c",U=e=>({high:"高优先级",medium:"中优先级",low:"低优先级"}[e]||"低优先级"),T=e=>new Date(e).toLocaleString("zh-CN"),M=()=>c(this,null,function*(){var e,s,c,u;a.value=!0;try{const a=yield ye();if(a&&a.success&&a.status){const c=a.status;t.overall="healthy"===c.status?"healthy":"busy"===c.status?"warning":"error",c.resource_usage&&(i.cpuUsage=c.resource_usage.cpu_usage||0,i.memoryUsage=c.resource_usage.memory_usage||0,i.diskUsage=c.resource_usage.disk_usage||0,i.networkUsage=0),i.queueLength=c.queue_length||0,i.activeTasks=c.active_jobs||0,n.pending=c.queue_length||0,n.processing=c.active_jobs||0,n.avgWaitTime=(null==(e=c.performance)?void 0:e.average_file_time)||0,o.value=[{name:"批量分析服务",description:"文档批量分析处理服务",status:"healthy"===c.status?"running":"warning",responseTime:Math.round(50*Math.random()+10)},{name:"AI分析引擎",description:"智能文档分析引擎",status:"running",responseTime:Math.round(100*Math.random()+50)},{name:"文件处理器",description:"文档上传和预处理服务",status:(null==(s=c.processing_capacity)?void 0:s.active_workers)>0?"running":"stopped",responseTime:Math.round(30*Math.random()+20)}],r.value=Array.from({length:Math.min(c.queue_length||0,5)},(e,a)=>({jobId:1e3+a,name:"批量分析任务 #".concat(1e3+a),priority:["high","medium","low"][Math.floor(3*Math.random())],waitTime:Math.round(300*Math.random()+60)})),l.value=T(Date.now())}else{const e=(null==a?void 0:a.error)||"获取系统状态数据格式错误";de.error(e)}}catch(d){let e="获取系统状态失败";404===(null==(c=null==d?void 0:d.response)?void 0:c.status)?e="系统状态API端点不存在":500===(null==(u=null==d?void 0:d.response)?void 0:u.status)?e="服务器内部错误":(null==d?void 0:d.message)&&(e=d.message),de.error(e)}finally{a.value=!1}}),z=()=>c(this,null,function*(){try{const e=[{id:1,timestamp:Date.now()-3e5,level:"info",message:"批量分析任务 #1001 已完成"},{id:2,timestamp:Date.now()-6e5,level:"warning",message:"文档处理服务响应时间较长"},{id:3,timestamp:Date.now()-9e5,level:"error",message:"任务 #1000 处理失败：文件格式不支持"}];f.value=e,I()}catch(e){de.error("加载系统日志失败")}}),I=()=>{s.value?p.value=f.value.filter(e=>e.level===s.value):p.value=[...f.value]};return Fe(()=>{M(),z(),g=window.setInterval(()=>{M()},3e4)}),Ee(()=>{g&&(clearInterval(g),g=null)}),(e,c)=>{const f=w,g=b,S=u,B=_,P=E,R=d,F=j,L=J,A=m,O=v,N=q;return Je(),Ue("div",hl,[De("div",jl,[c[2]||(c[2]=De("h3",null,"系统状态",-1)),c[3]||(c[3]=De("p",null,"批量分析系统的实时运行状态和性能监控",-1)),De("div",wl,[Te(f,{icon:Be(D),onClick:M,loading:a.value},{default:Me(()=>c[1]||(c[1]=[Pe(" 刷新状态 ",-1)])),_:1,__:[1]},8,["icon","loading"]),De("span",xl,"最后更新: "+qe(l.value),1)])]),De("div",kl,[Te(R,{gutter:20},{default:Me(()=>[Te(B,{span:6},{default:Me(()=>[Te(S,{class:Le(["status-card",{"status-healthy":"healthy"===t.overall}])},{default:Me(()=>{return[De("div",Vl,[Te(g,{class:Le(y(t.overall)),color:(e=t.overall,{healthy:"#67c23a",warning:"#e6a23c",error:"#f56c6c"}[e]||"#67c23a")},{default:Me(()=>[(Je(),Ae(Ne(y(t.overall))))]),_:1},8,["class","color"]),De("div",Cl,[c[4]||(c[4]=De("h4",null,"系统状态",-1)),De("p",null,qe(h(t.overall)),1)])])];var e}),_:1},8,["class"])]),_:1}),Te(B,{span:6},{default:Me(()=>[Te(S,{class:"metric-card"},{default:Me(()=>[Te(P,{title:"当前队列",value:i.queueLength,suffix:"个任务","prefix-icon":e.List},null,8,["value","prefix-icon"])]),_:1})]),_:1}),Te(B,{span:6},{default:Me(()=>[Te(S,{class:"metric-card"},{default:Me(()=>[Te(P,{title:"并发处理",value:i.activeTasks,suffix:"个任务","prefix-icon":e.Cpu},null,8,["value","prefix-icon"])]),_:1})]),_:1}),Te(B,{span:6},{default:Me(()=>[Te(S,{class:"metric-card"},{default:Me(()=>[Te(P,{title:"系统负载",value:i.cpuUsage,suffix:"%","prefix-icon":Be(Z)},null,8,["value","prefix-icon"])]),_:1})]),_:1})]),_:1})]),De("div",Ul,[Te(R,{gutter:20},{default:Me(()=>[Te(B,{span:12},{default:Me(()=>[Te(S,{header:"服务状态"},{default:Me(()=>[De("div",Tl,[(Je(!0),Ue(Ie,null,Se(o.value,e=>{return Je(),Ue("div",{key:e.name,class:"service-item"},[De("div",Ml,[Te(g,{color:(a=e.status,{running:"#67c23a",warning:"#e6a23c",error:"#f56c6c",stopped:"#909399"}[a]||"#67c23a")},{default:Me(()=>[(Je(),Ae(Ne(x(e.status))))]),_:2},1032,["color"]),De("div",zl,[De("h5",null,qe(e.name),1),De("p",null,qe(e.description),1)])]),De("div",Dl,[Te(F,{type:k(e.status),size:"small"},{default:Me(()=>[Pe(qe(V(e.status)),1)]),_:2},1032,["type"]),De("span",Il,qe(e.responseTime)+"ms",1)])]);var a}),128))])]),_:1})]),_:1}),Te(B,{span:12},{default:Me(()=>[Te(S,{header:"资源使用情况"},{default:Me(()=>[De("div",Sl,[De("div",ql,[De("div",Bl,[Te(g,null,{default:Me(()=>[Te(Be(Q))]),_:1}),c[5]||(c[5]=De("span",null,"CPU 使用率",-1))]),De("div",Pl,[Te(L,{percentage:i.cpuUsage,color:C(i.cpuUsage),"show-text":!1},null,8,["percentage","color"]),De("span",Jl,qe(i.cpuUsage)+"%",1)])]),De("div",Rl,[De("div",Fl,[Te(g,null,{default:Me(()=>[Te(Be(Q))]),_:1}),c[6]||(c[6]=De("span",null,"内存使用率",-1))]),De("div",El,[Te(L,{percentage:i.memoryUsage,color:C(i.memoryUsage),"show-text":!1},null,8,["percentage","color"]),De("span",Ll,qe(i.memoryUsage)+"%",1)])]),De("div",Al,[De("div",Ol,[Te(g,null,{default:Me(()=>[Te(Be(ee))]),_:1}),c[7]||(c[7]=De("span",null,"存储使用率",-1))]),De("div",Nl,[Te(L,{percentage:i.diskUsage,color:C(i.diskUsage),"show-text":!1},null,8,["percentage","color"]),De("span",Wl,qe(i.diskUsage)+"%",1)])]),De("div",Yl,[De("div",Kl,[Te(g,null,{default:Me(()=>[Te(Be(ae))]),_:1}),c[8]||(c[8]=De("span",null,"网络负载",-1))]),De("div",$l,[Te(L,{percentage:i.networkUsage,color:C(i.networkUsage),"show-text":!1},null,8,["percentage","color"]),De("span",Hl,qe(i.networkUsage)+"%",1)])])])]),_:1})]),_:1})]),_:1})]),De("div",Gl,[Te(S,{header:"队列状态"},{default:Me(()=>[Te(R,{gutter:20},{default:Me(()=>[Te(B,{span:8},{default:Me(()=>[De("div",Xl,[c[9]||(c[9]=De("h4",null,"等待队列",-1)),De("div",Zl,qe(n.pending),1),c[10]||(c[10]=De("div",{class:"metric-label"},"个任务",-1))])]),_:1}),Te(B,{span:8},{default:Me(()=>[De("div",Ql,[c[11]||(c[11]=De("h4",null,"处理中",-1)),De("div",es,qe(n.processing),1),c[12]||(c[12]=De("div",{class:"metric-label"},"个任务",-1))])]),_:1}),Te(B,{span:8},{default:Me(()=>[De("div",as,[c[13]||(c[13]=De("h4",null,"平均等待时间",-1)),De("div",ls,qe(n.avgWaitTime),1),c[14]||(c[14]=De("div",{class:"metric-label"},"分钟",-1))])]),_:1})]),_:1}),r.value.length>0?(Je(),Ue("div",ss,[c[15]||(c[15]=De("h5",null,"队列详情",-1)),De("div",ts,[(Je(!0),Ue(Ie,null,Se(r.value.slice(0,10),e=>{return Je(),Ue("div",{key:e.jobId,class:Le(["queue-item","priority-".concat(e.priority)])},[De("div",is,[De("span",os,"#"+qe(e.jobId),1),De("span",ns,qe(e.name),1)]),De("div",cs,[Te(F,{type:(a=e.priority,{high:"danger",medium:"warning",low:"info"}[a]||"info"),size:"small"},{default:Me(()=>[Pe(qe(U(e.priority)),1)]),_:2},1032,["type"]),De("span",us,"等待 "+qe(e.waitTime)+"分钟",1)])],2);var a}),128))]),r.value.length>10?(Je(),Ue("div",rs," 还有 "+qe(r.value.length-10)+" 个任务... ",1)):ze("",!0)])):ze("",!0)]),_:1})]),De("div",ds,[Te(S,{header:"系统日志"},{default:Me(()=>[De("div",_s,[Te(O,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=e=>s.value=e),placeholder:"日志级别",onChange:I},{default:Me(()=>[Te(A,{label:"全部",value:""}),Te(A,{label:"错误",value:"error"}),Te(A,{label:"警告",value:"warning"}),Te(A,{label:"信息",value:"info"})]),_:1},8,["modelValue"]),Te(f,{icon:Be(D),onClick:z},{default:Me(()=>c[16]||(c[16]=[Pe("刷新日志",-1)])),_:1,__:[16]},8,["icon"])]),De("div",fs,[(Je(!0),Ue(Ie,null,Se(p.value,e=>{return Je(),Ue("div",{key:e.id,class:Le(["log-item","log-".concat(e.level)])},[De("div",ps,qe(T(e.timestamp)),1),De("div",vs,[Te(F,{type:(a=e.level,{error:"danger",warning:"warning",info:"info"}[a]||"info"),size:"small"},{default:Me(()=>[Pe(qe(e.level.toUpperCase()),1)]),_:2},1032,["type"])]),De("div",ms,qe(e.message),1)],2);var a}),128))]),0===p.value.length?(Je(),Ue("div",gs,[Te(N,{description:"暂无日志记录"})])):ze("",!0)]),_:1})])])}}}),[["__scopeId","data-v-9ad82e91"]]),ys={class:"batch-job-details"},hs={class:"details-header"},js={class:"job-title"},ws={class:"job-actions"},xs={class:"job-overview"},ks={class:"progress-overview"},Vs={class:"progress-item"},Cs={class:"stats-grid"},Us={class:"stat-item"},Ts={class:"stat-value"},Ms={class:"stat-item"},zs={class:"stat-value"},Ds={class:"stat-item"},Is={class:"stat-value"},Ss={class:"stat-item"},qs={class:"stat-value"},Bs={key:0,class:"current-processing"},Ps={key:1,class:"time-info"},Js={key:0,class:"job-description"},Rs={class:"file-details"},Fs={class:"file-filters"},Es={class:"file-name-cell"},Ls={key:1,class:"error-details"},As={class:"error-content"},Os={key:0,class:"error-meta"},Ns={class:"config-details"},Ws={key:0,class:"file-result-content"},Ys={key:0,class:"file-error-content"},Ks=He(we({__name:"BatchJobDetails",props:{job:{}},emits:["jobCancelled","jobRetried","close"],setup(e,{emit:a}){const l=e,s=We(),t=a,i=xe("all"),o=xe(""),n=xe(!1),r=xe(!1),f=xe(null),v=xe(null),m=Ve(()=>{let e=l.job.results||[];if("all"!==i.value&&(e=e.filter(e=>e.status===i.value)),o.value){const a=o.value.toLowerCase();e=e.filter(e=>e.file_name.toLowerCase().includes(a))}return e}),g=e=>({pending:"等待中",processing:"处理中",completed:"已完成",failed:"已失败",cancelled:"已取消"}[e]||e),y=e=>({success:"success",failed:"danger",processing:"warning",skipped:"info"}[e]||"info"),k=e=>({success:"成功",failed:"失败",processing:"处理中",skipped:"跳过"}[e]||e),V=e=>["pending","processing"].includes(e),C=e=>["failed","cancelled"].includes(e),U=e=>new Date(e).toLocaleString("zh-CN"),T=e=>e<60?"".concat(e,"秒"):e<3600?"".concat(Math.floor(e/60),"分钟"):"".concat(Math.floor(e/3600),"小时").concat(Math.floor(e%3600/60),"分钟"),S=()=>{},q=()=>c(this,null,function*(){try{if("confirm"!==(yield z.confirm('确定要取消任务 "'.concat(l.job.job_name||"#".concat(l.job.job_id),'" 吗？'),"取消任务",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})))return;const e=yield fe(l.job.job_id);if(!e.success)throw new Error(e.error||"取消任务失败");de.success("任务已取消"),t("jobCancelled",l.job.job_id)}catch(e){"cancel"!==e.message&&de.error(e.message||"取消任务失败")}}),R=()=>c(this,null,function*(){try{if("confirm"!==(yield z.confirm('确定要重试任务 "'.concat(l.job.job_name||"#".concat(l.job.job_id),'" 吗？'),"重试任务",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"})))return;const e=yield pe(l.job.job_id);if(!e.success)throw new Error(e.error||"重试任务失败");de.success("任务已重新提交，新任务ID: ".concat(e.new_job_id)),t("jobRetried",e.new_job_id)}catch(e){"cancel"!==e.message&&de.error(e.message||"重试任务失败")}}),F=()=>{s.push("/batch-analysis/results/".concat(l.job.job_id)),t("close")},E=()=>{de.info("开始下载结果文件...")};return(e,a)=>{const l=j,s=w,t=se,c=le,z=u,L=_,N=J,Y=b,G=d,Z=$,Q=x,ee=p,ae=A,ie=W,oe=M,ne=h,ce=K;return Je(),Ue("div",ys,[De("div",hs,[De("div",js,[De("h3",null,qe(e.job.job_name||"任务 #".concat(e.job.job_id)),1),Te(l,{type:(ue=e.job.status,{pending:"info",processing:"warning",completed:"success",failed:"danger",cancelled:"info"}[ue]||"info"),size:"large"},{default:Me(()=>[Pe(qe(g(e.job.status)),1)]),_:1},8,["type"])]),De("div",ws,[V(e.job.status)?(Je(),Ae(s,{key:0,type:"warning",icon:Be(P),onClick:q},{default:Me(()=>a[5]||(a[5]=[Pe(" 取消任务 ",-1)])),_:1,__:[5]},8,["icon"])):ze("",!0),C(e.job.status)?(Je(),Ae(s,{key:1,type:"primary",icon:Be(D),onClick:R},{default:Me(()=>a[6]||(a[6]=[Pe(" 重试任务 ",-1)])),_:1,__:[6]},8,["icon"])):ze("",!0),"completed"===e.job.status?(Je(),Ae(s,{key:2,type:"primary",icon:Be(B),onClick:F},{default:Me(()=>a[7]||(a[7]=[Pe(" 查看详细结果 ",-1)])),_:1,__:[7]},8,["icon"])):ze("",!0),"completed"===e.job.status?(Je(),Ae(s,{key:3,type:"success",icon:Be(O),onClick:E},{default:Me(()=>a[8]||(a[8]=[Pe(" 下载结果 ",-1)])),_:1,__:[8]},8,["icon"])):ze("",!0),Te(s,{onClick:a[0]||(a[0]=a=>e.$emit("close"))},{default:Me(()=>a[9]||(a[9]=[Pe("关闭",-1)])),_:1,__:[9]})])]),De("div",xs,[Te(G,{gutter:20},{default:Me(()=>[Te(L,{span:12},{default:Me(()=>[Te(z,{header:"基本信息"},{default:Me(()=>[Te(c,{column:1,border:""},{default:Me(()=>[Te(t,{label:"任务ID"},{default:Me(()=>[Pe(qe(e.job.job_id),1)]),_:1}),Te(t,{label:"任务名称"},{default:Me(()=>[Pe(qe(e.job.job_name||"未命名"),1)]),_:1}),Te(t,{label:"分析类型"},{default:Me(()=>{return[Pe(qe((a=e.job.analysis_type,{customer_requirements:"客户需求分析",competitor_analysis:"竞品资料分析",project_mining:"历史项目挖掘",product_extraction:"产品信息提取",document_classification:"文档分类",quality_assessment:"质量评估",comprehensive:"综合分析"}[a]||a)),1)];var a}),_:1}),Te(t,{label:"处理优先级"},{default:Me(()=>{return[Pe(qe((a=e.job.processing_priority,{speed:"速度优先",accuracy:"准确性优先",balanced:"平衡模式"}[a]||a)),1)];var a}),_:1}),Te(t,{label:"创建时间"},{default:Me(()=>[Pe(qe(U(e.job.created_at)),1)]),_:1}),Te(t,{label:"开始时间"},{default:Me(()=>[Pe(qe(e.job.started_at?U(e.job.started_at):"未开始"),1)]),_:1}),Te(t,{label:"完成时间"},{default:Me(()=>[Pe(qe(e.job.completed_at?U(e.job.completed_at):"未完成"),1)]),_:1})]),_:1})]),_:1})]),_:1}),Te(L,{span:12},{default:Me(()=>[Te(z,{header:"进度统计"},{default:Me(()=>{var l,s,t,i,o,n,c;return[De("div",ks,[De("div",Vs,[a[10]||(a[10]=De("div",{class:"progress-label"},"总体进度",-1)),Te(N,{percentage:(null==(l=e.job.progress)?void 0:l.percentage)||0,status:"failed"===e.job.status?"exception":"success","stroke-width":12},null,8,["percentage","status"])]),De("div",Cs,[De("div",Us,[De("div",Ts,qe((null==(s=e.job.progress)?void 0:s.total_files)||0),1),a[11]||(a[11]=De("div",{class:"stat-label"},"总文件数",-1))]),De("div",Ms,[De("div",zs,qe((null==(t=e.job.progress)?void 0:t.processed_files)||0),1),a[12]||(a[12]=De("div",{class:"stat-label"},"已处理",-1))]),De("div",Ds,[De("div",Is,qe((null==(i=e.job.progress)?void 0:i.successful_files)||0),1),a[13]||(a[13]=De("div",{class:"stat-label"},"成功",-1))]),De("div",Ss,[De("div",qs,qe((null==(o=e.job.progress)?void 0:o.failed_files)||0),1),a[14]||(a[14]=De("div",{class:"stat-label"},"失败",-1))])]),(null==(n=e.job.progress)?void 0:n.current_file)?(Je(),Ue("div",Bs,[Te(Y,{class:"processing-icon"},{default:Me(()=>[Te(Be(te))]),_:1}),De("span",null,"当前处理: "+qe(e.job.progress.current_file),1)])):ze("",!0),(null==(c=e.job.progress)?void 0:c.estimated_remaining_time)>0?(Je(),Ue("div",Ps,[Te(Y,null,{default:Me(()=>[Te(Be(X))]),_:1}),De("span",null,"预计剩余时间: "+qe(T(e.job.progress.estimated_remaining_time)),1)])):ze("",!0)])]}),_:1})]),_:1})]),_:1})]),e.job.description?(Je(),Ue("div",Js,[Te(z,{header:"任务描述"},{default:Me(()=>[De("p",null,qe(e.job.description),1)]),_:1})])):ze("",!0),De("div",Rs,[Te(z,{header:"文件处理详情"},{default:Me(()=>[De("div",Fs,[Te(Q,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),onChange:S},{default:Me(()=>[Te(Z,{value:"all"},{default:Me(()=>a[15]||(a[15]=[Pe("全部文件",-1)])),_:1,__:[15]}),Te(Z,{value:"success"},{default:Me(()=>a[16]||(a[16]=[Pe("成功",-1)])),_:1,__:[16]}),Te(Z,{value:"failed"},{default:Me(()=>a[17]||(a[17]=[Pe("失败",-1)])),_:1,__:[17]}),Te(Z,{value:"processing"},{default:Me(()=>a[18]||(a[18]=[Pe("处理中",-1)])),_:1,__:[18]})]),_:1},8,["modelValue"]),Te(ee,{modelValue:o.value,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value=e),placeholder:"搜索文件名","prefix-icon":Be(I),clearable:"",onInput:S,style:{width:"200px"}},null,8,["modelValue","prefix-icon"])]),Te(ie,{data:m.value,stripe:"",border:"",style:{width:"100%","margin-top":"15px"},"default-sort":{prop:"processing_time",order:"descending"}},{default:Me(()=>[Te(ae,{prop:"file_name",label:"文件名","min-width":"200"},{default:Me(({row:e})=>[De("div",Es,[Te(Y,null,{default:Me(()=>[Te(Be(H))]),_:1}),De("span",null,qe(e.file_name),1)])]),_:1}),Te(ae,{prop:"file_size",label:"文件大小",width:"100"},{default:Me(({row:e})=>{return[Pe(qe((a=e.file_size,a<1024?a+" B":a<1048576?(a/1024).toFixed(1)+" KB":a<1073741824?(a/1048576).toFixed(1)+" MB":(a/1073741824).toFixed(1)+" GB")),1)];var a}),_:1}),Te(ae,{prop:"status",label:"状态",width:"100"},{default:Me(({row:e})=>[Te(l,{type:y(e.status),size:"small"},{default:Me(()=>[Pe(qe(k(e.status)),1)]),_:2},1032,["type"])]),_:1}),Te(ae,{prop:"processing_time",label:"处理时间",width:"100",sortable:""},{default:Me(({row:e})=>[Pe(qe(T(e.processing_time)),1)]),_:1}),Te(ae,{label:"操作",width:"120"},{default:Me(({row:e})=>["success"===e.status?(Je(),Ae(s,{key:0,text:"",size:"small",onClick:a=>{return l=e,f.value=l,void(n.value=!0);var l}},{default:Me(()=>a[19]||(a[19]=[Pe(" 查看结果 ",-1)])),_:2,__:[19]},1032,["onClick"])):ze("",!0),"failed"===e.status?(Je(),Ae(s,{key:1,text:"",size:"small",onClick:a=>{return l=e,v.value=l,void(r.value=!0);var l}},{default:Me(()=>a[20]||(a[20]=[Pe(" 查看错误 ",-1)])),_:2,__:[20]},1032,["onClick"])):ze("",!0)]),_:1})]),_:1},8,["data"])]),_:1})]),"failed"===e.job.status&&e.job.error_message?(Je(),Ue("div",Ls,[Te(z,{header:"错误信息"},{default:Me(()=>[Te(oe,{title:e.job.error_message,type:"error",closable:!1,"show-icon":""},{default:Me(()=>[De("div",As,[a[22]||(a[22]=De("p",null,[De("strong",null,"错误详情:")],-1)),De("pre",null,qe(e.job.error_details||e.job.error_message),1),e.job.error_timestamp?(Je(),Ue("div",Os,[De("p",null,[a[21]||(a[21]=De("strong",null,"错误时间:",-1)),Pe(" "+qe(U(e.job.error_timestamp)),1)])])):ze("",!0)])]),_:1},8,["title"])]),_:1})])):ze("",!0),De("div",Ns,[Te(z,{header:"配置信息"},{default:Me(()=>[Te(c,{column:2,border:""},{default:Me(()=>[Te(t,{label:"自动重试"},{default:Me(()=>[Pe(qe(e.job.auto_retry_failed?"已启用":"已禁用"),1)]),_:1}),Te(t,{label:"最大重试次数"},{default:Me(()=>[Pe(qe(e.job.max_retries||0),1)]),_:1}),Te(t,{label:"完成通知"},{default:Me(()=>{var a;return[Pe(qe((null==(a=e.job.notification_settings)?void 0:a.email_on_completion)?"已启用":"已禁用"),1)]}),_:1}),Te(t,{label:"失败通知"},{default:Me(()=>{var a;return[Pe(qe((null==(a=e.job.notification_settings)?void 0:a.email_on_failure)?"已启用":"已禁用"),1)]}),_:1}),Te(t,{label:"Webhook",span:"2"},{default:Me(()=>{var a;return[Pe(qe((null==(a=e.job.notification_settings)?void 0:a.webhook_url)||"未配置"),1)]}),_:1})]),_:1})]),_:1})]),Te(ce,{modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value=e),title:"文件分析结果",width:"80%",top:"5vh"},{default:Me(()=>[f.value?(Je(),Ue("div",Ws,[De("h4",null,qe(f.value.file_name),1),Te(ne),De("pre",null,qe(JSON.stringify(f.value.analysis_result,null,2)),1)])):ze("",!0)]),_:1},8,["modelValue"]),Te(ce,{modelValue:r.value,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value=e),title:"文件处理错误",width:"60%"},{default:Me(()=>[v.value?(Je(),Ue("div",Ys,[De("h4",null,qe(v.value.file_name),1),Te(ne),Te(oe,{title:v.value.error_message,type:"error",closable:!1,"show-icon":""},null,8,["title"])])):ze("",!0)]),_:1},8,["modelValue"])]);var ue}}}),[["__scopeId","data-v-38819533"]]),$s={class:"batch-notification"},Hs={class:"notification-container"},Gs=["onClick"],Xs={class:"notification-icon"},Zs={class:"notification-content"},Qs={class:"notification-title"},et={class:"notification-message"},at={class:"notification-time"},lt={class:"notification-actions"},st={class:"notification-center"},tt={class:"notification-center-content"},it={class:"notification-filters"},ot={class:"notification-actions-bar"},nt={class:"notification-history"},ct=["onClick"],ut={class:"history-notification-header"},rt={class:"notification-meta"},dt={class:"notification-type"},_t={class:"notification-timestamp"},ft={class:"history-notification-content"},pt={key:0,class:"notification-action-buttons"},vt={key:0,class:"no-notifications"},mt=He(we({__name:"BatchNotification",props:{notifications:{}},emits:["notificationDismissed","notificationAction"],setup(e,{emit:a}){const l=e,s=a,t=xe(!1),i=xe("all"),o=xe(3),c=xe([]),u=Ve(()=>c.value.filter(e=>!e.read&&(e.persistent||!e.autoClose)).slice(0,o.value)),r=Ve(()=>c.value.filter(e=>!e.read).length),d=Ve(()=>{let e=[...c.value].reverse();switch(i.value){case"unread":e=e.filter(e=>!e.read);break;case"success":e=e.filter(e=>"success"===e.type);break;case"error":e=e.filter(e=>"error"===e.type);break;case"warning":e=e.filter(e=>"warning"===e.type);break;case"info":e=e.filter(e=>"info"===e.type)}return e}),_=e=>({success:"CircleCheck",warning:"Warning",error:"CircleClose",info:"InfoFilled"}[e]||"InfoFilled"),f=e=>({success:"成功",warning:"警告",error:"错误",info:"信息"}[e]||"信息"),p=e=>{const a=Date.now()-e;return a<6e4?"刚刚":a<36e5?"".concat(Math.floor(a/6e4),"分钟前"):a<864e5?"".concat(Math.floor(a/36e5),"小时前"):"".concat(Math.floor(a/864e5),"天前")},v=()=>{t.value=!t.value},m=e=>{const a=c.value.findIndex(a=>a.id===e);a>=0&&c.value.splice(a,1),s("notificationDismissed",e)},g=e=>{const a=c.value.find(a=>a.id===e);a&&(a.read=!0)},y=()=>{c.value.forEach(e=>{e.read=!0})},h=()=>{c.value=[],s("notificationDismissed","all")},j=()=>{},k=(e,a)=>{s("notificationAction",e.action,e.params,a)};Ce(()=>l.notifications,e=>{e.forEach(e=>{c.value.find(a=>a.id===e.id)||(c.value.push(n({},e)),(e=>{if(!1!==e.autoClose){const a=e.duration||5e3;setTimeout(()=>{e.read||m(e.id)},a)}})(e))}),c.value=c.value.filter(a=>e.some(e=>e.id===a.id))},{immediate:!0,deep:!0});const V=e=>{"Escape"===e.key&&t.value&&(t.value=!1),(e.ctrlKey||e.metaKey)&&e.shiftKey&&"N"===e.key&&(v(),e.preventDefault())};return Fe(()=>{document.addEventListener("keydown",V)}),Ee(()=>{document.removeEventListener("keydown",V)}),(e,a)=>{const l=b,s=w,o=ie,n=$,c=x,V=q,C=oe;return Je(),Ue("div",$s,[De("div",Hs,[Te(Ye,{name:"notification",tag:"div",class:"notification-list"},{default:Me(()=>[(Je(!0),Ue(Ie,null,Se(u.value,e=>(Je(),Ue("div",{key:e.id,class:Le(["notification-item",["notification-".concat(e.type)]]),onClick:a=>(e=>{if(g(e.id),e.actions&&e.actions.length>0){const a=e.actions[0];k(a,e)}})(e)},[De("div",Xs,[Te(l,{size:20},{default:Me(()=>[(Je(),Ae(Ne(_(e.type))))]),_:2},1024)]),De("div",Zs,[De("div",Qs,qe(e.title),1),De("div",et,qe(e.message),1),De("div",at,qe(p(e.timestamp)),1)]),De("div",lt,[Te(s,{text:"",icon:Be(P),onClick:Ke(a=>m(e.id),["stop"]),class:"dismiss-button"},null,8,["icon","onClick"])])],10,Gs))),128))]),_:1})]),De("div",st,[Te(o,{value:r.value,hidden:0===r.value},{default:Me(()=>[Te(s,{type:"primary",icon:Be(ne),circle:"",onClick:v,class:"notification-button"},null,8,["icon"])]),_:1},8,["value","hidden"])]),Te(C,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e),title:"通知中心",direction:"rtl",size:"400px"},{default:Me(()=>[De("div",tt,[De("div",it,[Te(c,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),onChange:j},{default:Me(()=>[Te(n,{value:"all"},{default:Me(()=>a[2]||(a[2]=[Pe("全部",-1)])),_:1,__:[2]}),Te(n,{value:"unread"},{default:Me(()=>a[3]||(a[3]=[Pe("未读",-1)])),_:1,__:[3]}),Te(n,{value:"success"},{default:Me(()=>a[4]||(a[4]=[Pe("成功",-1)])),_:1,__:[4]}),Te(n,{value:"error"},{default:Me(()=>a[5]||(a[5]=[Pe("错误",-1)])),_:1,__:[5]})]),_:1},8,["modelValue"]),De("div",ot,[Te(s,{text:"",onClick:y},{default:Me(()=>a[6]||(a[6]=[Pe(" 全部标记为已读 ",-1)])),_:1,__:[6]}),Te(s,{text:"",onClick:h},{default:Me(()=>a[7]||(a[7]=[Pe(" 清空通知 ",-1)])),_:1,__:[7]})])]),De("div",nt,[(Je(!0),Ue(Ie,null,Se(d.value,e=>{return Je(),Ue("div",{key:e.id,class:Le(["history-notification-item",{unread:!e.read}]),onClick:a=>g(e.id)},[De("div",ut,[De("div",rt,[Te(l,{color:(t=e.type,{success:"#67c23a",warning:"#e6a23c",error:"#f56c6c",info:"#409eff"}[t]||"#409eff")},{default:Me(()=>[(Je(),Ae(Ne(_(e.type))))]),_:2},1032,["color"]),De("span",dt,qe(f(e.type)),1),De("span",_t,qe((a=e.timestamp,new Date(a).toLocaleString("zh-CN"))),1)]),Te(s,{text:"",icon:Be(P),onClick:Ke(a=>{return l=e.id,void m(l);var l},["stop"]),size:"small"},null,8,["icon","onClick"])]),De("div",ft,[De("h4",null,qe(e.title),1),De("p",null,qe(e.message),1)]),e.actions?(Je(),Ue("div",pt,[(Je(!0),Ue(Ie,null,Se(e.actions,a=>(Je(),Ae(s,{key:a.label,type:a.type||"text",size:"small",onClick:Ke(l=>k(a,e),["stop"])},{default:Me(()=>[Pe(qe(a.label),1)]),_:2},1032,["type","onClick"]))),128))])):ze("",!0)],10,ct);var a,t}),128)),0===d.value.length?(Je(),Ue("div",vt,[Te(V,{description:"暂无通知"})])):ze("",!0)])])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-1b48fd98"]]),gt={class:"batch-analysis"},bt=we({__name:"BatchAnalysis",setup(e){const s=xe("create"),t=xe(!1),i=xe(null),o=xe([]),u=xe([]);let r=null;const d=xe(0);$e("refreshTrigger",d);const _=e=>c(this,null,function*(){s.value="monitor",re({title:"任务提交成功",message:"批量分析任务 #".concat(e," 已提交，正在启动处理..."),type:"success",duration:5e3});try{(yield je(e)).success&&re({title:"任务已启动",message:"批量分析任务 #".concat(e," 已开始处理"),type:"info",duration:3e3})}catch(a){}yield j(e),w(),d.value++}),f=e=>{de.error("任务提交失败: ".concat(e))},p=e=>{de.warning("任务 #".concat(e," 已取消")),o.value=o.value.filter(a=>a.job_id!==e),d.value++},v=e=>{de.success("任务已重新提交，新任务ID: #".concat(e)),j(e),d.value++},m=e=>{i.value=e,t.value=!0},g=e=>c(this,null,function*(){try{const a=yield he(String(e.job_id));if(a&&a.success&&a.status)i.value=a.status;else{const a={success:!0,job_id:e.job_id,job_name:e.job_name||"任务 #".concat(e.job_id),description:e.description||"",status:e.status,analysis_type:e.analysis_type,processing_priority:"balanced",created_at:e.created_at,started_at:e.started_at,completed_at:e.completed_at,total_processing_time:e.total_processing_time,progress:{total_files:e.file_count,processed_files:e.success_count+e.fail_count,successful_files:e.success_count,failed_files:e.fail_count,percentage:e.file_count>0?(e.success_count+e.fail_count)/e.file_count*100:0,estimated_remaining_time:0},results:[],summary:{success_rate:e.success_rate,average_confidence:e.average_confidence,total_cost:e.actual_cost,quality_score:85}};i.value=a}t.value=!0}catch(a){de.error("无法加载任务详情")}}),b=()=>{de.success("任务记录已删除"),d.value++},y=(e,a)=>{de.success("开始下载任务 #".concat(e," 的").concat(a.toUpperCase(),"结果文件"))},h=e=>{u.value=u.value.filter(a=>a.id!==e)},j=e=>c(this,null,function*(){var a,l;try{const l=yield he(String(e));if(l&&l.success&&l.status){const s=l.status,t=s.status,n=o.value.findIndex(a=>a.job_id===e);n>=0?(o.value[n].status,o.value[n]=s):["pending","processing"].includes(t)&&o.value.push(s),["completed","failed","cancelled"].includes(t)&&(setTimeout(()=>{o.value=o.value.filter(a=>a.job_id!==e)},5e3),k({type:"completed"===t?"success":"error",title:"completed"===t?"任务完成":"任务失败",message:"批量分析任务 #".concat(e," ").concat("completed"===t?"已完成":"执行失败")})),(null==(a=i.value)?void 0:a.job_id)===e&&(i.value=s)}else o.value=o.value.filter(a=>a.job_id!==e)}catch(s){404===(null==(l=null==s?void 0:s.response)?void 0:l.status)&&(o.value=o.value.filter(a=>a.job_id!==e))}}),w=()=>{r||(r=window.setInterval(()=>c(this,null,function*(){const e=o.value.filter(e=>["pending","processing"].includes(e.status));if(0===e.length)return void x();const a=e.map(e=>j(e.job_id));yield Promise.allSettled(a)}),1e4))},x=()=>{r&&(clearInterval(r),r=null)},k=e=>{const s="notification-".concat(Date.now(),"-").concat(Math.random());var t,i;u.value.push((t=n({id:s},e),i={timestamp:Date.now()},a(t,l(i)))),setTimeout(()=>{h(s)},5e3)},V=()=>c(this,null,function*(){try{const e=yield ve({page:1,page_size:50,status:""});if(e&&e.success&&e.records){const a=e.records.filter(e=>["pending","processing"].includes(e.status)).map(e=>e.job_id);for(const e of a)yield j(e);a.length>0&&w()}}catch(e){}});return Fe(()=>c(this,null,function*(){de.info("批量分析系统已就绪"),yield V()})),Ee(()=>{x()}),(e,a)=>{const l=ue,n=ce,c=K;return Je(),Ue("div",gt,[a[3]||(a[3]=De("div",{class:"page-header"},[De("h1",null,"批量文档分析"),De("p",{class:"page-description"},"高效批量处理多个文档，支持大规模数据分析和自动化处理流程")],-1)),Te(n,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),class:"batch-tabs"},{default:Me(()=>[Te(l,{label:"新建任务",name:"create"},{default:Me(()=>[Te(da,{onJobSubmitted:_,onSubmissionError:f})]),_:1}),Te(l,{label:"任务监控",name:"monitor"},{default:Me(()=>[Te(La,{jobs:o.value,onJobCancelled:p,onJobRetried:v,onJobDetails:m},null,8,["jobs"])]),_:1}),Te(l,{label:"批量历史",name:"history"},{default:Me(()=>[Te(ll,{onJobSelected:g,onJobDeleted:b,onDownloadResults:y})]),_:1}),Te(l,{label:"统计分析",name:"metrics"},{default:Me(()=>[Te(yl)]),_:1}),Te(l,{label:"系统状态",name:"status"},{default:Me(()=>[Te(bs)]),_:1})]),_:1},8,["modelValue"]),Te(c,{modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value=e),title:"批量任务详情",width:"80%",top:"5vh"},{default:Me(()=>[i.value?(Je(),Ae(Ks,{key:0,job:i.value,onJobCancelled:p,onJobRetried:v,onClose:a[1]||(a[1]=e=>t.value=!1)},null,8,["job"])):ze("",!0)]),_:1},8,["modelValue"]),Te(mt,{notifications:u.value,onNotificationDismissed:h},null,8,["notifications"])])}}});export{bt as _};
