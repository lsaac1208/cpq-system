var e=(e,t,s)=>new Promise((a,i)=>{var l=e=>{try{r(s.next(e))}catch(t){i(t)}},n=e=>{try{r(s.throw(e))}catch(t){i(t)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,n);r((s=s.apply(e,t)).next())});import{I as t,a as s,E as a,t as i,f as l,b1 as n,g as r,h as c,d as o,a7 as d,K as u,b2 as p,m,a6 as _,L as v,b3 as g,b4 as y,aH as h,J as f,b as k,a3 as b,R as w,z as x,i as C,k as V,c as j,y as z,V as R,ag as q,ah as U}from"./element-plus-DR0qywX_.js";import{z as F,A as I,S as O,K as P,P as B,R as D,a8 as N,C as S,Q as L,M as T,F as J,B as Q,u as A,J as M,r as E,b as K,Z as $,w as H,l as X,X as Z}from"./vue-BMWQU0Ry.js";import{v as G}from"./api-BHu6TLr6.js";import{_ as W}from"./page-aianalysisenhanced.vue-9uq21fmn.js";const Y={class:"product-recommendations"},ee={key:0,class:"empty-state"},te={key:1,class:"recommendations-list"},se={class:"recommendation-header"},ae={class:"product-info"},ie={class:"product-name"},le={class:"product-code"},ne={class:"product-category"},re={class:"match-score"},ce={class:"score-text"},oe={class:"recommendation-content"},de={class:"product-description"},ue={class:"match-reasons"},pe={class:"pricing-info"},me={class:"price-comparison"},_e={class:"price-item"},ve={class:"price-value"},ge={class:"price-item"},ye={class:"price-value recommended"},he={class:"price-item"},fe={class:"adjustment-reasons"},ke={key:0,class:"config-recommendations"},be={class:"config-items"},we={class:"config-key"},xe={class:"config-value"},Ce={class:"pricing-strategy"},Ve={key:0,class:"primary-strategy"},je={class:"strategy-card"},ze={class:"strategy-header"},Re={class:"strategy-name"},qe={class:"strategy-description"},Ue={key:1,class:"alternative-strategies"},Fe={class:"strategy-list"},Ie={class:"strategy-name"},Oe={class:"strategy-description"},Pe={class:"recommendation-actions"},Be=F({__name:"ProductRecommendations",props:{recommendations:{}},emits:["create-quote","view-product","compare-product","refresh"],setup(e,{emit:r}){const c=r,o=e=>new Intl.NumberFormat("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),d=e=>{switch(e){case"low":return"success";case"medium":return"warning";case"high":return"danger";default:return"info"}};return(e,r)=>{const u=s,p=t,m=i,_=l,v=a;return Q(),I("div",Y,[0===e.recommendations.length?(Q(),I("div",ee,[O(p,{description:"暂无产品推荐"},{default:P(()=>[O(u,{type:"primary",onClick:r[0]||(r[0]=t=>e.$emit("refresh"))},{default:P(()=>r[1]||(r[1]=[B(" 刷新数据 ",-1)])),_:1,__:[1]})]),_:1})])):(Q(),I("div",te,[(Q(!0),I(D,null,N(e.recommendations,(e,t)=>(Q(),I("div",{key:e.product.id,class:"recommendation-card"},[O(v,{shadow:"hover"},{default:P(()=>{return[S("div",se,[S("div",ae,[S("h3",ie,L(e.product.name),1),S("p",le,"型号: "+L(e.product.code),1),S("p",ne,"类别: "+L(e.product.category),1)]),S("div",re,[O(m,{type:"circle",percentage:Math.round(100*e.match_score),color:(t=e.match_score,t>=.8?"#67c23a":t>=.6?"#e6a23c":"#f56c6c"),width:80},{default:P(({percentage:e})=>[S("span",ce,L(e)+"%",1)]),_:2},1032,["percentage","color"]),r[2]||(r[2]=S("p",{class:"score-label"},"匹配度",-1))])]),S("div",oe,[S("div",de,[S("p",null,L(e.product.description),1)]),S("div",ue,[r[3]||(r[3]=S("h4",null,"匹配原因",-1)),S("ul",null,[(Q(!0),I(D,null,N(e.match_reasons,e=>(Q(),I("li",{key:e},L(e),1))),128))])]),S("div",pe,[r[8]||(r[8]=S("h4",null,"价格建议",-1)),S("div",me,[S("div",_e,[r[4]||(r[4]=S("span",{class:"price-label"},"基础价格:",-1)),S("span",ve,"¥"+L(o(e.recommended_price.base_price)),1)]),S("div",ge,[r[5]||(r[5]=S("span",{class:"price-label"},"建议价格:",-1)),S("span",ye,"¥"+L(o(e.recommended_price.recommended_price)),1)]),S("div",he,[r[6]||(r[6]=S("span",{class:"price-label"},"调整幅度:",-1)),S("span",{class:J(["price-change",e.recommended_price.price_change_percentage>=0?"positive":"negative"])},L(e.recommended_price.price_change_percentage>0?"+":"")+L(e.recommended_price.price_change_percentage)+"% ",3)])]),S("div",fe,[r[7]||(r[7]=S("h5",null,"调整原因:",-1)),S("ul",null,[(Q(!0),I(D,null,N(e.recommended_price.adjustment_reasons,e=>(Q(),I("li",{key:e},L(e),1))),128))])])]),Object.keys(e.config_recommendations).length>0?(Q(),I("div",ke,[r[9]||(r[9]=S("h4",null,"配置建议",-1)),S("div",be,[(Q(!0),I(D,null,N(e.config_recommendations,(e,t)=>(Q(),I("div",{key:t,class:"config-item"},[S("span",we,L(t)+":",1),S("span",xe,L(e),1)]))),128))])])):T("",!0),S("div",Ce,[r[11]||(r[11]=S("h4",null,"推荐策略",-1)),e.pricing_strategy.primary_strategy?(Q(),I("div",Ve,[S("div",je,[S("div",ze,[S("span",Re,L(e.pricing_strategy.primary_strategy.name),1),O(_,{type:d(e.pricing_strategy.primary_strategy.risk_level),size:"small"},{default:P(()=>[B(L(e.pricing_strategy.primary_strategy.risk_level)+" 风险 ",1)]),_:2},1032,["type"])]),S("p",qe,L(e.pricing_strategy.primary_strategy.description),1)])])):T("",!0),e.pricing_strategy.recommended_strategies.length>1?(Q(),I("div",Ue,[r[10]||(r[10]=S("h5",null,"备选策略:",-1)),S("div",Fe,[(Q(!0),I(D,null,N(e.pricing_strategy.recommended_strategies.slice(1),e=>(Q(),I("div",{key:e.name,class:"strategy-item"},[S("span",Ie,L(e.name),1),S("span",Oe,L(e.description),1)]))),128))])])):T("",!0)])]),S("div",Pe,[O(u,{type:"primary",onClick:t=>{c("create-quote",e)},icon:"Plus"},{default:P(()=>r[12]||(r[12]=[B(" 创建报价 ",-1)])),_:2,__:[12]},1032,["onClick"]),O(u,{onClick:t=>{return s=e.product,void c("view-product",s);var s},icon:"View"},{default:P(()=>r[13]||(r[13]=[B(" 查看详情 ",-1)])),_:2,__:[13]},1032,["onClick"]),O(u,{onClick:t=>(c("compare-product",e),void n.info("产品对比功能正在开发中")),icon:"TrendCharts"},{default:P(()=>r[14]||(r[14]=[B(" 对比分析 ",-1)])),_:2,__:[14]},1032,["onClick"])])];var t}),_:2},1024)]))),128))]))])}}}),De=W(Be,[["__scopeId","data-v-85f7728e"]]),Ne={class:"market-analysis"},Se={class:"market-overview"},Le={class:"metric-content"},Te={class:"metric-icon trend"},Je={class:"metric-info"},Qe={class:"metric-content"},Ae={class:"metric-icon competition"},Me={class:"metric-info"},Ee={class:"metric-detail"},Ke={class:"metric-content"},$e={class:"metric-icon demand"},He={class:"metric-info"},Xe={class:"metric-detail"},Ze={class:"detailed-analysis"},Ge={class:"card-header"},We={class:"competition-analysis"},Ye={class:"competition-chart"},et={class:"chart-header"},tt={class:"score"},st={class:"competitor-features"},at={class:"feature-list"},it={class:"feature-item"},lt={class:"feature-value"},nt={class:"feature-item"},rt={class:"feature-value"},ct={class:"feature-item"},ot={class:"feature-value"},dt={class:"competition-recommendations"},ut={key:0},pt={key:1},mt={key:2},_t={key:3},vt={class:"card-header"},gt={class:"opportunity-analysis"},yt={class:"opportunity-chart"},ht={class:"chart-header"},ft={class:"score"},kt={class:"opportunity-stats"},bt={class:"stats-grid"},wt={class:"stat-item"},xt={class:"stat-number"},Ct={class:"stat-item"},Vt={class:"stat-number"},jt={key:0,class:"top-opportunities"},zt={class:"opportunity-list"},Rt={class:"opportunity-content"},qt={class:"opportunity-title"},Ut={class:"opportunity-description"},Ft={class:"price-sensitivity-section"},It={class:"card-header"},Ot={class:"sensitivity-analysis"},Pt={class:"sensitivity-chart"},Bt={class:"score-text"},Dt={class:"sensitivity-factors"},Nt={class:"factor-list"},St={class:"factor-item"},Lt={class:"factor-value"},Tt={class:"factor-item"},Jt={class:"factor-value"},Qt={class:"sensitivity-recommendations"},At={key:0},Mt={key:1},Et={key:2},Kt={key:3},$t={class:"demand-analysis-section"},Ht={class:"card-header"},Xt={class:"demand-analysis"},Zt={class:"demand-overview"},Gt={class:"demand-stats"},Wt={class:"demand-stat"},Yt={class:"stat-number"},es={class:"demand-stat"},ts={class:"stat-number"},ss={class:"demand-score"},as={class:"trending-products"},is={key:0,class:"trending-list"},ls={class:"trending-rank"},ns={class:"trending-info"},rs={class:"trending-category"},cs={class:"trending-count"},os={class:"trending-bar"},ds={key:1,class:"no-trending"},us=W(F({__name:"MarketAnalysis",props:{marketContext:{}},setup(e){const t=e=>{switch(e){case"growing":return"trend-growing";case"stable":return"trend-stable";case"declining":return"trend-declining";default:return"trend-unknown"}},s=e=>{switch(e){case"growing":return"增长中";case"stable":return"稳定";case"declining":return"下降";default:return"未知"}},n=e=>{switch(e){case"low":return"intensity-low";case"medium":return"intensity-medium";case"high":return"intensity-high";default:return"intensity-unknown"}},m=e=>{switch(e){case"low":return"低";case"medium":return"中等";case"high":return"激烈";default:return"未知"}},_=e=>{switch(e){case"low":return"success";case"medium":return"warning";case"high":return"danger";default:return"info"}},v=e=>{switch(e){case"low":return"heat-low";case"medium":return"heat-medium";case"high":return"heat-high";default:return"heat-unknown"}},g=e=>{switch(e){case"low":return"较低";case"medium":return"中等";case"high":return"旺盛";default:return"未知"}},y=e=>{switch(e){case"low":default:return"info";case"medium":return"warning";case"high":return"success"}},h=e=>{switch(e){case"low":return"较少";case"medium":return"中等";case"high":return"丰富";default:return"未知"}},f=e=>{switch(e){case"low":default:return"info";case"medium":return"warning";case"high":return"success"}},k=e=>{switch(e){case"low":return"不";case"medium":return"中等";case"high":return"高度";default:return"未知"}},b=e=>{switch(e){case"low":return"success";case"medium":return"warning";case"high":return"danger";default:return"info"}},w=e=>e>=.8?"#67c23a":e>=.6?"#e6a23c":e>=.4?"#f56c6c":"#909399";return(e,x)=>{const C=o,V=a,j=c,z=r,R=l,q=i;return Q(),I("div",Ne,[S("div",Se,[O(z,{gutter:24},{default:P(()=>[O(j,{span:8},{default:P(()=>[O(V,{class:"metric-card"},{default:P(()=>[S("div",Le,[S("div",Te,[O(C,null,{default:P(()=>[O(A(d))]),_:1})]),S("div",Je,[x[0]||(x[0]=S("h3",null,"市场趋势",-1)),S("p",{class:J(["metric-value",t(e.marketContext.market_trend)])},L(s(e.marketContext.market_trend)),3)])])]),_:1})]),_:1}),O(j,{span:8},{default:P(()=>[O(V,{class:"metric-card"},{default:P(()=>[S("div",Qe,[S("div",Ae,[O(C,null,{default:P(()=>[O(A(u))]),_:1})]),S("div",Me,[x[1]||(x[1]=S("h3",null,"竞争强度",-1)),S("p",{class:J(["metric-value",n(e.marketContext.competition_intensity.level)])},L(m(e.marketContext.competition_intensity.level)),3),S("p",Ee,L(e.marketContext.competition_intensity.competitor_count)+" 个竞争对手",1)])])]),_:1})]),_:1}),O(j,{span:8},{default:P(()=>[O(V,{class:"metric-card"},{default:P(()=>[S("div",Ke,[S("div",$e,[O(C,null,{default:P(()=>[O(A(p))]),_:1})]),S("div",He,[x[2]||(x[2]=S("h3",null,"需求热度",-1)),S("p",{class:J(["metric-value",v(e.marketContext.demand_heat.level)])},L(g(e.marketContext.demand_heat.level)),3),S("p",Xe,L(e.marketContext.demand_heat.total_demands)+" 个需求点",1)])])]),_:1})]),_:1})]),_:1})]),S("div",Ze,[O(z,{gutter:24},{default:P(()=>[O(j,{span:12},{default:P(()=>[O(V,null,{header:P(()=>[S("div",Ge,[x[3]||(x[3]=S("span",null,"竞争环境分析",-1)),O(R,{type:_(e.marketContext.competition_intensity.level)},{default:P(()=>[B(L(m(e.marketContext.competition_intensity.level))+"竞争 ",1)]),_:1},8,["type"])])]),default:P(()=>[S("div",We,[S("div",Ye,[S("div",et,[x[4]||(x[4]=S("h4",null,"竞争强度评分",-1)),S("span",tt,L((100*e.marketContext.competition_intensity.score).toFixed(0))+"分",1)]),O(q,{percentage:100*e.marketContext.competition_intensity.score,color:w(e.marketContext.competition_intensity.score),"stroke-width":20},null,8,["percentage","color"])]),S("div",st,[x[8]||(x[8]=S("h4",null,"竞争对手特征",-1)),S("div",at,[S("div",it,[x[5]||(x[5]=S("span",{class:"feature-label"},"大型企业:",-1)),S("span",lt,L(e.marketContext.competition_intensity.analysis.large_enterprises),1)]),S("div",nt,[x[6]||(x[6]=S("span",{class:"feature-label"},"价格激进:",-1)),S("span",rt,L(e.marketContext.competition_intensity.analysis.pricing_aggressive),1)]),S("div",ct,[x[7]||(x[7]=S("span",{class:"feature-label"},"技术先进:",-1)),S("span",ot,L(e.marketContext.competition_intensity.analysis.technology_advanced),1)])])]),S("div",dt,[x[9]||(x[9]=S("h4",null,"竞争策略建议",-1)),S("ul",null,["high"===e.marketContext.competition_intensity.level?(Q(),I("li",ut," 采用差异化策略，避免正面价格竞争 ")):T("",!0),"high"===e.marketContext.competition_intensity.level?(Q(),I("li",pt," 强化产品优势和服务质量 ")):T("",!0),"medium"===e.marketContext.competition_intensity.level?(Q(),I("li",mt," 平衡价格竞争力与产品价值 ")):T("",!0),"low"===e.marketContext.competition_intensity.level?(Q(),I("li",_t," 可以采用溢价策略，建立市场领导地位 ")):T("",!0)])])])]),_:1})]),_:1}),O(j,{span:12},{default:P(()=>[O(V,null,{header:P(()=>[S("div",vt,[x[10]||(x[10]=S("span",null,"市场机会分析",-1)),O(R,{type:f(e.marketContext.market_opportunities.level)},{default:P(()=>[B(L(h(e.marketContext.market_opportunities.level))+"机会 ",1)]),_:1},8,["type"])])]),default:P(()=>[S("div",gt,[S("div",yt,[S("div",ht,[x[11]||(x[11]=S("h4",null,"机会评分",-1)),S("span",ft,L((100*e.marketContext.market_opportunities.score).toFixed(0))+"分",1)]),O(q,{percentage:100*e.marketContext.market_opportunities.score,color:w(e.marketContext.market_opportunities.score),"stroke-width":20},null,8,["percentage","color"])]),S("div",kt,[x[14]||(x[14]=S("h4",null,"机会统计",-1)),S("div",bt,[S("div",wt,[S("span",xt,L(e.marketContext.market_opportunities.total_opportunities),1),x[12]||(x[12]=S("span",{class:"stat-label"},"总机会数",-1))]),S("div",Ct,[S("span",Vt,L(e.marketContext.market_opportunities.high_value_opportunities),1),x[13]||(x[13]=S("span",{class:"stat-label"},"高价值机会",-1))])])]),e.marketContext.market_opportunities.opportunities.length>0?(Q(),I("div",jt,[x[15]||(x[15]=S("h4",null,"主要机会",-1)),S("div",zt,[(Q(!0),I(D,null,N(e.marketContext.market_opportunities.opportunities.slice(0,3),(e,t)=>{return Q(),I("div",{key:t,class:"opportunity-item"},[S("div",Rt,[S("span",qt,"机会 "+L(t+1),1),S("p",Ut,L((s=e,"string"==typeof s?s:"object"==typeof s?s.description||s.title||JSON.stringify(s):String(s))),1)])]);var s}),128))])])):T("",!0)])]),_:1})]),_:1})]),_:1})]),S("div",Ft,[O(V,null,{header:P(()=>[S("div",It,[x[16]||(x[16]=S("span",null,"价格敏感度分析",-1)),O(R,{type:b(e.marketContext.price_sensitivity.level)},{default:P(()=>[B(L(k(e.marketContext.price_sensitivity.level))+"敏感 ",1)]),_:1},8,["type"])])]),default:P(()=>[S("div",Ot,[O(z,{gutter:24},{default:P(()=>[O(j,{span:8},{default:P(()=>[S("div",Pt,[x[17]||(x[17]=S("h4",null,"敏感度评分",-1)),O(q,{type:"circle",percentage:100*e.marketContext.price_sensitivity.score,color:w(1-e.marketContext.price_sensitivity.score),width:120},{default:P(({percentage:e})=>[S("span",Bt,L(e.toFixed(0))+"%",1)]),_:1},8,["percentage","color"])])]),_:1}),O(j,{span:8},{default:P(()=>[S("div",Dt,[x[20]||(x[20]=S("h4",null,"影响因素",-1)),S("div",Nt,[S("div",St,[x[18]||(x[18]=S("span",{class:"factor-label"},"预算提及:",-1)),S("span",Lt,L(e.marketContext.price_sensitivity.budget_mentions)+" 次",1)]),S("div",Tt,[x[19]||(x[19]=S("span",{class:"factor-label"},"成本关注:",-1)),S("span",Jt,L(e.marketContext.price_sensitivity.cost_concerns)+" 次",1)])])])]),_:1}),O(j,{span:8},{default:P(()=>[S("div",Qt,[x[21]||(x[21]=S("h4",null,"定价建议",-1)),S("ul",null,["high"===e.marketContext.price_sensitivity.level?(Q(),I("li",At," 采用成本导向定价，控制价格水平 ")):T("",!0),"high"===e.marketContext.price_sensitivity.level?(Q(),I("li",Mt," 提供多档次产品组合 ")):T("",!0),"medium"===e.marketContext.price_sensitivity.level?(Q(),I("li",Et," 平衡价格与价值，强调性价比 ")):T("",!0),"low"===e.marketContext.price_sensitivity.level?(Q(),I("li",Kt," 可以采用价值定价策略 ")):T("",!0)])])]),_:1})]),_:1})])]),_:1})]),S("div",$t,[O(V,null,{header:P(()=>[S("div",Ht,[x[22]||(x[22]=S("span",null,"需求热度分析",-1)),O(R,{type:y(e.marketContext.demand_heat.level)},{default:P(()=>[B(L(g(e.marketContext.demand_heat.level))+"需求 ",1)]),_:1},8,["type"])])]),default:P(()=>[S("div",Xt,[O(z,{gutter:24},{default:P(()=>[O(j,{span:12},{default:P(()=>[S("div",Zt,[x[26]||(x[26]=S("h4",null,"需求概况",-1)),S("div",Gt,[S("div",Wt,[S("span",Yt,L(e.marketContext.demand_heat.total_demands),1),x[23]||(x[23]=S("span",{class:"stat-label"},"总需求数",-1))]),S("div",es,[S("span",ts,L(Object.keys(e.marketContext.demand_heat.product_categories).length),1),x[24]||(x[24]=S("span",{class:"stat-label"},"产品类别",-1))])]),S("div",ss,[x[25]||(x[25]=S("h5",null,"需求热度评分",-1)),O(q,{percentage:100*e.marketContext.demand_heat.score,color:w(e.marketContext.demand_heat.score),"stroke-width":16},null,8,["percentage","color"])])])]),_:1}),O(j,{span:12},{default:P(()=>[S("div",as,[x[28]||(x[28]=S("h4",null,"热门产品类别",-1)),e.marketContext.demand_heat.trending_products.length>0?(Q(),I("div",is,[(Q(!0),I(D,null,N(e.marketContext.demand_heat.trending_products,([t,s],a)=>(Q(),I("div",{key:t,class:"trending-item"},[S("div",ls,L(a+1),1),S("div",ns,[S("span",rs,L(t),1),S("span",cs,L(s)+" 个需求",1)]),S("div",os,[O(q,{percentage:s/Math.max(...e.marketContext.demand_heat.trending_products.map(([,e])=>e))*100,"show-text":!1,"stroke-width":8},null,8,["percentage"])])]))),128))])):(Q(),I("div",ds,x[27]||(x[27]=[S("p",null,"暂无热门产品类别数据",-1)])))])]),_:1})]),_:1})])]),_:1})])])}}}),[["__scopeId","data-v-d94b379a"]]),ps={class:"pricing-strategies"},ms={class:"overall-strategy-section"},_s={class:"card-header"},vs={class:"strategy-content"},gs={class:"strategy-description"},ys={class:"success-probability"},hs={class:"probability-text"},fs={class:"strategy-details"},ks={class:"card-header"},bs={class:"bundle-section"},ws={key:0,class:"empty-state"},xs={key:1,class:"bundle-list"},Cs={class:"bundle-header"},Vs={class:"bundle-products"},js={class:"bundle-value"},zs={class:"value-proposition"},Rs={class:"card-header"},qs={class:"discount-section"},Us={class:"discount-type"},Fs={class:"discount-details"},Is={class:"discount-rule"},Os={class:"rule-value"},Ps={class:"discount-rule"},Bs={class:"rule-value"},Ds={class:"discount-type"},Ns={class:"discount-details"},Ss={class:"discount-rule"},Ls={class:"rule-value"},Ts={class:"discount-rule"},Js={class:"rule-value"},Qs={class:"discount-conditions"},As={class:"timing-section"},Ms={class:"card-header"},Es={class:"timing-content"},Ks={class:"timing-card"},$s={class:"timing-icon optimal"},Hs={class:"timing-card"},Xs={class:"timing-icon window"},Zs={class:"timing-card"},Gs={class:"timing-icon seasonal"},Ws={class:"timing-card"},Ys={class:"timing-icon urgency"},ea={key:0,class:"urgency-indicators"},ta={class:"indicator-list"},sa={class:"implementation-section"},aa={class:"card-header"},ia={class:"implementation-content"},la={class:"implementation-steps"},na={class:"step-item"},ra={class:"step-content"},ca={class:"step-item"},oa={class:"step-content"},da={class:"key-success-factors"},ua={class:"success-factors"},pa=W(F({__name:"PricingStrategies",props:{strategies:{}},setup(e){const s=e=>{switch(e){case"value_based_pricing":return"primary";case"aggressive_pricing":return"danger";case"premium_pricing":return"success";case"market_penetration":return"warning";default:return"info"}},n=e=>{switch(e){case"value_based_pricing":return"价值定价";case"aggressive_pricing":return"积极定价";case"premium_pricing":return"溢价定价";case"market_penetration":return"市场渗透";default:return"标准定价"}},u=e=>{switch(e){case"excellent":return"success";case"good":return"primary";case"challenging":return"warning";default:return"info"}},p=e=>{switch(e){case"excellent":return"绝佳";case"good":return"良好";case"challenging":return"挑战";default:return"一般"}},f=e=>{switch(e){case"value_based_pricing":return["产品价值展示","客户需求匹配","服务质量","ROI论证"];case"aggressive_pricing":return["成本控制","运营效率","规模优势","快速响应"];case"premium_pricing":return["品牌建设","产品差异化","技术创新","客户体验"];case"market_penetration":return["市场份额","客户获取","渠道建设","竞争分析"];default:return["产品质量","客户服务","价格竞争力","市场定位"]}};return(e,k)=>{const b=l,w=i,x=a,C=t,V=o,j=c,z=r;return Q(),I("div",ps,[S("div",ms,[O(x,null,{header:P(()=>[S("div",_s,[k[0]||(k[0]=S("span",null,"推荐定价策略",-1)),O(b,{type:s(e.strategies.overall_strategy.strategy),size:"large"},{default:P(()=>[B(L(n(e.strategies.overall_strategy.strategy)),1)]),_:1},8,["type"])])]),default:P(()=>{return[S("div",vs,[S("div",gs,[S("p",null,L(e.strategies.overall_strategy.description),1)]),S("div",ys,[k[1]||(k[1]=S("h4",null,"成功概率评估",-1)),O(w,{percentage:100*e.strategies.overall_strategy.success_probability,color:(t=e.strategies.overall_strategy.success_probability,t>=.8?"#67c23a":t>=.6?"#e6a23c":"#f56c6c"),"stroke-width":20},{default:P(({percentage:e})=>[S("span",hs,L(e.toFixed(1))+"%",1)]),_:1},8,["percentage","color"])])])];var t}),_:1})]),S("div",fs,[O(z,{gutter:24},{default:P(()=>[O(j,{span:12},{default:P(()=>[O(x,null,{header:P(()=>[S("div",ks,[k[2]||(k[2]=S("span",null,"打包销售机会",-1)),O(b,{type:e.strategies.bundle_opportunities.length>0?"success":"info",size:"small"},{default:P(()=>[B(L(e.strategies.bundle_opportunities.length)+" 个机会 ",1)]),_:1},8,["type"])])]),default:P(()=>[S("div",bs,[0===e.strategies.bundle_opportunities.length?(Q(),I("div",ws,[O(C,{description:"暂无打包销售机会","image-size":80})])):(Q(),I("div",xs,[(Q(!0),I(D,null,N(e.strategies.bundle_opportunities,(e,t)=>(Q(),I("div",{key:t,class:"bundle-item"},[S("div",Cs,[S("h4",null,L(e.category)+" 解决方案",1),O(b,{type:"success",size:"small"},{default:P(()=>[B(L(e.estimated_discount)+" 折扣 ",1)]),_:2},1024)]),S("div",Vs,[k[3]||(k[3]=S("h5",null,"包含产品:",-1)),S("ul",null,[(Q(!0),I(D,null,N(e.products,e=>(Q(),I("li",{key:e},L(e),1))),128))])]),S("div",js,[S("p",zs,[O(V,null,{default:P(()=>[O(A(m))]),_:1}),B(" "+L(e.value_proposition),1)])])]))),128))]))])]),_:1})]),_:1}),O(j,{span:12},{default:P(()=>[O(x,null,{header:P(()=>[S("div",Rs,[k[5]||(k[5]=S("span",null,"折扣策略建议",-1)),O(b,{type:"warning",size:"small"},{default:P(()=>k[4]||(k[4]=[B("灵活定价",-1)])),_:1,__:[4]})])]),default:P(()=>[S("div",qs,[S("div",Us,[S("h4",null,[O(V,null,{default:P(()=>[O(A(d))]),_:1}),k[6]||(k[6]=B(" 批量折扣 ",-1))]),S("div",Fs,[S("div",Is,[k[7]||(k[7]=S("span",{class:"rule-label"},"数量阈值:",-1)),S("span",Os,L(e.strategies.discount_recommendations.volume_discount.threshold)+" 件",1)]),S("div",Ps,[k[8]||(k[8]=S("span",{class:"rule-label"},"折扣范围:",-1)),S("span",Bs,L(e.strategies.discount_recommendations.volume_discount.discount_range),1)])])]),S("div",Ds,[S("h4",null,[O(V,null,{default:P(()=>[O(A(_))]),_:1}),k[9]||(k[9]=B(" 早鸟折扣 ",-1))]),S("div",Ns,[S("div",Ss,[k[10]||(k[10]=S("span",{class:"rule-label"},"有效期:",-1)),S("span",Ls,L(e.strategies.discount_recommendations.early_bird_discount.duration),1)]),S("div",Ts,[k[11]||(k[11]=S("span",{class:"rule-label"},"折扣幅度:",-1)),S("span",Js,L(e.strategies.discount_recommendations.early_bird_discount.discount),1)])])]),S("div",Qs,[k[12]||(k[12]=S("h4",null,"重要条件",-1)),S("ul",null,[(Q(!0),I(D,null,N(e.strategies.discount_recommendations.conditions,e=>(Q(),I("li",{key:e},L(e),1))),128))])])])]),_:1})]),_:1})]),_:1})]),S("div",As,[O(x,null,{header:P(()=>[S("div",Ms,[k[13]||(k[13]=S("span",null,"时机策略分析",-1)),O(b,{type:u(e.strategies.timing_considerations.market_window),size:"small"},{default:P(()=>[B(L(p(e.strategies.timing_considerations.market_window))+"窗口期 ",1)]),_:1},8,["type"])])]),default:P(()=>[S("div",Es,[O(z,{gutter:24},{default:P(()=>[O(j,{span:6},{default:P(()=>[S("div",Ks,[S("div",$s,[O(V,null,{default:P(()=>[O(A(v))]),_:1})]),k[14]||(k[14]=S("h4",null,"最佳时机",-1)),S("p",null,L(e.strategies.timing_considerations.optimal_timing),1)])]),_:1}),O(j,{span:6},{default:P(()=>[S("div",Hs,[S("div",Xs,[O(V,null,{default:P(()=>[O(A(g))]),_:1})]),k[15]||(k[15]=S("h4",null,"市场窗口",-1)),S("p",null,L(p(e.strategies.timing_considerations.market_window))+"机会期",1)])]),_:1}),O(j,{span:6},{default:P(()=>[S("div",Zs,[S("div",Gs,[O(V,null,{default:P(()=>[O(A(y))]),_:1})]),k[16]||(k[16]=S("h4",null,"季节因素",-1)),S("p",null,L(e.strategies.timing_considerations.seasonal_factors),1)])]),_:1}),O(j,{span:6},{default:P(()=>[S("div",Ws,[S("div",Ys,[O(V,null,{default:P(()=>[O(A(h))]),_:1})]),k[17]||(k[17]=S("h4",null,"紧急信号",-1)),S("p",null,L(e.strategies.timing_considerations.urgency_indicators.length||0)+" 个信号",1)])]),_:1})]),_:1}),e.strategies.timing_considerations.urgency_indicators.length>0?(Q(),I("div",ea,[k[18]||(k[18]=S("h4",null,"紧急性指标",-1)),S("div",ta,[(Q(!0),I(D,null,N(e.strategies.timing_considerations.urgency_indicators,e=>(Q(),M(b,{key:e,type:"warning",class:"indicator-tag"},{default:P(()=>[B(L(e),1)]),_:2},1024))),128))])])):T("",!0)])]),_:1})]),S("div",sa,[O(x,null,{header:P(()=>[S("div",aa,[k[20]||(k[20]=S("span",null,"实施建议",-1)),O(b,{type:"primary",size:"small"},{default:P(()=>k[19]||(k[19]=[B("行动指南",-1)])),_:1,__:[19]})])]),default:P(()=>[S("div",ia,[S("div",la,[S("div",na,[k[24]||(k[24]=S("div",{class:"step-number"},"1",-1)),S("div",ra,[k[23]||(k[23]=S("h4",null,"策略选择",-1)),S("p",null,[k[21]||(k[21]=B("基于市场分析结果，采用 ",-1)),S("strong",null,L(n(e.strategies.overall_strategy.strategy)),1),k[22]||(k[22]=B(" 策略",-1))])])]),k[27]||(k[27]=S("div",{class:"step-item"},[S("div",{class:"step-number"},"2"),S("div",{class:"step-content"},[S("h4",null,"价格设定"),S("p",null,"根据产品推荐中的建议价格进行定价，考虑市场竞争和客户价格敏感度")])],-1)),k[28]||(k[28]=S("div",{class:"step-item"},[S("div",{class:"step-number"},"3"),S("div",{class:"step-content"},[S("h4",null,"折扣应用"),S("p",null,"合理运用批量折扣和早鸟折扣，避免过度价格竞争")])],-1)),S("div",ca,[k[26]||(k[26]=S("div",{class:"step-number"},"4",-1)),S("div",oa,[k[25]||(k[25]=S("h4",null,"时机把握",-1)),S("p",null,"在"+L(p(e.strategies.timing_considerations.market_window))+"市场窗口期内实施策略",1)])])]),S("div",da,[k[29]||(k[29]=S("h4",null,"成功关键因素",-1)),S("div",ua,[(Q(!0),I(D,null,N(f(e.strategies.overall_strategy.strategy),e=>(Q(),M(b,{key:e,type:"success",class:"factor-tag"},{default:P(()=>[B(L(e),1)]),_:2},1024))),128))])])])]),_:1})])])}}}),[["__scopeId","data-v-f01bd70f"]]),ma={class:"risk-opportunity-analysis"},_a={class:"overview-section"},va={class:"overview-content"},ga={class:"overview-icon"},ya={class:"overview-info"},ha={class:"overview-count"},fa={class:"overview-content"},ka={class:"overview-icon"},ba={class:"overview-info"},wa={class:"overview-count"},xa={class:"detailed-analysis"},Ca={class:"card-header"},Va={class:"opportunities-section"},ja={key:0,class:"empty-state"},za={key:1,class:"opportunities-list"},Ra={class:"opportunity-header"},qa={class:"opportunity-icon"},Ua={class:"opportunity-title"},Fa={class:"opportunity-content"},Ia={class:"opportunity-actions"},Oa={class:"card-header"},Pa={class:"risks-section"},Ba={key:0,class:"empty-state"},Da={key:1,class:"risks-list"},Na={class:"risk-header"},Sa={class:"risk-icon"},La={class:"risk-title"},Ta={class:"risk-tags"},Ja={class:"risk-content"},Qa={class:"risk-actions"},Aa={class:"mitigation-section"},Ma={class:"card-header"},Ea={class:"mitigation-content"},Ka={key:0,class:"empty-state"},$a={key:1,class:"strategies-grid"},Ha={class:"strategy-number"},Xa={class:"strategy-content"},Za={class:"strategy-priority"},Ga={class:"action-recommendations"},Wa={class:"card-header"},Ya={class:"recommendations-content"},ei={class:"recommendation-categories"},ti={class:"category-section"},si={class:"action-list"},ai={key:0},ii={key:1},li={class:"category-section"},ni={class:"category-section"},ri={class:"success-factors"},ci={class:"factors-tags"},oi=W(F({__name:"RiskOpportunityAnalysis",props:{analysis:{}},setup(i){const u=t=>e(this,null,function*(){try{(yield k.prompt('为 "'.concat(t.type,'" 机会制定行动计划:'),"行动计划",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入具体的行动计划..."})).value&&n.success("行动计划已记录")}catch(e){}}),v=t=>e(this,null,function*(){try{(yield k.prompt('为 "'.concat(t.type,'" 风险制定应对措施:'),"应对措施",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入具体的应对措施..."})).value&&n.success("应对措施已记录")}catch(e){}}),y=e=>{switch(e){case"high":return"danger";case"medium":return"warning";default:return"info"}},b=e=>{switch(e){case"high":return"高";case"medium":return"中等";case"low":return"低";default:return"未知"}},w=e=>{switch(e){case"high":return"danger";case"medium":return"warning";case"low":return"success";default:return"info"}},x=e=>{switch(e){case"high":return"高";case"medium":return"中等";case"low":return"低";default:return"未知"}},C=e=>0===e?"danger":1===e?"warning":"info",V=e=>0===e?"高优先级":1===e?"中优先级":"低优先级";return(e,i)=>{const n=o,k=a,j=c,z=r,R=l,q=t,U=s;return Q(),I("div",ma,[S("div",_a,[O(z,{gutter:24},{default:P(()=>[O(j,{span:12},{default:P(()=>[O(k,{class:"overview-card opportunities"},{default:P(()=>[S("div",va,[S("div",ga,[O(n,null,{default:P(()=>[O(A(p))]),_:1})]),S("div",ya,[i[0]||(i[0]=S("h3",null,"市场机会",-1)),S("p",ha,L(e.analysis.opportunities.length)+" 个",1),i[1]||(i[1]=S("p",{class:"overview-desc"},"发现的潜在机会",-1))])])]),_:1})]),_:1}),O(j,{span:12},{default:P(()=>[O(k,{class:"overview-card risks"},{default:P(()=>[S("div",fa,[S("div",ka,[O(n,null,{default:P(()=>[O(A(h))]),_:1})]),S("div",ba,[i[2]||(i[2]=S("h3",null,"潜在风险",-1)),S("p",wa,L(e.analysis.risks.length)+" 个",1),i[3]||(i[3]=S("p",{class:"overview-desc"},"需要关注的风险点",-1))])])]),_:1})]),_:1})]),_:1})]),S("div",xa,[O(z,{gutter:24},{default:P(()=>[O(j,{span:12},{default:P(()=>[O(k,null,{header:P(()=>[S("div",Ca,[i[4]||(i[4]=S("span",null,"机会分析",-1)),O(R,{type:e.analysis.opportunities.length>2?"success":e.analysis.opportunities.length>0?"warning":"info",size:"small"},{default:P(()=>{return[B(L((t=e.analysis.opportunities.length,t>2?"机会丰富":t>0?"有机会":"机会较少")),1)];var t}),_:1},8,["type"])])]),default:P(()=>[S("div",Va,[0===e.analysis.opportunities.length?(Q(),I("div",ja,[O(q,{description:"暂无明显机会","image-size":80},{default:P(()=>i[5]||(i[5]=[S("p",{class:"empty-tip"},"建议加强市场调研，寻找潜在机会",-1)])),_:1,__:[5]})])):(Q(),I("div",za,[(Q(!0),I(D,null,N(e.analysis.opportunities,(e,t)=>(Q(),I("div",{key:t,class:"opportunity-item"},[S("div",Ra,[S("div",qa,[O(n,null,{default:P(()=>[O(A(m))]),_:1})]),S("div",Ua,[S("h4",null,L(e.type),1),O(R,{type:y(e.impact),size:"small"},{default:P(()=>[B(L(b(e.impact))+"影响 ",1)]),_:2},1032,["type"])])]),S("div",Fa,[S("p",null,L(e.description),1)]),S("div",Ia,[O(U,{type:"primary",size:"small",onClick:t=>u(e)},{default:P(()=>i[6]||(i[6]=[B(" 制定行动计划 ",-1)])),_:2,__:[6]},1032,["onClick"])])]))),128))]))])]),_:1})]),_:1}),O(j,{span:12},{default:P(()=>[O(k,null,{header:P(()=>[S("div",Oa,[i[7]||(i[7]=S("span",null,"风险分析",-1)),O(R,{type:e.analysis.risks.length>2?"danger":e.analysis.risks.length>0?"warning":"success",size:"small"},{default:P(()=>{return[B(L((t=e.analysis.risks.length,t>2?"高风险":t>0?"中等风险":"低风险")),1)];var t}),_:1},8,["type"])])]),default:P(()=>[S("div",Pa,[0===e.analysis.risks.length?(Q(),I("div",Ba,[O(q,{description:"风险较低","image-size":80},{default:P(()=>i[8]||(i[8]=[S("p",{class:"empty-tip"},"当前市场环境相对安全",-1)])),_:1,__:[8]})])):(Q(),I("div",Da,[(Q(!0),I(D,null,N(e.analysis.risks,(e,t)=>{return Q(),I("div",{key:t,class:J(["risk-item",(s=e.probability,a=e.impact,"high"===s&&"high"===a?"risk-critical":"high"===s||"high"===a?"risk-high":"medium"===s||"medium"===a?"risk-medium":"risk-low")])},[S("div",Na,[S("div",Sa,[O(n,null,{default:P(()=>[O(A(f))]),_:1})]),S("div",La,[S("h4",null,L(e.type),1),S("div",Ta,[O(R,{type:w(e.probability),size:"small"},{default:P(()=>[B(L(x(e.probability))+"概率 ",1)]),_:2},1032,["type"]),O(R,{type:y(e.impact),size:"small"},{default:P(()=>[B(L(b(e.impact))+"影响 ",1)]),_:2},1032,["type"])])])]),S("div",Ja,[S("p",null,L(e.description),1)]),S("div",Qa,[O(U,{type:"danger",size:"small",onClick:t=>v(e)},{default:P(()=>i[9]||(i[9]=[B(" 制定应对措施 ",-1)])),_:2,__:[9]},1032,["onClick"])])],2);var s,a}),128))]))])]),_:1})]),_:1})]),_:1})]),S("div",Aa,[O(k,null,{header:P(()=>[S("div",Ma,[i[10]||(i[10]=S("span",null,"风险缓解策略",-1)),O(R,{type:"primary",size:"small"},{default:P(()=>[B(L(e.analysis.mitigation_strategies.length)+" 项策略 ",1)]),_:1})])]),default:P(()=>[S("div",Ea,[0===e.analysis.mitigation_strategies.length?(Q(),I("div",Ka,[O(q,{description:"暂无特定缓解策略","image-size":80})])):(Q(),I("div",$a,[(Q(!0),I(D,null,N(e.analysis.mitigation_strategies,(e,t)=>(Q(),I("div",{key:t,class:"strategy-card"},[S("div",Ha,L(t+1),1),S("div",Xa,[S("p",null,L(e),1)]),S("div",Za,[O(R,{type:C(t),size:"small"},{default:P(()=>[B(L(V(t)),1)]),_:2},1032,["type"])])]))),128))]))])]),_:1})]),S("div",Ga,[O(k,null,{header:P(()=>[S("div",Wa,[i[12]||(i[12]=S("span",null,"行动建议",-1)),O(R,{type:"success",size:"small"},{default:P(()=>i[11]||(i[11]=[B("立即执行",-1)])),_:1,__:[11]})])]),default:P(()=>{var t,s;return[S("div",Ya,[S("div",ei,[S("div",ti,[S("h4",null,[O(n,null,{default:P(()=>[O(A(_))]),_:1}),i[13]||(i[13]=B(" 短期行动 (1-3个月) ",-1))]),S("ul",si,[e.analysis.opportunities.length>0?(Q(),I("li",ai," 抓住 "+L((null==(t=e.analysis.opportunities[0])?void 0:t.type)||"主要")+" 机会，快速行动 ",1)):T("",!0),e.analysis.risks.length>0?(Q(),I("li",ii," 优先应对 "+L((null==(s=e.analysis.risks[0])?void 0:s.type)||"主要")+" 风险 ",1)):T("",!0),i[14]||(i[14]=S("li",null,"建立市场监控机制，跟踪竞争动态",-1))])]),S("div",li,[S("h4",null,[O(n,null,{default:P(()=>[O(A(g))]),_:1}),i[15]||(i[15]=B(" 中期规划 (3-12个月) ",-1))]),i[16]||(i[16]=S("ul",{class:"action-list"},[S("li",null,"建立完善的风险管理体系"),S("li",null,"开发差异化产品和服务"),S("li",null,"加强客户关系管理，提升客户忠诚度")],-1))]),S("div",ni,[S("h4",null,[O(n,null,{default:P(()=>[O(A(d))]),_:1}),i[17]||(i[17]=B(" 长期战略 (1年以上) ",-1))]),i[18]||(i[18]=S("ul",{class:"action-list"},[S("li",null,"建立行业领导地位"),S("li",null,"构建可持续竞争优势"),S("li",null,"探索新兴市场和技术机会")],-1))])]),S("div",ri,[i[19]||(i[19]=S("h4",null,"关键成功因素",-1)),S("div",ci,[(Q(!0),I(D,null,N(["市场洞察","快速响应","风险控制","创新能力","客户关系","团队执行力"],e=>(Q(),M(R,{key:e,type:"success",class:"factor-tag"},{default:P(()=>[B(L(e),1)]),_:2},1024))),128))])])])]}),_:1})])])}}}),[["__scopeId","data-v-53f34471"]]),di={key:0,class:"create-quote-form"},ui={class:"product-section"},pi={class:"product-details"},mi={class:"product-basic"},_i={class:"product-code"},vi={class:"product-category"},gi={class:"product-pricing"},yi={class:"price-item"},hi={class:"price-value"},fi={class:"price-item"},ki={class:"price-value recommended"},bi={class:"price-item"},wi={class:"quote-form-section"},xi={class:"price-tip"},Ci={class:"config-recommendations"},Vi={class:"config-list"},ji={class:"total-price-display"},zi={class:"price-calculation"},Ri={class:"calc-line"},qi={key:0,class:"calc-line discount"},Ui={class:"calc-line total"},Fi={class:"dialog-footer"},Ii=W(F({__name:"CreateQuoteDialog",props:{visible:{type:Boolean},productRecommendation:{}},emits:["update:visible","quote-created"],setup(t,{emit:i}){const l=t,r=i,c=E(),o=E(!1),d=K({get:()=>l.visible,set:e=>r("update:visible",e)}),u=$({product_id:0,customer_name:"",customer_email:"",customer_company:"",recommended_price:0,quantity:1,discount_percentage:0,notes:"",terms_conditions:""}),p={customer_name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],customer_email:[{required:!0,message:"请输入客户邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],quantity:[{required:!0,message:"请输入数量",trigger:"blur"},{type:"number",min:1,message:"数量必须大于0",trigger:"blur"}],unit_price:[{required:!0,message:"请输入单价",trigger:"blur"},{type:"number",min:0,message:"单价不能为负数",trigger:"blur"}]},m=K(()=>u.quantity*u.unit_price),_=K(()=>m.value*(u.discount_percentage/100)),v=K(()=>m.value-_.value);H(()=>l.productRecommendation,e=>{e&&(u.product_id=e.product.id,u.recommended_price=e.recommended_price.recommended_price,u.unit_price=e.recommended_price.recommended_price,u.customer_name="",u.customer_email="",u.customer_company="",u.quantity=1,u.discount_percentage=0,u.notes="",u.terms_conditions="")},{immediate:!0});const g=()=>{},y=()=>e(this,null,function*(){if(c.value)try{if(!(yield c.value.validate()))return;o.value=!0;const e=yield G.createQuoteFromRecommendation(u);e.success?(n.success("报价创建成功"),r("quote-created",e.data.quote),h()):n.error(e.error||"创建报价失败")}catch(e){n.error("创建报价失败")}finally{o.value=!1}}),h=()=>{d.value=!1,c.value&&c.value.clearValidate()},f=e=>new Intl.NumberFormat("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return(e,t)=>{const i=a,l=w,n=C,r=x,k=V,R=j,q=z,U=s,F=b;return Q(),M(F,{modelValue:d.value,"onUpdate:modelValue":t[8]||(t[8]=e=>d.value=e),title:"基于推荐创建报价",width:"800px","close-on-click-modal":!1,onClose:h},{footer:P(()=>[S("div",Fi,[O(U,{onClick:h},{default:P(()=>t[17]||(t[17]=[B("取消",-1)])),_:1,__:[17]}),O(U,{type:"primary",onClick:y,loading:o.value},{default:P(()=>t[18]||(t[18]=[B(" 创建报价 ",-1)])),_:1,__:[18]},8,["loading"])])]),default:P(()=>[e.productRecommendation?(Q(),I("div",di,[S("div",ui,[O(i,{class:"product-info-card"},{header:P(()=>t[9]||(t[9]=[S("span",null,"推荐产品信息",-1)])),default:P(()=>[S("div",pi,[S("div",mi,[S("h3",null,L(e.productRecommendation.product.name),1),S("p",_i,"型号: "+L(e.productRecommendation.product.code),1),S("p",vi,"类别: "+L(e.productRecommendation.product.category),1)]),S("div",gi,[S("div",yi,[t[10]||(t[10]=S("span",{class:"price-label"},"基础价格:",-1)),S("span",hi,"¥"+L(f(e.productRecommendation.recommended_price.base_price)),1)]),S("div",fi,[t[11]||(t[11]=S("span",{class:"price-label"},"推荐价格:",-1)),S("span",ki,"¥"+L(f(e.productRecommendation.recommended_price.recommended_price)),1)]),S("div",bi,[t[12]||(t[12]=S("span",{class:"price-label"},"调整幅度:",-1)),S("span",{class:J(["price-change",e.productRecommendation.recommended_price.price_change_percentage>=0?"positive":"negative"])},L(e.productRecommendation.recommended_price.price_change_percentage>0?"+":"")+L(e.productRecommendation.recommended_price.price_change_percentage)+"% ",3)])])])]),_:1})]),S("div",wi,[O(q,{ref_key:"quoteFormRef",ref:c,model:u,rules:p,"label-width":"120px"},{default:P(()=>[O(l,{"content-position":"left"},{default:P(()=>t[13]||(t[13]=[B("客户信息",-1)])),_:1,__:[13]}),O(r,{label:"客户姓名",prop:"customer_name"},{default:P(()=>[O(n,{modelValue:u.customer_name,"onUpdate:modelValue":t[0]||(t[0]=e=>u.customer_name=e),placeholder:"请输入客户姓名"},null,8,["modelValue"])]),_:1}),O(r,{label:"客户邮箱",prop:"customer_email"},{default:P(()=>[O(n,{modelValue:u.customer_email,"onUpdate:modelValue":t[1]||(t[1]=e=>u.customer_email=e),placeholder:"请输入客户邮箱"},null,8,["modelValue"])]),_:1}),O(r,{label:"客户公司",prop:"customer_company"},{default:P(()=>[O(n,{modelValue:u.customer_company,"onUpdate:modelValue":t[2]||(t[2]=e=>u.customer_company=e),placeholder:"请输入客户公司（可选）"},null,8,["modelValue"])]),_:1}),O(l,{"content-position":"left"},{default:P(()=>t[14]||(t[14]=[B("产品配置",-1)])),_:1,__:[14]}),O(r,{label:"数量",prop:"quantity"},{default:P(()=>[O(k,{modelValue:u.quantity,"onUpdate:modelValue":t[3]||(t[3]=e=>u.quantity=e),min:1,max:9999,onChange:g},null,8,["modelValue"])]),_:1}),O(r,{label:"单价",prop:"unit_price"},{default:P(()=>[O(k,{modelValue:u.unit_price,"onUpdate:modelValue":t[4]||(t[4]=e=>u.unit_price=e),precision:2,min:0,onChange:g},null,8,["modelValue"]),S("span",xi,"建议价格: ¥"+L(f(e.productRecommendation.recommended_price.recommended_price)),1)]),_:1}),O(r,{label:"折扣",prop:"discount_percentage"},{default:P(()=>[O(k,{modelValue:u.discount_percentage,"onUpdate:modelValue":t[5]||(t[5]=e=>u.discount_percentage=e),precision:2,min:0,max:50,onChange:g},null,8,["modelValue"]),t[15]||(t[15]=S("span",{class:"discount-tip"},"%",-1))]),_:1,__:[15]}),Object.keys(e.productRecommendation.config_recommendations).length>0?(Q(),M(r,{key:0,label:"配置建议"},{default:P(()=>[S("div",Ci,[O(R,{title:"AI推荐配置",type:"info",closable:!1,"show-icon":""},{default:P(()=>[S("ul",Vi,[(Q(!0),I(D,null,N(e.productRecommendation.config_recommendations,(e,t)=>(Q(),I("li",{key:t},[S("strong",null,L(t)+":",1),B(" "+L(e),1)]))),128))])]),_:1})])]),_:1})):T("",!0),O(r,{label:"总价"},{default:P(()=>[S("div",ji,[S("div",zi,[S("div",Ri,[S("span",null,"小计: ¥"+L(f(m.value)),1)]),u.discount_percentage>0?(Q(),I("div",qi,[S("span",null,"折扣 ("+L(u.discount_percentage)+"%): -¥"+L(f(_.value)),1)])):T("",!0),S("div",Ui,[S("span",null,"总计: ¥"+L(f(v.value)),1)])])])]),_:1}),O(l,{"content-position":"left"},{default:P(()=>t[16]||(t[16]=[B("备注信息",-1)])),_:1,__:[16]}),O(r,{label:"报价备注"},{default:P(()=>[O(n,{modelValue:u.notes,"onUpdate:modelValue":t[6]||(t[6]=e=>u.notes=e),type:"textarea",rows:3,placeholder:"请输入报价相关备注信息"},null,8,["modelValue"])]),_:1}),O(r,{label:"条款条件"},{default:P(()=>[O(n,{modelValue:u.terms_conditions,"onUpdate:modelValue":t[7]||(t[7]=e=>u.terms_conditions=e),type:"textarea",rows:3,placeholder:"请输入条款和条件"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])):T("",!0)]),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-84b4afdc"]]),Oi={class:"pricing-decision-page"},Pi={class:"page-header"},Bi={class:"job-selection-section"},Di={class:"card-header"},Ni={key:0,class:"text-center"},Si={key:1,class:"empty-state"},Li={key:2,class:"jobs-grid"},Ti={class:"job-card-content"},Ji={class:"job-header"},Qi={class:"job-stats"},Ai={class:"stat-item"},Mi={class:"value"},Ei={class:"stat-item"},Ki={class:"value"},$i={class:"stat-item"},Hi={class:"value"},Xi={class:"job-actions"},Zi={key:0,class:"recommendations-section"},Gi={class:"card-header"},Wi={class:"summary-content"},Yi={class:"summary-text"},el={class:"key-metrics"},tl={class:"metric"},sl={class:"metric"},al={class:"metric"},il={class:"metric-value"},ll={class:"action-buttons"},nl=F({__name:"PricingDecision",setup(i){const u=E(!1),p=E(!1),m=E(!1),_=E([]),v=E(""),g=E(null),y=E("products"),h=E(!1),f=E(null);X(()=>{b()});const b=()=>e(this,null,function*(){u.value=!0;try{const e=yield G.getCompletedJobs();_.value=e.jobs}catch(e){n.error("加载任务列表失败")}finally{u.value=!1}}),w=()=>{b()},x=t=>e(this,null,function*(){p.value=!0,v.value=t;try{const e=yield G.generateRecommendations(t);g.value=e;const s=_.value.find(e=>e.job_id===t);s&&(s.has_pricing_recommendations=!0),n.success("报价建议生成成功")}catch(e){n.error("生成报价建议失败")}finally{p.value=!1}}),C=e=>{f.value=e,h.value=!0},V=e=>{n.success("报价创建成功"),h.value=!1},j=()=>e(this,null,function*(){if(v.value){m.value=!0;try{const e=yield G.exportRecommendations(v.value),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="pricing-recommendations-".concat(v.value,".json"),a.click(),window.URL.revokeObjectURL(s),n.success("报告导出成功")}catch(e){n.error("导出报告失败")}finally{m.value=!1}}}),z=()=>{k.alert("分享功能正在开发中","提示",{confirmButtonText:"确定"})},F=e=>{switch(e){case"growing":return"success";case"stable":default:return"info";case"declining":return"warning"}},K=e=>{switch(e){case"growing":return"增长";case"stable":return"稳定";case"declining":return"下降";default:return"未知"}},$=e=>{switch(e){case"low":return"success";case"medium":return"warning";case"high":return"danger";default:return"info"}},H=e=>{switch(e){case"low":return"低";case"medium":return"中等";case"high":return"高";default:return"未知"}};return(e,i)=>{const n=o,k=c,b=s,E=r,X=l,G=R,W=t,Y=a,ee=U,te=q;return Q(),I("div",Oi,[S("div",Pi,[O(E,{gutter:20,align:"middle"},{default:P(()=>[O(k,{span:16},{default:P(()=>[S("h1",null,[O(n,null,{default:P(()=>[O(A(d))]),_:1}),i[3]||(i[3]=B(" 智能报价决策支持 ",-1))]),i[4]||(i[4]=S("p",{class:"page-description"}," 基于批量分析结果，为您提供数据驱动的报价建议和市场洞察 ",-1))]),_:1,__:[4]}),O(k,{span:8,class:"text-right"},{default:P(()=>[O(b,{type:"primary",onClick:w,loading:u.value,icon:"Refresh"},{default:P(()=>i[5]||(i[5]=[B(" 刷新任务列表 ",-1)])),_:1,__:[5]},8,["loading"])]),_:1})]),_:1})]),S("div",Bi,[O(Y,null,{header:P(()=>[S("div",Di,[i[6]||(i[6]=S("span",null,"选择批量分析任务",-1)),O(X,{type:"info"},{default:P(()=>[B(L(_.value.length)+" 个已完成任务",1)]),_:1})])]),default:P(()=>[u.value?(Q(),I("div",Ni,[O(G,{rows:3,animated:""})])):0===_.value.length?(Q(),I("div",Si,[O(W,{description:"暂无已完成的批量分析任务"},{default:P(()=>[O(b,{type:"primary",onClick:i[0]||(i[0]=t=>e.$router.push("/batch-analysis"))},{default:P(()=>i[7]||(i[7]=[B(" 去创建批量分析任务 ",-1)])),_:1,__:[7]})]),_:1})])):(Q(),I("div",Li,[(Q(!0),I(D,null,N(_.value,e=>(Q(),M(Y,{key:e.job_id,class:J(["job-card",{selected:v.value===e.job_id}]),onClick:t=>(e=>{v.value=e.job_id,e.has_pricing_recommendations&&x(e.job_id)})(e),shadow:"hover"},{default:P(()=>{return[S("div",Ti,[S("div",Ji,[S("h3",null,L(e.job_name||"任务 ".concat(e.job_id)),1),O(X,{type:e.has_pricing_recommendations?"success":"info",size:"small"},{default:P(()=>[B(L(e.has_pricing_recommendations?"已生成建议":"待生成"),1)]),_:2},1032,["type"])]),S("div",Qi,[S("div",Ai,[i[8]||(i[8]=S("span",{class:"label"},"文件数量:",-1)),S("span",Mi,L(e.total_files),1)]),S("div",Ei,[i[9]||(i[9]=S("span",{class:"label"},"成功率:",-1)),S("span",Ki,L(e.progress_percentage)+"%",1)]),S("div",$i,[i[10]||(i[10]=S("span",{class:"label"},"完成时间:",-1)),S("span",Hi,L((t=e.end_time,t?new Date(t).toLocaleString("zh-CN"):"-")),1)])]),S("div",Xi,[O(b,{type:"primary",size:"small",onClick:Z(t=>x(e.job_id),["stop"]),loading:p.value&&v.value===e.job_id},{default:P(()=>[B(L(e.has_pricing_recommendations?"查看建议":"生成建议"),1)]),_:2},1032,["onClick","loading"])])])];var t}),_:2},1032,["class","onClick"]))),128))]))]),_:1})]),g.value?(Q(),I("div",Zi,[O(Y,{class:"summary-card"},{header:P(()=>{return[S("div",Gi,[i[11]||(i[11]=S("span",null,"执行摘要",-1)),O(X,{type:(e=g.value.confidence_score,e>=.8?"success":e>=.6?"warning":"danger")},{default:P(()=>[B(" 置信度: "+L((100*g.value.confidence_score).toFixed(1))+"% ",1)]),_:1},8,["type"])])];var e}),default:P(()=>[S("div",Wi,[S("p",Yi,L(g.value.summary),1),S("div",el,[S("div",tl,[i[12]||(i[12]=S("span",{class:"metric-label"},"市场趋势:",-1)),O(X,{type:F(g.value.market_context.market_trend)},{default:P(()=>[B(L(K(g.value.market_context.market_trend)),1)]),_:1},8,["type"])]),S("div",sl,[i[13]||(i[13]=S("span",{class:"metric-label"},"竞争强度:",-1)),O(X,{type:$(g.value.market_context.competition_intensity.level)},{default:P(()=>[B(L(H(g.value.market_context.competition_intensity.level)),1)]),_:1},8,["type"])]),S("div",al,[i[14]||(i[14]=S("span",{class:"metric-label"},"推荐产品:",-1)),S("span",il,L(g.value.product_recommendations.length)+" 个",1)])])])]),_:1}),O(Y,{class:"details-card"},{default:P(()=>[O(te,{modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=e=>y.value=e),type:"border-card"},{default:P(()=>[O(ee,{label:"产品推荐",name:"products"},{default:P(()=>[O(De,{recommendations:g.value.product_recommendations,onCreateQuote:C},null,8,["recommendations"])]),_:1}),O(ee,{label:"市场分析",name:"market"},{default:P(()=>[O(us,{"market-context":g.value.market_context},null,8,["market-context"])]),_:1}),O(ee,{label:"定价策略",name:"pricing"},{default:P(()=>[O(pa,{strategies:g.value.pricing_strategies},null,8,["strategies"])]),_:1}),O(ee,{label:"风险与机会",name:"risks"},{default:P(()=>[O(oi,{analysis:g.value.risk_opportunity_analysis},null,8,["analysis"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),S("div",ll,[O(b,{type:"primary",onClick:j,loading:m.value,icon:"Download"},{default:P(()=>i[15]||(i[15]=[B(" 导出报告 ",-1)])),_:1,__:[15]},8,["loading"]),O(b,{onClick:z,icon:"Share"},{default:P(()=>i[16]||(i[16]=[B(" 分享建议 ",-1)])),_:1,__:[16]})])])):T("",!0),O(Ii,{visible:h.value,"onUpdate:visible":i[2]||(i[2]=e=>h.value=e),"product-recommendation":f.value,onQuoteCreated:V},null,8,["visible","product-recommendation"])])}}});export{nl as _};
