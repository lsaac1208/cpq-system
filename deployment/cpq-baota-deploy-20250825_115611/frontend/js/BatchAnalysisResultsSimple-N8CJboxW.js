var ds=Object.defineProperty;var u=(x,w)=>ds(x,"name",{value:w,configurable:!0});var $=(x,w,f)=>new Promise((b,g)=>{var p=m=>{try{h(f.next(m))}catch(k){g(k)}},v=m=>{try{h(f.throw(m))}catch(k){g(k)}},h=m=>m.done?b(m.value):Promise.resolve(m.value).then(p,v);h((f=f.apply(x,w)).next())});import{s as ys,_ as ps}from"./index-CoBZUWE1.js";/* empty css                 *//* empty css                *//* empty css               *//* empty css                 */import{x as ms,r as j,c as gs,aB as vs,j as hs,y as l,A as t,Q as d,I as _,H as B,K as c,M as a,O as r,P as fs,a6 as bs,u as ks,aC as ws,z as o}from"./vendor-vue-XfLkFKXI.js";import{d as xs,e as js,as as Cs,O as qs,N as Bs,M as Es,j as Ss,B as Rs,b as Ts,ak as Is}from"./vendor-ui-CE-ZhXxH.js";import{f as Ns,i as As}from"./batch-analysis-BMPHoP0O.js";import"./vendor-pdf-BeW0Xq92.js";import"./vendor-utils-B8vW8fJV.js";const Ms={class:"batch-analysis-results-page"},Ds={class:"page-header"},Js={class:"header-content"},Ps={class:"header-right"},Ls={key:0,class:"loading-container"},Os={key:1,class:"error-container"},Vs={key:2,class:"results-container"},$s={class:"card-header"},Fs={class:"summary-item"},zs={class:"summary-value"},Qs={class:"summary-item"},Hs={class:"summary-value"},Ks={class:"summary-item"},Gs={class:"summary-value"},Us={class:"card-header"},Ws={class:"results-list"},Xs={class:"file-info"},Ys={class:"file-name"},Zs={key:0,class:"analysis-content"},st={key:0,class:"insights-section"},tt={class:"insights-content"},nt={key:0},et={class:"business-analysis"},it={key:1},ot={key:1,class:"insights-section"},lt={class:"insights-content"},rt={key:0},at={class:"business-analysis"},ut={key:1},_t={key:2,class:"insights-section"},ct={class:"insights-content"},dt={key:0},yt={class:"business-analysis"},pt={key:1},mt={key:3,class:"insights-section"},gt={class:"insights-content"},vt={key:0},ht={class:"business-analysis"},ft={key:4,class:"insights-section"},bt={class:"insights-content"},kt={key:0},wt={class:"business-analysis"},xt={key:5,class:"insights-section"},jt={class:"insights-content"},Ct={key:0},qt={class:"business-analysis"},Bt={key:6,class:"insights-section"},Et={class:"insights-content"},St={key:0},Rt={class:"business-analysis"},Tt={key:7,class:"insights-section"},It={class:"insights-content"},Nt={key:8,class:"raw-data"},At=ms({__name:"BatchAnalysisResultsSimple",setup(x){const w=vs(),f=ws(),b=j(!0),g=j(""),p=j(null),v=j([]),h=gs(()=>w.params.jobId),m=u(()=>$(this,null,function*(){var n;if(!h.value){g.value="缺少任务ID参数",b.value=!1;return}try{b.value=!0,g.value="";const s=yield Ns(h.value);if(s&&s.success)p.value=s.status||s;else throw new Error((s==null?void 0:s.error)||"加载任务信息失败");const i=yield As(h.value);if(i&&i.success)v.value=((n=i.results)==null?void 0:n.results)||i.results||[];else throw new Error((i==null?void 0:i.error)||"加载分析结果失败")}catch(s){g.value=s.message||"加载失败",ys.error(g.value)}finally{b.value=!1}}),"loadResults"),k=u(()=>{m()},"refreshResults"),F=u(()=>{f.go(-1)},"goBack"),z=u(n=>{switch(n){case"completed":return"success";case"failed":return"danger";case"processing":return"warning";case"cancelled":return"info";default:return"info"}},"getStatusType"),Q=u(n=>{switch(n){case"completed":return"已完成";case"failed":return"失败";case"processing":return"处理中";case"pending":return"等待中";case"cancelled":return"已取消";default:return n}},"getStatusText"),H=u(n=>{switch(n){case"customer_requirements":return"客户需求分析";case"competitor_analysis":return"竞品资料分析";case"project_mining":return"历史项目挖掘";case"product_extraction":return"产品信息提取";case"document_classification":return"文档分类";case"quality_assessment":return"质量评估";case"comprehensive":return"综合分析";default:return n}},"getAnalysisTypeText"),K=u(n=>{if(!n)return"未知";try{return new Date(n).toLocaleString("zh-CN")}catch(s){return n}},"formatDateTime"),y=u(n=>{try{const s=n.match(/```json\s*([\s\S]*?)\s*```/);return JSON.parse(s?s[1]:n)}catch(s){return null}},"extractJsonFromRawAnalysis"),G=u(n=>{var i;const s=y(n);return(i=s==null?void 0:s.技术需求)!=null&&i.性能规格要求?s.技术需求.性能规格要求.slice(0,3).join(", ")+(s.技术需求.性能规格要求.length>3?"...":""):"未提取到技术需求信息"},"extractTechnicalRequirements"),U=u(n=>{var i;const s=y(n);return((i=s==null?void 0:s.商务需求)==null?void 0:i.预算范围)||(s==null?void 0:s.预算范围)||"未指定"},"extractBudgetRange"),W=u(n=>{var i;const s=y(n);return((i=s==null?void 0:s.商务需求)==null?void 0:i.项目时间线)||(s==null?void 0:s.项目时间线)||(s==null?void 0:s.时间要求)||"未指定"},"extractTimeline"),X=u(n=>{var i;const s=y(n);return((i=s==null?void 0:s.产品信息)==null?void 0:i.产品名称)||(s==null?void 0:s.competitor_product)||"未识别产品"},"extractCompetitorProduct"),Y=u(n=>{var i;const s=y(n);return((i=s==null?void 0:s.价格信息)==null?void 0:i.价格范围)||(s==null?void 0:s.price_info)||"未获取价格信息"},"extractCompetitorPrice"),Z=u(n=>{var i;const s=y(n);return((i=s==null?void 0:s.项目信息)==null?void 0:i.项目类型)||(s==null?void 0:s.project_type)||"未分类项目"},"extractProjectInfo"),ss=u(n=>{const s=y(n);return s!=null&&s.成功经验&&Array.isArray(s.成功经验)?s.成功经验.slice(0,2).join("; "):(s==null?void 0:s.success_patterns)||"未发现明显成功模式"},"extractSuccessPatterns"),ts=u(n=>{var i;const s=y(n);return(i=s==null?void 0:s.产品信息)!=null&&i.产品名称?"".concat(s.产品信息.产品名称," - ").concat(s.产品信息.产品描述||"无描述"):(s==null?void 0:s.product_name)||"未提取到产品信息"},"extractProductDetails"),ns=u(n=>{const s=y(n);return(s==null?void 0:s.文档类型)||(s==null?void 0:s.document_category)||"未分类"},"extractDocumentCategory"),es=u(n=>{const s=y(n),i=(s==null?void 0:s.质量评分)||(s==null?void 0:s.quality_score);return i?"".concat(i,"/100"):"未评分"},"extractQualityScore"),is=u(n=>{var i;const s=y(n);return(i=s==null?void 0:s.综合评估)!=null&&i.关键发现?s.综合评估.关键发现.slice(0,2).join("; "):(s==null?void 0:s.key_insights)||"综合分析结果"},"extractComprehensiveInsights"),os=u(n=>({very_high:"非常高",high:"高",medium:"中等",low:"低",very_low:"很低"})[n]||n,"getConfidenceLevelText");return hs(()=>{m()}),(n,s)=>{const i=xs,ls=js,rs=Cs,E=Ss,C=Bs,as=Es,q=qs,us=Ts,_s=Is;return o(),l("div",Ms,[t("div",Ds,[t("div",Js,[s[2]||(s[2]=t("div",{class:"header-left"},[t("h1",null,"分析结果查看"),t("p",{class:"page-description"},"查看和分析批量文档处理的详细结果")],-1)),t("div",Ps,[d(i,{onClick:F,icon:"ArrowLeft"},{default:_(()=>s[0]||(s[0]=[a("返回",-1)])),_:1,__:[0]}),d(i,{type:"primary",onClick:k,icon:"Refresh"},{default:_(()=>s[1]||(s[1]=[a("刷新",-1)])),_:1,__:[1]})])])]),b.value?(o(),l("div",Ls,[d(ls,{text:"正在加载分析结果..."})])):g.value?(o(),l("div",Os,[d(rs,{title:"加载失败",description:g.value,type:"error","show-icon":"",closable:!1},null,8,["description"]),d(i,{onClick:k,style:{"margin-top":"15px"}},{default:_(()=>s[3]||(s[3]=[a("重试",-1)])),_:1,__:[3]})])):(o(),l("div",Vs,[p.value?(o(),B(q,{key:0,class:"job-summary-card"},{header:_(()=>[t("div",$s,[s[4]||(s[4]=t("span",{class:"header-title"},"任务信息",-1)),d(E,{type:z(p.value.status)},{default:_(()=>[a(r(Q(p.value.status)),1)]),_:1},8,["type"])])]),default:_(()=>[d(as,{gutter:20},{default:_(()=>[d(C,{span:8},{default:_(()=>[t("div",Fs,[s[5]||(s[5]=t("span",{class:"summary-label"},"任务名称:",-1)),t("span",zs,r(p.value.job_name||"批量分析任务 #".concat(p.value.job_id)),1)])]),_:1}),d(C,{span:8},{default:_(()=>[t("div",Qs,[s[6]||(s[6]=t("span",{class:"summary-label"},"分析类型:",-1)),t("span",Hs,r(H(p.value.analysis_type)),1)])]),_:1}),d(C,{span:8},{default:_(()=>[t("div",Ks,[s[7]||(s[7]=t("span",{class:"summary-label"},"创建时间:",-1)),t("span",Gs,r(K(p.value.created_at)),1)])]),_:1})]),_:1})]),_:1})):c("",!0),v.value&&v.value.length>0?(o(),B(q,{key:1,class:"business-results"},{header:_(()=>[t("div",Us,[s[8]||(s[8]=t("span",{class:"header-title"},"业务分析结果",-1)),d(E,{type:"success"},{default:_(()=>[a(r(v.value.length)+" 个文档",1)]),_:1})])]),default:_(()=>[t("div",Ws,[(o(!0),l(fs,null,bs(v.value,(e,cs)=>{var S,R,T,I,N,A,M,D,J,P,L,O,V;return o(),l("div",{key:cs,class:"result-item"},[t("div",Xs,[d(us,null,{default:_(()=>[d(ks(Rs))]),_:1}),t("span",Ys,r(e.filename||e.file_name||e.original_filename||"未知文件"),1)]),e.analysis_result?(o(),l("div",Zs,[(S=e.analysis_result.business_insights)!=null&&S.customer_requirements?(o(),l("div",st,[s[14]||(s[14]=t("h4",null,"客户需求分析",-1)),t("div",tt,[e.analysis_result.business_insights.customer_requirements.raw_analysis?(o(),l("div",nt,[t("div",et,[t("p",null,[s[9]||(s[9]=t("strong",null,"技术需求:",-1)),a(" "+r(G(e.analysis_result.business_insights.customer_requirements.raw_analysis)),1)]),t("p",null,[s[10]||(s[10]=t("strong",null,"预算范围:",-1)),a(" "+r(U(e.analysis_result.business_insights.customer_requirements.raw_analysis)),1)]),t("p",null,[s[11]||(s[11]=t("strong",null,"时间要求:",-1)),a(" "+r(W(e.analysis_result.business_insights.customer_requirements.raw_analysis)),1)]),t("p",null,[s[12]||(s[12]=t("strong",null,"风险等级:",-1)),a(" "+r(((R=e.analysis_result.business_insights.customer_requirements.risk_assessment)==null?void 0:R.overall_risk_level)||"未评估"),1)])])])):(o(),l("div",it,[t("p",null,[s[13]||(s[13]=t("strong",null,"风险等级:",-1)),a(" "+r(((T=e.analysis_result.business_insights.customer_requirements.risk_assessment)==null?void 0:T.overall_risk_level)||"未评估"),1)])]))])])):c("",!0),(I=e.analysis_result.business_insights)!=null&&I.competitor_analysis?(o(),l("div",ot,[s[19]||(s[19]=t("h4",null,"竞品分析",-1)),t("div",lt,[e.analysis_result.business_insights.competitor_analysis.raw_analysis?(o(),l("div",rt,[t("div",at,[t("p",null,[s[15]||(s[15]=t("strong",null,"产品信息:",-1)),a(" "+r(X(e.analysis_result.business_insights.competitor_analysis.raw_analysis)),1)]),t("p",null,[s[16]||(s[16]=t("strong",null,"价格信息:",-1)),a(" "+r(Y(e.analysis_result.business_insights.competitor_analysis.raw_analysis)),1)])])])):(o(),l("div",ut,[t("p",null,[s[17]||(s[17]=t("strong",null,"产品名称:",-1)),a(" "+r(((N=e.analysis_result.business_insights.competitor_analysis.competitor_info)==null?void 0:N.product_name)||"未识别"),1)]),t("p",null,[s[18]||(s[18]=t("strong",null,"市场地位:",-1)),a(" "+r(((A=e.analysis_result.business_insights.competitor_analysis.competitor_info)==null?void 0:A.market_position)||"未知"),1)])]))])])):c("",!0),(M=e.analysis_result.business_insights)!=null&&M.project_insights?(o(),l("div",_t,[s[24]||(s[24]=t("h4",null,"历史项目洞察",-1)),t("div",ct,[e.analysis_result.business_insights.project_insights.raw_analysis?(o(),l("div",dt,[t("div",yt,[t("p",null,[s[20]||(s[20]=t("strong",null,"项目信息:",-1)),a(" "+r(Z(e.analysis_result.business_insights.project_insights.raw_analysis)),1)]),t("p",null,[s[21]||(s[21]=t("strong",null,"成功经验:",-1)),a(" "+r(ss(e.analysis_result.business_insights.project_insights.raw_analysis)),1)])])])):(o(),l("div",pt,[t("p",null,[s[22]||(s[22]=t("strong",null,"项目类型:",-1)),a(" "+r(((D=e.analysis_result.business_insights.project_insights.project_overview)==null?void 0:D.project_type)||"未分类"),1)]),t("p",null,[s[23]||(s[23]=t("strong",null,"成功状态:",-1)),a(" "+r(((J=e.analysis_result.business_insights.project_insights.project_overview)==null?void 0:J.success_status)||"未评估"),1)])]))])])):c("",!0),(P=e.analysis_result.business_insights)!=null&&P.product_extraction?(o(),l("div",mt,[s[26]||(s[26]=t("h4",null,"产品信息提取",-1)),t("div",gt,[e.analysis_result.business_insights.product_extraction.raw_analysis?(o(),l("div",vt,[t("div",ht,[t("p",null,[s[25]||(s[25]=t("strong",null,"产品详情:",-1)),a(" "+r(ts(e.analysis_result.business_insights.product_extraction.raw_analysis)),1)])])])):c("",!0)])])):c("",!0),(L=e.analysis_result.business_insights)!=null&&L.document_classification?(o(),l("div",ft,[s[28]||(s[28]=t("h4",null,"文档分类",-1)),t("div",bt,[e.analysis_result.business_insights.document_classification.raw_analysis?(o(),l("div",kt,[t("div",wt,[t("p",null,[s[27]||(s[27]=t("strong",null,"分类结果:",-1)),a(" "+r(ns(e.analysis_result.business_insights.document_classification.raw_analysis)),1)])])])):c("",!0)])])):c("",!0),(O=e.analysis_result.business_insights)!=null&&O.quality_assessment?(o(),l("div",xt,[s[30]||(s[30]=t("h4",null,"质量评估",-1)),t("div",jt,[e.analysis_result.business_insights.quality_assessment.raw_analysis?(o(),l("div",Ct,[t("div",qt,[t("p",null,[s[29]||(s[29]=t("strong",null,"质量评分:",-1)),a(" "+r(es(e.analysis_result.business_insights.quality_assessment.raw_analysis)),1)])])])):c("",!0)])])):c("",!0),(V=e.analysis_result.business_insights)!=null&&V.comprehensive?(o(),l("div",Bt,[s[32]||(s[32]=t("h4",null,"综合分析",-1)),t("div",Et,[e.analysis_result.business_insights.comprehensive.raw_analysis?(o(),l("div",St,[t("div",Rt,[t("p",null,[s[31]||(s[31]=t("strong",null,"综合评估:",-1)),a(" "+r(is(e.analysis_result.business_insights.comprehensive.raw_analysis)),1)])])])):c("",!0)])])):c("",!0),e.analysis_result.confidence_scores?(o(),l("div",Tt,[s[35]||(s[35]=t("h4",null,"分析置信度",-1)),t("div",It,[t("p",null,[s[33]||(s[33]=t("strong",null,"整体置信度:",-1)),a(" "+r((e.analysis_result.confidence_scores.overall*100).toFixed(1))+"%",1)]),t("p",null,[s[34]||(s[34]=t("strong",null,"质量评级:",-1)),a(" "+r(os(e.analysis_result.confidence_scores.level)),1)])])])):c("",!0),!e.analysis_result.business_insights&&!e.analysis_result.confidence_scores?(o(),l("div",Nt,[s[36]||(s[36]=t("h4",null,"分析结果",-1)),t("pre",null,r(JSON.stringify(e.analysis_result,null,2)),1)])):c("",!0)])):c("",!0)])}),128))])]),_:1})):(o(),B(q,{key:2,class:"no-results-card"},{default:_(()=>[d(_s,{description:"暂无分析结果"})]),_:1}))]))])}}}),Ht=ps(At,[["__scopeId","data-v-7064121b"]]);export{Ht as default};
