电力设备制造商CPQ系统 产品需求文档 (PRD)
目标与背景上下文 (Goals and Background Context)
目标 (Goals)
业务目标: 将平均报价准备时间从4小时缩短至0.5小时，并将因配置错误导致的订单修改率降低90%。

用户目标: 提升销售人员的报价效率与专业性，减少工程师因产品咨询而产生的工作中断，并为管理层提供流程监督能力。

背景上下文 (Background Context)
本项目旨在解决当前销售团队在产品匹配和报价过程中完全依赖手动操作所导致的效率低下、易于出错的核心痛点。现有基于文件夹和文档的流程已无法支撑业务增长，因此需要开发一款系统化的CPQ工具。该工具将通过提供集中的产品管理、智能搜索和一键报价功能，赋能销售团队，并通过引入AI技术（作为未来迭代方向）建立长期竞争优势。

变更日志 (Change Log)
日期

版本

描述

作者

2025年7月30日

1.0

初始草案创建

John (PM)

需求 (Requirements)
功能性需求 (Functional Requirements)
FR1: 系统应支持至少三种用户角色：管理员/工程师、销售人员、管理层，并有相应的权限区分。

FR2: 工程师角色的用户能够手动创建、读取、更新和删除（CRUD）产品及其技术参数。

FR3: 销售人员能够根据产品名称、关键词或参数搜索产品目录。

FR4: 销售人员在选择一个或多个产品后，能够输入客户信息、数量、价格等，并生成一份PDF格式的基础报价单。

FR5: 所有用户都必须通过登录才能访问系统。

非功能性需求 (Non-Functional Requirements)
NFR1: 系统界面必须是响应式的，能够在桌面电脑、平板和手机上正常显示和基本操作。

NFR2: MVP版本的后端必须使用Flask框架，数据库使用SQLite3。

NFR3: 系统必须提供基础的用户认证机制，确保只有授权用户才能访问。

NFR4: 系统的核心操作（如产品搜索、生成报价单）必须显著快于当前的手动流程。

用户界面设计目标 (User Interface Design Goals)
整体UX愿景 (Overall UX Vision)
界面设计将遵循简洁、高效、专业的原则。优先考虑数据清晰度和操作速度，最大限度地减少销售人员在创建报价时的认知负荷和点击次数。

关键交互模式 (Key Interaction Paradigms)
采用经典的仪表盘布局，包含一个强大的、支持多条件筛选和搜索的产品数据表格，以及一个引导式的、分步骤的报价单创建流程。

核心屏幕与视图 (Core Screens and Views)
登录页

主仪表盘 (可能包含最近的报价活动)

产品目录/搜索页

报价单创建/编辑页

报价单历史列表页

可访问性 (Accessibility)
建议遵循 WCAG AA 标准，确保系统对所有员工都友好易用。

品牌 (Branding)
界面应遵循公司现有的品牌指南（如Logo、颜色、字体等），以保持一致性。

目标平台 (Target Platforms)
Web端响应式设计，优先适配桌面浏览器，并兼容平板与手机。

技术假设 (Technical Assumptions)
代码仓库结构 (Repository Structure): Monorepo - 前后端代码将统一管理在单个代码仓库中。

服务架构 (Service Architecture): Monolith - MVP阶段将采用单体服务架构，后端技术栈确定为Flask + SQLite3。

测试要求 (Testing Requirements): Full Testing Pyramid - 项目需要建立完整的测试金字塔，覆盖单元测试、集成测试和端到端（E2E）测试。

史诗列表 (Epic List)
史诗 1: 项目基础与用户管理 (Foundation & User Management): 搭建项目骨架，配置开发环境，并实现核心的用户认证和角色管理功能。

史诗 2: 核心产品目录功能 (Core Product Catalog): 实现工程师手动创建、编辑和管理产品及其技术参数的完整流程。

史诗 3: 销售报价核心流程 (Sales Quoting Workflow): 为销售人员提供产品搜索功能，并实现从选择产品到生成PDF报价单的核心工作流。

史诗详情 (Epic Details)
史诗 1: 项目基础与用户管理 (Foundation & User Management)
史诗目标: 本史诗的目标是为整个CPQ系统奠定坚实的技术基础。我们将完成项目初始化、环境配置、数据库设置，并构建一个功能完备的用户认证和基础权限管理系统。完成此史诗后，我们将拥有一个安全、可运行的应用程序骨架，不同角色的用户可以登录并准备好使用后续史诗中开发的具体功能。

故事 1.1: 项目初始化与环境设置
作为一名 开发人员, 我希望 初始化包含Flask后端和前端占位符的Monorepo项目, 以便于 我们有一个可工作的开发基础。
验收标准 (Acceptance Criteria):

Monorepo仓库结构已创建。

基础的Flask后端应用可以成功运行。

基础的前端应用（可以是"Hello World"页面）可以成功运行。

提供了可以通过单个命令同时启动前后端的开发脚本。

故事 1.2: 数据库与用户模型设置
作为一名 开发人员, 我希望 配置SQLite数据库并创建基础的“用户”和“角色”数据模型, 以便于 我们可以存储和管理用户信息。
验收标准 (Acceptance Criteria):

数据库文件已初始化。

“用户”（Users）和“角色”（Roles）的数据表已在数据库中创建，包含必要字段（如：用户名、密码哈希、角色ID等）。

应用程序可以成功连接到数据库。

故事 1.3: 用户登录功能
作为一名 用户, 我希望 能够使用我的凭据登录系统, 以便于 我可以安全地访问属于我的内容。
验收标准 (Acceptance Criteria):

用户可以使用正确的用户名和密码成功登录。

用户使用错误的凭据登录时，会收到明确的错误提示。

成功登录后，系统会返回一个用于后续请求认证的令牌（Token）。

用户可以登出系统。

故事 1.4: 基础角色管理
作为一名 管理员, 我希望 能够为用户分配不同的角色（管理员、工程师、销售人员）, 以便于 我可以控制他们对系统不同功能的访问权限。
验收标准 (Acceptance Criteria):

管理员用户可以看到系统中的所有用户列表。

管理员可以修改用户的角色。

用户的角色被成功更新到数据库中。

史诗 2: 核心产品目录功能 (Core Product Catalog)
史诗目标: 本史诗的核心是构建CPQ系统的“心脏”——一个结构化、可信赖的产品目录。我们将为工程师和产品管理员提供一套完整的工具，让他们能够手动地将产品信息数字化并录入系统。完成此史诗后，系统将拥有一个作为后续所有报价功能基础的、准确的产品数据源。

故事 2.1: 扩展产品数据模型
作为一名 开发人员, 我希望 扩展数据库模式以包含详细的“产品”表和相关技术参数字段, 以便于 我们可以存储全面的产品信息。
验收标准 (Acceptance Criteria):

数据库中已创建“产品”（Products）表。

产品表包含所有必要字段，如：产品名称、SKU、描述、价格、以及一个用于存储动态技术参数的字段（例如JSON格式）。

模型已在后端代码中正确定义。

故事 2.2: 创建新产品
作为一名 工程师, 我希望 有一个表单页面，可以手动输入新产品的所有详细信息, 以便于 我可以将新设备添加到目录中。
验收标准 (Acceptance Criteria):

系统中存在一个用于创建新产品的UI表单。

表单包含产品模型中定义的所有字段的输入框。

提交包含有效数据的表单后，会在数据库中创建一条新的产品记录。

关键字段（如产品名称）包含输入验证。

故事 2.3: 查看产品列表
作为一名 工程师或销售人员, 我希望 能看到一个包含所有现有产品的列表, 以便于 我可以对整个产品目录有一个概览。
验收标准 (Acceptance Criteria):

系统中有一个页面以表格形式显示所有产品。

表格至少显示产品名称、SKU等关键信息。

当产品数量过多时，列表支持分页浏览。

故事 2.4: 编辑与删除产品
作为一名 工程师, 我希望 能够编辑现有产品的详细信息以及删除某个产品, 以便于 我可以维护产品目录的准确性。
验收标准 (Acceptance Criteria):

在产品列表页面，工程师可以点击进入单个产品的编辑模式。

编辑表单会预先填充该产品的所有现有数据。

保存更改后，数据库中的相应记录会被更新。

工程师可以删除一个产品，删除前需要有确认提示。

史诗 3: 销售报价核心流程 (Sales Quoting Workflow)
史诗目标: 本史诗旨在交付CPQ系统的核心价值——一个快速、准确、专业的报价工具。我们将利用已有的用户系统和产品目录，为销售人员构建从产品搜索、筛选到最终生成报价单的完整工作流。完成此史诗后，MVP将具备完整的核心功能，可以正式交付给销售团队使用并验证其价值。

故事 3.1: 产品搜索与筛选
作为一名 销售人员, 我希望 能对产品列表进行搜索和筛选, 以便于 我可以快速定位到满足客户需求的产品。
验收标准 (Acceptance Criteria):

在产品列表页（来自史诗2）的顶部有一个搜索框。

用户可以按产品名称或SKU进行实时搜索过滤。

提供基于关键技术参数的筛选器（例如下拉菜单或复选框）。

搜索和筛选的响应速度很快。

故事 3.2: 发起报价与产品选择
作为一名 销售人员, 我希望 能从产品列表中选择一个或多个产品并发起一个新的报价, 以便于 我可以开始报价流程。
验收标准 (Acceptance Criteria):

用户可以在产品列表中通过复选框选择多个产品。

页面上有一个“创建报价单”的按钮。

点击该按钮后，用户被引导至新的报价单创建页面，所选产品已自动添加到报价单中。

故事 3.3: 编辑报价单详情
作为一名 销售人员, 我希望 能填写客户信息，并调整报价单中每个产品的数量和价格, 以便于 我可以创建一份准确、完整的报价。
验收标准 (Acceptance Criteria):

报价单表单中有用于填写客户信息的字段（如公司名称、联系人）。

报价单中的每一行产品都有可编辑的数量和单价字段。

系统能自动计算每行产品的总价以及整个报价单的最终总价。

用户可以从报价单中移除某个产品。

故事 3.4: 生成报价单PDF
作为一名 销售人员, 我希望 能将完成的报价单生成一份外观专业的PDF文件, 以便于 我可以发送给客户。
验收标准 (Acceptance Criteria):

报价单页面有一个“生成PDF”的按钮。

点击按钮后，系统会生成一份PDF文件并提供下载。

PDF的布局专业，包含公司Logo、客户信息、产品明细列表（含数量、单价、总价）和最终总计。

故事 3.5: 查看报价历史
作为一名 销售人员, 我希望 能看到我之前创建的所有报价单列表, 以便于 我可以追踪工作和参考历史报价。
验收标准 (Acceptance Criteria):

系统中有一个“报价历史”页面。

该页面以列表形式展示当前登录用户创建的所有报价单。

列表显示客户名称、创建日期、总金额等关键信息。

用户可以点击查看任一历史报价单的详情（MVP阶段仅查看，不可编辑）。

检查清单结果报告 (Checklist Results Report)
检查清单概要: 这份PRD质量很高。问题定义清晰，MVP范围界定明确，史诗和故事逻辑递进且结构合理。文档已经为下一步的UX设计和技术架构设计做好了充分准备。
最终决定: READY FOR ARCHITECT / UX-EXPERT (已准备好移交架构师/UX专家)

后续步骤 (Next Steps)
移交给UX专家的提示 (UX Expert Prompt)
“UX专家你好，请基于这份PRD文档，特别是‘用户界面设计目标’部分，开始创建一份详细的《UI/UX规格文档》(front-end-spec)。请聚焦于为MVP版本定义用户流程、线框图和核心组件。”

移交给架构师的提示 (Architect Prompt)
“架构师你好，请基于这份PRD文档，严格遵守其中‘技术假设’部分定义的约束（Monorepo, Monolith, Flask+SQLite3, 完整测试金字塔），为项目设计一份详细的《架构文档》(architecture)。请确保架构既能满足MVP需求，也为未来的扩展（如AI功能、CRM集成）留有余地。”