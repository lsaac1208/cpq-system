var b=Object.defineProperty;var c=(r,u)=>b(r,"name",{value:u,configurable:!0});var d=(r,u,n)=>new Promise((a,l)=>{var y=s=>{try{w(n.next(s))}catch(h){l(h)}},P=s=>{try{w(n.throw(s))}catch(h){l(h)}},w=s=>s.done?a(s.value):Promise.resolve(s.value).then(y,P);w((n=n.apply(r,u)).next())});import{az as j,r as p,f}from"./vendor-vue-XfLkFKXI.js";import{p as g}from"./products-CqbSQiZB.js";const q=j("products",()=>{const r=p([]),u=p(null),n=p([]),a=p(!1),l=p(0),y=p(1),P=p(20),w=c(e=>d(void 0,null,function*(){var t,i,v;a.value=!0;try{const o=yield g.getProducts(e);return o&&typeof o=="object"?(r.value=o.products||[],l.value=((t=o.pagination)==null?void 0:t.total)||0,y.value=((i=o.pagination)==null?void 0:i.page)||1,P.value=((v=o.pagination)==null?void 0:v.per_page)||20,o):(r.value=[],l.value=0,{products:[],pagination:{total:0,page:1,per_page:20}})}catch(o){throw r.value=[],l.value=0,o}finally{a.value=!1}}),"loadProducts"),s=c(e=>d(void 0,null,function*(){a.value=!0;try{const t=yield g.getProduct(e);if(t&&t.product)return u.value=t.product,t.product;throw u.value=null,new Error("Invalid product data received")}catch(t){throw u.value=null,t}finally{a.value=!1}}),"loadProduct"),h=c(e=>d(void 0,null,function*(){a.value=!0;try{const t=yield g.createProduct(e);if(t&&t.product)return r.value.unshift(t.product),l.value=l.value+1,t;throw new Error("Invalid product creation response")}catch(t){throw t}finally{a.value=!1}}),"createProduct"),_=c((e,t)=>d(void 0,null,function*(){var i;a.value=!0;try{const v=yield g.updateProduct(e,t),o=r.value.findIndex(E=>E.id===e);return o!==-1&&(r.value[o]=v.product),((i=u.value)==null?void 0:i.id)===e&&(u.value=v.product),v}finally{a.value=!1}}),"updateProduct"),m=c(e=>d(void 0,null,function*(){a.value=!0;try{const t=yield g.deleteProduct(e),i=r.value.findIndex(v=>v.id===e);return i!==-1&&(r.value[i].is_active=!1),t}finally{a.value=!1}}),"deleteProduct"),x=c(()=>d(void 0,null,function*(){try{const e=yield g.getCategories();return n.value=(e==null?void 0:e.categories)||[],(e==null?void 0:e.categories)||[]}catch(e){return n.value=[],[]}}),"loadCategories"),I=c(()=>d(void 0,null,function*(){a.value=!0;try{return(yield g.getProducts({is_active:!0,per_page:1e3})).products}finally{a.value=!1}}),"loadAllProductsForCatalog"),S=c(()=>{u.value=null},"clearCurrentProduct"),C=c(e=>r.value.find(t=>t.id===e),"getProductById"),z=c(e=>d(void 0,null,function*(){const t=e||{category:"",is_active:!0,page:y.value,per_page:P.value};return yield w(t)}),"refreshProducts"),A=c(()=>{r.value=[],u.value=null,n.value=[],l.value=0,y.value=1,P.value=20,a.value=!1},"resetStore");return{products:f(r),currentProduct:f(u),categories:f(n),loading:f(a),total:f(l),currentPage:f(y),pageSize:f(P),loadProducts:w,loadProduct:s,createProduct:h,updateProduct:_,deleteProduct:m,loadCategories:x,loadAllProductsForCatalog:I,clearCurrentProduct:S,getProductById:C,refreshProducts:z,resetStore:A}});export{q as u};
