var e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;import{y as s,g as l,h as o,z as t,i,aT as n,bb as d,b0 as u,a as m}from"./element-plus-DR0qywX_.js";import{z as p,r as c,Z as f,A as g,C as w,S as _,K as h,X as v,u as P,P as y,an as b,a6 as V,az as x,B as z}from"./vue-BMWQU0Ry.js";import{u as U}from"./api-BHu6TLr6.js";import{s as j}from"./utils-BjNHK8wL.js";const q={class:"register-container"},O={class:"register-card"},C={class:"register-footer"},k=p({__name:"Register",setup(p){const k=x(),A=U(),R=c(),S=f({username:"",email:"",password:"",confirmPassword:"",first_name:"",last_name:""}),E={first_name:[{required:!0,message:"Please enter first name",trigger:"blur"}],last_name:[{required:!0,message:"Please enter last name",trigger:"blur"}],username:[{required:!0,message:"Please enter username",trigger:"blur"},{min:3,message:"Username must be at least 3 characters",trigger:"blur"}],email:[{required:!0,message:"Please enter email",trigger:"blur"},{type:"email",message:"Please enter a valid email",trigger:"blur"}],password:[{required:!0,message:"Please enter password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}],confirmPassword:[{required:!0,message:"Please confirm password",trigger:"blur"},{validator:(e,a,r)=>{a!==S.password?r(new Error("Passwords do not match")):r()},trigger:"blur"}]},F=()=>{return s=this,l=function*(){var s,l;if(R.value)try{yield R.value.validate();const s=S,{confirmPassword:l}=s,o=((s,l)=>{var o={};for(var t in s)a.call(s,t)&&l.indexOf(t)<0&&(o[t]=s[t]);if(null!=s&&e)for(var t of e(s))l.indexOf(t)<0&&r.call(s,t)&&(o[t]=s[t]);return o})(s,["confirmPassword"]),t=yield A.register(o);j.success(t.message||"Registration successful"),k.push("/")}catch(o){j.error((null==(l=null==(s=o.response)?void 0:s.data)?void 0:l.error)||"Registration failed")}},new Promise((e,a)=>{var r=e=>{try{t(l.next(e))}catch(r){a(r)}},o=e=>{try{t(l.throw(e))}catch(r){a(r)}},t=a=>a.done?e(a.value):Promise.resolve(a.value).then(r,o);t((l=l.apply(s,null)).next())});var s,l};return(e,a)=>{const r=i,p=t,c=o,f=l,x=m,U=b("router-link");return z(),g("div",q,[w("div",O,[a[9]||(a[9]=w("div",{class:"register-header"},[w("h2",null,"Create Account"),w("p",null,"Join CPQ System")],-1)),_(P(s),{ref_key:"registerFormRef",ref:R,model:S,rules:E,onSubmit:v(F,["prevent"])},{default:h(()=>[_(f,{gutter:20},{default:h(()=>[_(c,{span:12},{default:h(()=>[_(p,{prop:"first_name"},{default:h(()=>[_(r,{modelValue:S.first_name,"onUpdate:modelValue":a[0]||(a[0]=e=>S.first_name=e),placeholder:"First Name",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),_(c,{span:12},{default:h(()=>[_(p,{prop:"last_name"},{default:h(()=>[_(r,{modelValue:S.last_name,"onUpdate:modelValue":a[1]||(a[1]=e=>S.last_name=e),placeholder:"Last Name",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),_(p,{prop:"username"},{default:h(()=>[_(r,{modelValue:S.username,"onUpdate:modelValue":a[2]||(a[2]=e=>S.username=e),placeholder:"Username",size:"large","prefix-icon":P(n)},null,8,["modelValue","prefix-icon"])]),_:1}),_(p,{prop:"email"},{default:h(()=>[_(r,{modelValue:S.email,"onUpdate:modelValue":a[3]||(a[3]=e=>S.email=e),placeholder:"Email",size:"large","prefix-icon":P(d)},null,8,["modelValue","prefix-icon"])]),_:1}),_(p,{prop:"password"},{default:h(()=>[_(r,{modelValue:S.password,"onUpdate:modelValue":a[4]||(a[4]=e=>S.password=e),type:"password",placeholder:"Password",size:"large","prefix-icon":P(u),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),_(p,{prop:"confirmPassword"},{default:h(()=>[_(r,{modelValue:S.confirmPassword,"onUpdate:modelValue":a[5]||(a[5]=e=>S.confirmPassword=e),type:"password",placeholder:"Confirm Password",size:"large","prefix-icon":P(u),"show-password":"",onKeyup:V(F,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),_(p,null,{default:h(()=>[_(x,{type:"primary",size:"large",style:{width:"100%"},loading:P(A).loading,onClick:F},{default:h(()=>a[6]||(a[6]=[y(" Create Account ",-1)])),_:1,__:[6]},8,["loading"])]),_:1})]),_:1},8,["model"]),w("div",C,[w("p",null,[a[8]||(a[8]=y(" Already have an account? ",-1)),_(U,{to:"/login",class:"link"},{default:h(()=>a[7]||(a[7]=[y("Login here",-1)])),_:1,__:[7]})])])])])}}});export{k as _};
