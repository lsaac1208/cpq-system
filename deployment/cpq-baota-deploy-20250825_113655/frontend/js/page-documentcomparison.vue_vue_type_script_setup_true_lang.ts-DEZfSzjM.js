var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(a,s,l)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,o=(e,a,s)=>new Promise((l,t)=>{var i=e=>{try{o(s.next(e))}catch(a){t(a)}},n=e=>{try{o(s.throw(e))}catch(a){t(a)}},o=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,n);o((s=s.apply(e,a)).next())});import{E as c,y as r,z as u,w as d,d as p,x as m,o as f,i as v,a as _,v as g,C as y,D as h,A as b,B as w,F as k,p as V,k as C,f as x,b as S,g as z,h as T,_ as U,a1 as q,$ as A,aq as P,H as j,aO as I,T as B,j as D,u as F,Y as R,a2 as E,a7 as O,aP as M,t as H,aJ as K,aK as L,I as J,ag as W,a3 as X,ah as Q,ai as Y}from"./element-plus-DR0qywX_.js";import{s as Z}from"./utils-BjNHK8wL.js";import{t as $}from"./api-BHu6TLr6.js";import{z as G,r as N,Z as ee,b as ae,w as se,A as le,S as te,K as ie,C as ne,M as oe,u as ce,P as re,Q as ue,R as de,a8 as pe,an as me,J as fe,B as ve,L as _e,l as ge,V as ye,F as he,x as be}from"./vue-BMWQU0Ry.js";import{_ as we}from"./page-aianalysisenhanced.vue-9uq21fmn.js";const ke={class:"comparison-form"},Ve={class:"document-upload-area"},Ce={class:"upload-content"},xe={key:0,class:"document-list"},Se={class:"document-info"},ze={class:"file-details"},Te={class:"file-name"},Ue={class:"file-size"},qe={class:"document-meta"},Ae={class:"comparison-options"},Pe={class:"weight-config"},je={class:"weight-label"},Ie={class:"custom-criteria"},Be={class:"criteria-header"},De={class:"action-buttons"},Fe={class:"presets"},Re=["onClick"],Ee={class:"preset-tags"},Oe=we(G({__name:"DocumentComparisonForm",emits:["comparison-start","comparison-success","comparison-error"],setup(e,{emit:z}){const T=z,U=N(),q=N(),A=N(!1),P=N([]),j=ee({documents:[],comparison_config:{dimensions:["content","structure"],analysis_depth:"detailed",include_similarities:!0,include_differences:!0,generate_recommendations:!0,custom_criteria:[]},analysis_focus:{focus_areas:[],priority_weights:{},specific_requirements:[]}}),I=N([]),B=N({}),D={documents:[{required:!0,message:"请至少上传2个文档",trigger:"change",validator:function(e,a,s){!a||a.length<2?s(new Error("请至少上传2个文档进行对比")):a.length>10?s(new Error("最多支持同时对比10个文档")):s()}}],dimensions:[{required:!0,message:"请选择至少一个对比维度",trigger:"change"}],analysis_depth:[{required:!0,message:"请选择分析深度",trigger:"change"}]},F=[{name:"产品规格对比",description:"专门用于产品技术规格和功能特性的对比分析",tags:["产品","技术规格","功能"],config:{dimensions:["specifications","features","quality"],analysis_depth:"detailed",focus_areas:["technical_specs","features","performance"]}},{name:"价格方案对比",description:"针对不同供应商价格方案的全面对比分析",tags:["价格","成本","供应商"],config:{dimensions:["content","quality"],analysis_depth:"comprehensive",focus_areas:["pricing","quality"]}},{name:"合规性对比",description:"重点关注文档的合规性和标准符合度对比",tags:["合规","标准","认证"],config:{dimensions:["compliance","quality","structure"],analysis_depth:"comprehensive",focus_areas:["compliance","quality"]}}],R=ae(()=>j.documents.length>=2&&j.comparison_config.dimensions.length>0),E=ae(()=>j.comparison_config.dimensions.length>0&&j.comparison_config.analysis_depth),O=(e,a)=>{P.value=a;const s=a.filter(e=>e.raw).map(e=>({file:e.raw,name:e.name,description:""}));j.documents=s},M=(e,a)=>{P.value=a;const s=a.filter(e=>e.raw).map(e=>({file:e.raw,name:e.name,description:""}));j.documents=s},H=e=>{const a=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(e.type),s=e.size/1024/1024<10;return a?(s||Z.error("文件大小不能超过 10MB"),!1):(Z.error("只支持 PDF、Word、TXT 格式的文件"),!1)},K=()=>{j.comparison_config.custom_criteria=j.comparison_config.custom_criteria||[],j.comparison_config.custom_criteria.push({name:"",description:"",weight:.5})},L=e=>({technical_specs:"技术规格",pricing:"价格信息",features:"功能特性",quality:"质量标准",compliance:"合规要求",performance:"性能指标"}[e]||e),J=()=>o(this,null,function*(){var e,o;if(U.value)try{yield U.value.validate();const c=(e=((e,a)=>{for(var s in a||(a={}))t.call(a,s)&&n(e,s,a[s]);if(l)for(var s of l(a))i.call(a,s)&&n(e,s,a[s]);return e})({},j),o={analysis_focus:{focus_areas:I.value,priority_weights:B.value,specific_requirements:[]}},a(e,s(o)));A.value=!0,T("comparison-start");const r=yield $(c);if(!r.success||!r.result)throw new Error(r.error||"对比分析失败");T("comparison-success",r.result),Z.success("文档对比分析完成！")}catch(c){const e=c instanceof Error?c.message:"对比分析过程中发生错误";T("comparison-error",e),Z.error(e)}finally{A.value=!1}}),W=()=>{S.confirm("确定要重置表单吗？所有输入的数据将丢失。","确认重置",{type:"warning"}).then(()=>{var e,a;null==(e=U.value)||e.resetFields(),j.documents=[],j.comparison_config.custom_criteria=[],I.value=[],B.value={},P.value=[],null==(a=q.value)||a.clearFiles(),Z.success("表单已重置")}).catch(()=>{})},X=()=>{Z.info("配置模板保存功能即将推出")};return se(I,e=>{Object.keys(B.value).forEach(a=>{e.includes(a)||delete B.value[a]}),e.forEach(e=>{e in B.value||(B.value[e]=.5)})},{deep:!0}),(e,a)=>{const s=p,l=d,t=v,i=_,n=u,o=h,z=y,T=w,Q=b,Y=k,$=C,G=me("Connection"),N=r,ee=c,ae=x;return ve(),le("div",ke,[te(ee,{class:"form-card"},{header:ie(()=>a[6]||(a[6]=[ne("div",{class:"card-header"},[ne("h3",null,"文档对比配置"),ne("p",null,"上传多个文档进行智能对比分析")],-1)])),default:ie(()=>[te(N,{ref_key:"formRef",ref:U,model:j,rules:D,"label-width":"140px",class:"comparison-form-content"},{default:ie(()=>[te(n,{label:"待对比文档",prop:"documents",required:""},{default:ie(()=>[ne("div",Ve,[te(l,{ref_key:"uploadRef",ref:q,class:"document-uploader",drag:"","auto-upload":!1,multiple:!0,"file-list":P.value,"on-change":O,"on-remove":M,"before-upload":H,accept:".pdf,.docx,.doc,.txt"},{default:ie(()=>[ne("div",Ce,[te(s,{class:"upload-icon"},{default:ie(()=>[te(ce(m))]),_:1}),a[7]||(a[7]=ne("div",{class:"upload-text"},[ne("p",null,[re("将文档拖拽到此处或"),ne("em",null,"点击上传")]),ne("p",{class:"upload-tip"},"支持 PDF、Word、TXT 格式，单个文件不超过10MB")],-1))])]),_:1},8,["file-list"]),j.documents.length>0?(ve(),le("div",xe,[ne("h4",null,"已选择的文档 ("+ue(j.documents.length)+")",1),(ve(!0),le(de,null,pe(j.documents,(e,l)=>{return ve(),le("div",{key:l,class:"document-item"},[ne("div",Se,[te(s,{class:"file-icon"},{default:ie(()=>[te(ce(f))]),_:1}),ne("div",ze,[ne("div",Te,ue(e.file.name),1),ne("div",Ue,ue((n=e.file.size,n<1024?"".concat(n," B"):n<1048576?"".concat((n/1024).toFixed(1)," KB"):"".concat((n/1024/1024).toFixed(1)," MB"))),1)])]),ne("div",qe,[te(t,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,placeholder:"文档别名（可选）",size:"small",style:{width:"150px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),te(t,{modelValue:e.description,"onUpdate:modelValue":a=>e.description=a,placeholder:"文档描述（可选）",size:"small",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),te(i,{type:"danger",size:"small",text:"",onClick:e=>(e=>{j.documents.splice(e,1),P.value.splice(e,1)})(l),icon:ce(g)},{default:ie(()=>a[8]||(a[8]=[re(" 移除 ",-1)])),_:2,__:[8]},1032,["onClick","icon"])])]);var n}),128))])):oe("",!0)])]),_:1}),te(n,{label:"对比维度",prop:"dimensions",required:""},{default:ie(()=>[te(z,{modelValue:j.comparison_config.dimensions,"onUpdate:modelValue":a[0]||(a[0]=e=>j.comparison_config.dimensions=e),class:"dimension-checkboxes"},{default:ie(()=>[te(o,{label:"content"},{default:ie(()=>a[9]||(a[9]=[re("内容对比",-1)])),_:1,__:[9]}),te(o,{label:"structure"},{default:ie(()=>a[10]||(a[10]=[re("结构对比",-1)])),_:1,__:[10]}),te(o,{label:"features"},{default:ie(()=>a[11]||(a[11]=[re("特性对比",-1)])),_:1,__:[11]}),te(o,{label:"specifications"},{default:ie(()=>a[12]||(a[12]=[re("规格对比",-1)])),_:1,__:[12]}),te(o,{label:"quality"},{default:ie(()=>a[13]||(a[13]=[re("质量对比",-1)])),_:1,__:[13]}),te(o,{label:"compliance"},{default:ie(()=>a[14]||(a[14]=[re("合规性对比",-1)])),_:1,__:[14]})]),_:1},8,["modelValue"])]),_:1}),te(n,{label:"分析深度",prop:"analysis_depth",required:""},{default:ie(()=>[te(Q,{modelValue:j.comparison_config.analysis_depth,"onUpdate:modelValue":a[1]||(a[1]=e=>j.comparison_config.analysis_depth=e),class:"depth-radios"},{default:ie(()=>[te(T,{value:"basic"},{default:ie(()=>a[15]||(a[15]=[ne("div",{class:"radio-content"},[ne("div",{class:"radio-title"},"基础分析"),ne("div",{class:"radio-desc"},"快速对比主要差异，适合初步了解")],-1)])),_:1,__:[15]}),te(T,{value:"detailed"},{default:ie(()=>a[16]||(a[16]=[ne("div",{class:"radio-content"},[ne("div",{class:"radio-title"},"详细分析"),ne("div",{class:"radio-desc"},"深入分析各个维度，提供详细报告")],-1)])),_:1,__:[16]}),te(T,{value:"comprehensive"},{default:ie(()=>a[17]||(a[17]=[ne("div",{class:"radio-content"},[ne("div",{class:"radio-title"},"全面分析"),ne("div",{class:"radio-desc"},"最深入的分析，包含所有可能的对比维度")],-1)])),_:1,__:[17]})]),_:1},8,["modelValue"])]),_:1}),te(n,{label:"对比选项"},{default:ie(()=>[ne("div",Ae,[te(o,{modelValue:j.comparison_config.include_similarities,"onUpdate:modelValue":a[2]||(a[2]=e=>j.comparison_config.include_similarities=e)},{default:ie(()=>a[18]||(a[18]=[re(" 包含相似性分析 ",-1)])),_:1,__:[18]},8,["modelValue"]),te(o,{modelValue:j.comparison_config.include_differences,"onUpdate:modelValue":a[3]||(a[3]=e=>j.comparison_config.include_differences=e)},{default:ie(()=>a[19]||(a[19]=[re(" 包含差异性分析 ",-1)])),_:1,__:[19]},8,["modelValue"]),te(o,{modelValue:j.comparison_config.generate_recommendations,"onUpdate:modelValue":a[4]||(a[4]=e=>j.comparison_config.generate_recommendations=e)},{default:ie(()=>a[20]||(a[20]=[re(" 生成建议报告 ",-1)])),_:1,__:[20]},8,["modelValue"])])]),_:1}),te(n,{label:"分析焦点"},{default:ie(()=>[te(z,{modelValue:e.analysisFocus,"onUpdate:modelValue":a[5]||(a[5]=a=>e.analysisFocus=a),class:"focus-checkboxes"},{default:ie(()=>[te(o,{label:"technical_specs"},{default:ie(()=>a[21]||(a[21]=[re("技术规格",-1)])),_:1,__:[21]}),te(o,{label:"pricing"},{default:ie(()=>a[22]||(a[22]=[re("价格信息",-1)])),_:1,__:[22]}),te(o,{label:"features"},{default:ie(()=>a[23]||(a[23]=[re("功能特性",-1)])),_:1,__:[23]}),te(o,{label:"quality"},{default:ie(()=>a[24]||(a[24]=[re("质量标准",-1)])),_:1,__:[24]}),te(o,{label:"compliance"},{default:ie(()=>a[25]||(a[25]=[re("合规要求",-1)])),_:1,__:[25]}),te(o,{label:"performance"},{default:ie(()=>a[26]||(a[26]=[re("性能指标",-1)])),_:1,__:[26]})]),_:1},8,["modelValue"])]),_:1}),te(n,{label:"权重配置"},{default:ie(()=>[ne("div",Pe,[(ve(!0),le(de,null,pe(e.analysisFocus,e=>(ve(),le("div",{key:e,class:"weight-item"},[ne("span",je,ue(L(e)),1),te(Y,{modelValue:B.value[e],"onUpdate:modelValue":a=>B.value[e]=a,min:0,max:1,step:.1,"show-stops":"","show-input":"","input-size":"small",style:{width:"250px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])]),_:1}),te(n,{label:"自定义标准"},{default:ie(()=>[ne("div",Ie,[ne("div",Be,[a[28]||(a[28]=ne("span",null,"自定义对比标准",-1)),te(i,{type:"primary",size:"small",onClick:K,icon:ce(V)},{default:ie(()=>a[27]||(a[27]=[re(" 添加标准 ",-1)])),_:1,__:[27]},8,["icon"])]),(ve(!0),le(de,null,pe(j.comparison_config.custom_criteria,(e,s)=>(ve(),le("div",{key:s,class:"criteria-item"},[te(t,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,placeholder:"标准名称",style:{width:"150px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),te(t,{modelValue:e.description,"onUpdate:modelValue":a=>e.description=a,placeholder:"标准描述",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),te($,{modelValue:e.weight,"onUpdate:modelValue":a=>e.weight=a,min:0,max:1,step:.1,placeholder:"权重",style:{width:"100px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),te(i,{type:"danger",size:"small",text:"",onClick:e=>(e=>{var a;null==(a=j.comparison_config.custom_criteria)||a.splice(e,1)})(s),icon:ce(g)},{default:ie(()=>a[29]||(a[29]=[re(" 删除 ",-1)])),_:2,__:[29]},1032,["onClick","icon"])]))),128))])]),_:1}),te(n,null,{default:ie(()=>[ne("div",De,[te(i,{type:"primary",size:"large",loading:A.value,onClick:J,disabled:!R.value},{icon:ie(()=>[te(s,null,{default:ie(()=>[te(G)]),_:1})]),default:ie(()=>[a[30]||(a[30]=re(" 开始对比分析 ",-1))]),_:1,__:[30]},8,["loading","disabled"]),te(i,{size:"large",onClick:W},{default:ie(()=>a[31]||(a[31]=[re(" 重置表单 ",-1)])),_:1,__:[31]}),te(i,{type:"success",size:"large",onClick:X,disabled:!E.value},{icon:ie(()=>[te(s,null,{default:ie(()=>[te(ce(f))]),_:1})]),default:ie(()=>[a[32]||(a[32]=re(" 保存配置模板 ",-1))]),_:1,__:[32]},8,["disabled"])])]),_:1})]),_:1},8,["model"])]),_:1}),te(ee,{class:"preset-card"},{header:ie(()=>a[33]||(a[33]=[ne("h3",null,"快速配置",-1)])),default:ie(()=>[ne("div",Fe,[(ve(),le(de,null,pe(F,e=>ne("div",{key:e.name,class:"preset-item",onClick:a=>(e=>{S.confirm('确定要加载预设配置"'.concat(e.name,'"吗？当前配置将被替换。'),"确认加载预设",{type:"info"}).then(()=>{j.comparison_config.dimensions=e.config.dimensions,j.comparison_config.analysis_depth=e.config.analysis_depth,I.value=e.config.focus_areas,e.config.focus_areas.forEach(e=>{B.value[e]=.5}),Z.success("已加载预设配置：".concat(e.name))}).catch(()=>{})})(e)},[ne("h4",null,ue(e.name),1),ne("p",null,ue(e.description),1),ne("div",Ee,[(ve(!0),le(de,null,pe(e.tags,e=>(ve(),fe(ae,{key:e,size:"small",type:"info"},{default:ie(()=>[re(ue(e),1)]),_:2},1024))),128))])],8,Re)),64))])]),_:1})])}}}),[["__scopeId","data-v-f34bc185"]]),Me={class:"comparison-results"},He={class:"summary-section"},Ke={class:"stat-item"},Le={class:"stat-value"},Je={class:"stat-item"},We={class:"stat-value"},Xe={class:"stat-item"},Qe={class:"stat-value"},Ye={class:"stat-item"},Ze={class:"stat-value"},$e={class:"differences-section"},Ge={class:"card-header"},Ne={key:0},ea={key:1,class:"differences-list"},aa={class:"diff-header"},sa={class:"diff-category"},la={class:"diff-content"},ta={class:"diff-field"},ia={class:"diff-comparison"},na={class:"diff-item"},oa={class:"diff-value"},ca={class:"diff-item"},ra={class:"diff-value"},ua={class:"similarities-section"},da={class:"similarities-list"},pa={class:"similarity-header"},ma={class:"similarity-category"},fa={class:"similarity-score"},va={class:"similarity-content"},_a={class:"actions-section"},ga=we(G({__name:"ComparisonResults",props:{results:{default:()=>({similarity:78,differences:12,commonItems:45,confidence:85,differenceDetails:[{category:"技术规格",field:"额定电压",document1:"220V",document2:"380V",type:"数值不同"},{category:"产品特性",field:"工作温度",document1:"-10~50℃",document2:"0~60℃",type:"范围不同"},{category:"基本信息",field:"型号",document1:"A703",document2:"A704",type:"内容不同"}],similarities:[{category:"产品类别",content:"三相继电保护测试仪",score:95},{category:"制造商",content:"电力设备制造有限公司",score:100},{category:"应用场景",content:"电力系统继电保护测试",score:88}]})},loading:{type:Boolean,default:!1}},emits:["new-comparison"],setup(e,{emit:a}){const s=a,l=N("table"),t=e=>({"数值不同":"warning","范围不同":"info","内容不同":"danger","格式不同":"success"}[e]||"info"),i=()=>{Z.success("报告下载中...")},n=()=>{Z.success("分享链接已复制到剪贴板")},o=()=>{s("new-comparison")};return(e,a)=>{const s=c,r=T,u=z,d=_,m=P,f=A,v=x,g=q,y=p,h=U;return ve(),le("div",Me,[a[16]||(a[16]=ne("div",{class:"results-header"},[ne("h3",null,"对比分析结果"),ne("p",null,"详细的文档对比分析结果和差异报告")],-1)),ne("div",He,[te(u,{gutter:20},{default:ie(()=>[te(r,{span:6},{default:ie(()=>[te(s,{class:"stat-card"},{default:ie(()=>[ne("div",Ke,[ne("div",Le,ue(e.results.similarity||0)+"%",1),a[2]||(a[2]=ne("div",{class:"stat-label"},"相似度",-1))])]),_:1})]),_:1}),te(r,{span:6},{default:ie(()=>[te(s,{class:"stat-card"},{default:ie(()=>[ne("div",Je,[ne("div",We,ue(e.results.differences||0),1),a[3]||(a[3]=ne("div",{class:"stat-label"},"差异点",-1))])]),_:1})]),_:1}),te(r,{span:6},{default:ie(()=>[te(s,{class:"stat-card"},{default:ie(()=>[ne("div",Xe,[ne("div",Qe,ue(e.results.commonItems||0),1),a[4]||(a[4]=ne("div",{class:"stat-label"},"共同点",-1))])]),_:1})]),_:1}),te(r,{span:6},{default:ie(()=>[te(s,{class:"stat-card"},{default:ie(()=>[ne("div",Ye,[ne("div",Ze,ue(e.results.confidence||0)+"%",1),a[5]||(a[5]=ne("div",{class:"stat-label"},"置信度",-1))])]),_:1})]),_:1})]),_:1})]),ne("div",$e,[te(s,null,{header:ie(()=>[ne("div",Ge,[a[8]||(a[8]=ne("h4",null,"差异详情",-1)),te(m,null,{default:ie(()=>[te(d,{type:"table"===l.value?"primary":"",onClick:a[0]||(a[0]=e=>l.value="table"),size:"small"},{default:ie(()=>a[6]||(a[6]=[re(" 表格视图 ",-1)])),_:1,__:[6]},8,["type"]),te(d,{type:"list"===l.value?"primary":"",onClick:a[1]||(a[1]=e=>l.value="list"),size:"small"},{default:ie(()=>a[7]||(a[7]=[re(" 列表视图 ",-1)])),_:1,__:[7]},8,["type"])]),_:1})])]),default:ie(()=>["table"===l.value?(ve(),le("div",Ne,[_e((ve(),fe(g,{data:e.results.differenceDetails},{default:ie(()=>[te(f,{prop:"category",label:"类别",width:"120"}),te(f,{prop:"field",label:"字段",width:"150"}),te(f,{prop:"document1",label:"文档1","min-width":"200"}),te(f,{prop:"document2",label:"文档2","min-width":"200"}),te(f,{prop:"type",label:"差异类型",width:"100"},{default:ie(e=>[te(v,{type:t(e.row.type)},{default:ie(()=>[re(ue(e.row.type),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])),[[h,e.loading]])])):(ve(),le("div",ea,[(ve(!0),le(de,null,pe(e.results.differenceDetails,(e,s)=>(ve(),le("div",{key:s,class:"difference-item"},[ne("div",aa,[ne("span",sa,ue(e.category),1),te(v,{type:t(e.type),size:"small"},{default:ie(()=>[re(ue(e.type),1)]),_:2},1032,["type"])]),ne("div",la,[ne("div",ta,[a[9]||(a[9]=ne("strong",null,"字段：",-1)),re(ue(e.field),1)]),ne("div",ia,[ne("div",na,[a[10]||(a[10]=ne("span",{class:"diff-label"},"文档1：",-1)),ne("span",oa,ue(e.document1),1)]),ne("div",ca,[a[11]||(a[11]=ne("span",{class:"diff-label"},"文档2：",-1)),ne("span",ra,ue(e.document2),1)])])])]))),128))]))]),_:1})]),ne("div",ua,[te(s,null,{header:ie(()=>a[12]||(a[12]=[ne("h4",null,"相似内容",-1)])),default:ie(()=>[ne("div",da,[(ve(!0),le(de,null,pe(e.results.similarities,(e,a)=>(ve(),le("div",{key:a,class:"similarity-item"},[ne("div",pa,[ne("span",ma,ue(e.category),1),ne("span",fa,ue(e.score)+"%",1)]),ne("div",va,ue(e.content),1)]))),128))])]),_:1})]),ne("div",_a,[te(d,{type:"primary",onClick:i},{default:ie(()=>[te(y,null,{default:ie(()=>[te(ce(j))]),_:1}),a[13]||(a[13]=re(" 下载报告 ",-1))]),_:1,__:[13]}),te(d,{onClick:n},{default:ie(()=>[te(y,null,{default:ie(()=>[te(ce(I))]),_:1}),a[14]||(a[14]=re(" 分享结果 ",-1))]),_:1,__:[14]}),te(d,{onClick:o},{default:ie(()=>[te(y,null,{default:ie(()=>[te(ce(B))]),_:1}),a[15]||(a[15]=re(" 新建对比 ",-1))]),_:1,__:[15]})])])}}}),[["__scopeId","data-v-2b6de523"]]),ya={class:"comparison-history"},ha={class:"filters"},ba={class:"pagination"},wa=we(G({__name:"ComparisonHistory",emits:["view-comparison"],setup(e,{emit:a}){const s=a,l=N(!1),t=N(""),i=N(""),n=N([]),c=N(1),r=N(20),u=N(0),d=N([{id:1,name:"A703与A704产品对比",documentCount:2,similarity:78,status:"completed",createdAt:"2024-08-16 14:30:25",documents:["A703说明书.pdf","A704说明书.pdf"]},{id:2,name:"继电保护设备规格对比",documentCount:3,similarity:65,status:"completed",createdAt:"2024-08-15 09:15:12",documents:["设备A.pdf","设备B.pdf","设备C.pdf"]},{id:3,name:"技术标准文档对比",documentCount:2,similarity:92,status:"processing",createdAt:"2024-08-16 16:20:08",documents:["标准V1.pdf","标准V2.pdf"]}]),p=ae(()=>{let e=d.value;t.value&&(e=e.filter(e=>e.name.toLowerCase().includes(t.value.toLowerCase()))),i.value&&(e=e.filter(e=>e.status===i.value)),u.value=e.length;const a=(c.value-1)*r.value,s=a+r.value;return e.slice(a,s)}),m=()=>{c.value=1},f=()=>{c.value=1},g=e=>{r.value=e,c.value=1},y=e=>{c.value=e},h=()=>o(this,null,function*(){l.value=!0;try{yield new Promise(e=>setTimeout(e,1e3)),Z.success("历史记录已刷新")}catch(e){Z.error("刷新失败")}finally{l.value=!1}}),b=e=>o(this,null,function*(){try{yield S.confirm('确定要删除对比记录"'.concat(e.name,'"吗？'),"确认删除",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"});const a=d.value.findIndex(a=>a.id===e.id);a>-1&&(d.value.splice(a,1),Z.success("删除成功"))}catch(a){}});return ge(()=>{h()}),(e,a)=>{const o=v,d=T,w=F,k=D,V=R,C=_,S=z,P=A,j=x,I=q,B=E,O=U;return ve(),le("div",ya,[a[9]||(a[9]=ne("div",{class:"history-header"},[ne("h3",null,"对比历史"),ne("p",null,"查看和管理历史文档对比记录")],-1)),ne("div",ha,[te(S,{gutter:16},{default:ie(()=>[te(d,{span:6},{default:ie(()=>[te(o,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"搜索对比记录...",clearable:"",onChange:m},null,8,["modelValue"])]),_:1}),te(d,{span:4},{default:ie(()=>[te(k,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),placeholder:"状态",clearable:""},{default:ie(()=>[te(w,{label:"全部",value:""}),te(w,{label:"已完成",value:"completed"}),te(w,{label:"进行中",value:"processing"}),te(w,{label:"失败",value:"failed"})]),_:1},8,["modelValue"])]),_:1}),te(d,{span:6},{default:ie(()=>[te(V,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:f},null,8,["modelValue"])]),_:1}),te(d,{span:4},{default:ie(()=>[te(C,{type:"primary",onClick:h},{default:ie(()=>a[5]||(a[5]=[re("刷新",-1)])),_:1,__:[5]})]),_:1})]),_:1})]),_e((ve(),fe(I,{data:p.value},{default:ie(()=>[te(P,{prop:"id",label:"ID",width:"80"}),te(P,{prop:"name",label:"对比名称","min-width":"200"}),te(P,{prop:"documentCount",label:"文档数量",width:"100"}),te(P,{prop:"similarity",label:"相似度",width:"100"},{default:ie(e=>[ne("span",null,ue(e.row.similarity)+"%",1)]),_:1}),te(P,{prop:"status",label:"状态",width:"100"},{default:ie(e=>{return[te(j,{type:(a=e.row.status,{completed:"success",processing:"warning",failed:"danger"}[a]||"info")},{default:ie(()=>[re(ue(e.row.status),1)]),_:2},1032,["type"])];var a}),_:1}),te(P,{prop:"createdAt",label:"创建时间",width:"180"}),te(P,{label:"操作",width:"200"},{default:ie(e=>[te(C,{size:"small",onClick:a=>{return l=e.row,void s("view-comparison",l);var l}},{default:ie(()=>a[6]||(a[6]=[re(" 查看 ",-1)])),_:2,__:[6]},1032,["onClick"]),te(C,{size:"small",type:"primary",onClick:a=>{return s=e.row,void Z.success("正在下载对比报告: ".concat(s.name));var s}},{default:ie(()=>a[7]||(a[7]=[re(" 下载 ",-1)])),_:2,__:[7]},1032,["onClick"]),te(C,{size:"small",type:"danger",onClick:a=>b(e.row)},{default:ie(()=>a[8]||(a[8]=[re(" 删除 ",-1)])),_:2,__:[8]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,l.value]]),ne("div",ba,[te(B,{"current-page":c.value,"onUpdate:currentPage":a[3]||(a[3]=e=>c.value=e),"page-size":r.value,"onUpdate:pageSize":a[4]||(a[4]=e=>r.value=e),total:u.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:g,onCurrentChange:y},null,8,["current-page","page-size","total"])])])}}}),[["__scopeId","data-v-baf2ef0e"]]),ka={class:"comparison-metrics"},Va={class:"metrics-summary"},Ca={class:"metric-item"},xa={class:"metric-value"},Sa={class:"metric-item"},za={class:"metric-value"},Ta={class:"metric-item"},Ua={class:"metric-value"},qa={class:"metric-item"},Aa={class:"metric-value"},Pa={class:"charts-section"},ja={class:"chart-placeholder"},Ia={class:"chart-placeholder"},Ba={class:"chart-placeholder"},Da={class:"detailed-stats"},Fa=we(G({__name:"ComparisonMetrics",setup(e){const a=N({totalComparisons:256,avgSimilarity:73.2,avgProcessingTime:18.5,successRate:96.1}),s=N([{category:"产品规格对比",count:89,avgSimilarity:78.5,avgTime:15.2,successRate:97.8},{category:"技术文档对比",count:67,avgSimilarity:71.3,avgTime:22.1,successRate:95.5},{category:"标准文件对比",count:45,avgSimilarity:84.2,avgTime:12.8,successRate:98.9},{category:"其他对比",count:55,avgSimilarity:65.1,avgTime:25.3,successRate:92.7}]);return ge(()=>{}),(e,l)=>{const t=c,i=T,n=z,o=p,r=A,u=q;return ve(),le("div",ka,[l[11]||(l[11]=ne("div",{class:"metrics-header"},[ne("h3",null,"对比统计"),ne("p",null,"文档对比分析的统计数据和趋势")],-1)),ne("div",Va,[te(n,{gutter:20},{default:ie(()=>[te(i,{span:6},{default:ie(()=>[te(t,{class:"metric-card"},{default:ie(()=>[ne("div",Ca,[ne("div",xa,ue(a.value.totalComparisons),1),l[0]||(l[0]=ne("div",{class:"metric-label"},"总对比次数",-1))])]),_:1})]),_:1}),te(i,{span:6},{default:ie(()=>[te(t,{class:"metric-card"},{default:ie(()=>[ne("div",Sa,[ne("div",za,ue(a.value.avgSimilarity)+"%",1),l[1]||(l[1]=ne("div",{class:"metric-label"},"平均相似度",-1))])]),_:1})]),_:1}),te(i,{span:6},{default:ie(()=>[te(t,{class:"metric-card"},{default:ie(()=>[ne("div",Ta,[ne("div",Ua,ue(a.value.avgProcessingTime)+"s",1),l[2]||(l[2]=ne("div",{class:"metric-label"},"平均处理时间",-1))])]),_:1})]),_:1}),te(i,{span:6},{default:ie(()=>[te(t,{class:"metric-card"},{default:ie(()=>[ne("div",qa,[ne("div",Aa,ue(a.value.successRate)+"%",1),l[3]||(l[3]=ne("div",{class:"metric-label"},"成功率",-1))])]),_:1})]),_:1})]),_:1})]),ne("div",Pa,[te(n,{gutter:20},{default:ie(()=>[te(i,{span:12},{default:ie(()=>[te(t,null,{header:ie(()=>l[4]||(l[4]=[ne("h4",null,"相似度分布",-1)])),default:ie(()=>[ne("div",ja,[te(o,null,{default:ie(()=>[te(ce(O))]),_:1}),l[5]||(l[5]=ne("p",null,"相似度分布图表",-1))])]),_:1})]),_:1}),te(i,{span:12},{default:ie(()=>[te(t,null,{header:ie(()=>l[6]||(l[6]=[ne("h4",null,"对比类型分布",-1)])),default:ie(()=>[ne("div",Ia,[te(o,null,{default:ie(()=>[te(ce(M))]),_:1}),l[7]||(l[7]=ne("p",null,"对比类型饼图",-1))])]),_:1})]),_:1})]),_:1}),te(n,{gutter:20,style:{"margin-top":"20px"}},{default:ie(()=>[te(i,{span:24},{default:ie(()=>[te(t,null,{header:ie(()=>l[8]||(l[8]=[ne("h4",null,"对比趋势",-1)])),default:ie(()=>[ne("div",Ba,[te(o,null,{default:ie(()=>[te(ce(O))]),_:1}),l[9]||(l[9]=ne("p",null,"对比次数趋势图",-1))])]),_:1})]),_:1})]),_:1})]),ne("div",Da,[te(t,null,{header:ie(()=>l[10]||(l[10]=[ne("h4",null,"详细统计",-1)])),default:ie(()=>[te(u,{data:s.value},{default:ie(()=>[te(r,{prop:"category",label:"分类",width:"150"}),te(r,{prop:"count",label:"次数",width:"100"}),te(r,{prop:"avgSimilarity",label:"平均相似度",width:"120"}),te(r,{prop:"avgTime",label:"平均时长(s)",width:"120"}),te(r,{prop:"successRate",label:"成功率",width:"100"})]),_:1},8,["data"])]),_:1})])])}}}),[["__scopeId","data-v-46cd2d4f"]]),Ra={class:"comparison-progress"},Ea={key:0,class:"current-task"},Oa={class:"task-header"},Ma={class:"task-info"},Ha={class:"task-name"},Ka={class:"task-documents"},La={class:"progress-section"},Ja={class:"progress-info"},Wa={class:"steps-progress"},Xa={class:"task-actions"},Qa={key:1,class:"no-task"},Ya={key:2,class:"task-queue"},Za={class:"queue-info"},$a={class:"queue-name"},Ga={class:"queue-time"},Na={class:"task-logs"},es={class:"logs-header"},as={class:"logs-container"},ss={class:"log-time"},ls={class:"log-message"},ts=we(G({__name:"ComparisonProgress",emits:["view-results","start-comparison"],setup(e,{emit:a}){const s=a,l=N({id:1,name:"A703与A704产品对比",documents:["A703说明书.pdf","A704说明书.pdf"],status:"processing",progress:65,estimatedTime:45,currentStep:2,steps:[{id:1,title:"文档解析",description:"解析上传的文档内容",status:"finish"},{id:2,title:"内容分析",description:"分析文档结构和内容",status:"process"},{id:3,title:"对比计算",description:"计算文档间的相似度",status:"wait"},{id:4,title:"生成报告",description:"生成详细对比报告",status:"wait"}]}),t=N([{id:2,name:"技术标准对比",estimatedStartTime:"14:35:20"},{id:3,name:"产品规格对比",estimatedStartTime:"14:42:15"}]),i=N([{time:"14:28:15",level:"info",message:"开始解析文档 A703说明书.pdf"},{time:"14:28:18",level:"success",message:"文档解析完成，提取到 156 个段落"},{time:"14:28:22",level:"info",message:"开始解析文档 A704说明书.pdf"},{time:"14:28:25",level:"success",message:"文档解析完成，提取到 142 个段落"},{time:"14:28:28",level:"info",message:"开始内容分析和特征提取"},{time:"14:29:05",level:"warning",message:"检测到部分内容格式不规范，自动修正中..."},{time:"14:29:15",level:"info",message:"正在计算语义相似度..."}]);let n=null;const r=()=>o(this,null,function*(){try{yield S.confirm("确定要取消当前对比任务吗？","确认取消",{confirmButtonText:"取消任务",cancelButtonText:"继续任务",type:"warning"}),l.value&&(l.value.status="cancelled",m("warning","用户取消了对比任务"),Z.warning("任务已取消"))}catch(e){}}),u=()=>{s("view-results",l.value)},d=()=>{s("start-comparison")},p=()=>{i.value=[]},m=(e,a)=>{const s=new Date,l="".concat(s.getHours().toString().padStart(2,"0"),":").concat(s.getMinutes().toString().padStart(2,"0"),":").concat(s.getSeconds().toString().padStart(2,"0"));i.value.push({time:l,level:e,message:a}),i.value.length>50&&i.value.shift()},f=()=>{l.value&&"processing"===l.value.status&&(l.value.progress<100?(l.value.progress+=3*Math.random(),l.value.estimatedTime=Math.max(0,l.value.estimatedTime-2),l.value.progress>25&&l.value.currentStep<1&&(l.value.currentStep=1,l.value.steps[1].status="process",m("info","开始内容分析阶段")),l.value.progress>50&&l.value.currentStep<2&&(l.value.currentStep=2,l.value.steps[1].status="finish",l.value.steps[2].status="process",m("info","开始对比计算阶段")),l.value.progress>80&&l.value.currentStep<3&&(l.value.currentStep=3,l.value.steps[2].status="finish",l.value.steps[3].status="process",m("info","开始生成报告阶段"))):(l.value.progress=100,l.value.status="completed",l.value.estimatedTime=0,l.value.currentStep=4,l.value.steps[3].status="finish",m("success","对比任务完成！相似度: 78.5%")))};return ge(()=>{n=setInterval(f,2e3)}),ye(()=>{n&&clearInterval(n)}),(e,a)=>{const s=x,n=H,o=L,m=K,f=_,v=c,g=J;return ve(),le("div",Ra,[a[9]||(a[9]=ne("div",{class:"progress-header"},[ne("h3",null,"对比进度"),ne("p",null,"实时监控文档对比分析的进度")],-1)),l.value?(ve(),le("div",Ea,[te(v,null,{header:ie(()=>{return[ne("div",Oa,[a[0]||(a[0]=ne("span",null,"当前对比任务",-1)),te(s,{type:(e=l.value.status,{processing:"warning",completed:"success",failed:"danger",cancelled:"info"}[e]||"info")},{default:ie(()=>[re(ue(l.value.status),1)]),_:1},8,["type"])])];var e}),default:ie(()=>[ne("div",Ma,[ne("div",Ha,ue(l.value.name),1),ne("div",Ka,[a[1]||(a[1]=ne("span",null,"对比文档：",-1)),(ve(!0),le(de,null,pe(l.value.documents,e=>(ve(),fe(s,{key:e,size:"small",style:{"margin-right":"8px"}},{default:ie(()=>[re(ue(e),1)]),_:2},1024))),128))])]),ne("div",La,[ne("div",Ja,[ne("span",null,"整体进度："+ue(l.value.progress)+"%",1),ne("span",null,"预计剩余时间："+ue(l.value.estimatedTime)+"s",1)]),te(n,{percentage:l.value.progress,status:100===l.value.progress?"success":"primary","stroke-width":12},null,8,["percentage","status"])]),ne("div",Wa,[te(m,{active:l.value.currentStep,"align-center":""},{default:ie(()=>[(ve(!0),le(de,null,pe(l.value.steps,e=>(ve(),fe(o,{key:e.id,title:e.title,description:e.description,status:e.status},null,8,["title","description","status"]))),128))]),_:1},8,["active"])]),ne("div",Xa,["processing"===l.value.status?(ve(),fe(f,{key:0,type:"danger",onClick:r},{default:ie(()=>a[2]||(a[2]=[re(" 取消任务 ",-1)])),_:1,__:[2]})):oe("",!0),"completed"===l.value.status?(ve(),fe(f,{key:1,type:"primary",onClick:u},{default:ie(()=>a[3]||(a[3]=[re(" 查看结果 ",-1)])),_:1,__:[3]})):oe("",!0)])]),_:1})])):(ve(),le("div",Qa,[te(g,{description:"当前没有正在进行的对比任务"},{default:ie(()=>[te(f,{type:"primary",onClick:d},{default:ie(()=>a[4]||(a[4]=[re(" 开始新对比 ",-1)])),_:1,__:[4]})]),_:1})])),t.value.length>0?(ve(),le("div",Ya,[te(v,null,{header:ie(()=>a[5]||(a[5]=[ne("h4",null,"等待队列",-1)])),default:ie(()=>[(ve(!0),le(de,null,pe(t.value,e=>(ve(),le("div",{key:e.id,class:"queue-item"},[ne("div",Za,[ne("span",$a,ue(e.name),1),ne("span",Ga,"预计开始时间："+ue(e.estimatedStartTime),1)]),te(f,{size:"small",text:"",onClick:a=>(e=>{const a=t.value.findIndex(a=>a.id===e);a>-1&&(t.value.splice(a,1),Z.success("已从队列中移除"))})(e.id)},{default:ie(()=>a[6]||(a[6]=[re(" 移除 ",-1)])),_:2,__:[6]},1032,["onClick"])]))),128))]),_:1})])):oe("",!0),ne("div",Na,[te(v,null,{header:ie(()=>[ne("div",es,[a[8]||(a[8]=ne("h4",null,"实时日志",-1)),te(f,{size:"small",onClick:p},{default:ie(()=>a[7]||(a[7]=[re("清空日志",-1)])),_:1,__:[7]})])]),default:ie(()=>[ne("div",as,[(ve(!0),le(de,null,pe(i.value,(e,a)=>(ve(),le("div",{key:a,class:he(["log-item",e.level])},[ne("span",ss,ue(e.time),1),ne("span",ls,ue(e.message),1)],2))),128))])]),_:1})])])}}}),[["__scopeId","data-v-d56211a5"]]),is={class:"document-comparison"},ns={key:1,class:"empty-results"},os=G({__name:"DocumentComparison",setup(e){const a=N("compare"),s=N(!1),l=N(null),t=N(null),i=N(0);be("refreshTrigger",i);const n=()=>{s.value=!0,t.value={current_step:"准备分析...",percentage:0,estimated_remaining_time:0},Z.info("开始文档对比分析")},o=e=>{s.value=!1,l.value=e,a.value="results",Y({title:"对比分析完成",message:"成功对比 ".concat(e.documents_analyzed.length," 个文档"),type:"success",duration:5e3}),i.value++},c=e=>{s.value=!1,t.value=null,Z.error("对比分析失败: ".concat(e))},r=e=>{Z.success("开始导出".concat(e.toUpperCase(),"格式报告"))},u=()=>{Z.success("分析结果已保存"),i.value++},d=e=>{Z.info("正在加载对比记录: ".concat(e.document_names.join(", "))),a.value="results"},p=()=>{Z.success("对比记录已删除"),i.value++},m=()=>{Z.warning("对比分析已取消"),s.value=!1,t.value=null};return ge(()=>{Z.info("多文档对比分析系统已就绪")}),(e,i)=>{const f=Q,v=_,g=J,y=W,h=X;return ve(),le("div",is,[i[4]||(i[4]=ne("div",{class:"page-header"},[ne("h1",null,"多文档对比分析"),ne("p",{class:"page-description"},"智能对比分析多个文档，识别相似性、差异性，并提供专业建议")],-1)),te(y,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=e=>a.value=e),class:"comparison-tabs"},{default:ie(()=>[te(f,{label:"开始对比",name:"compare"},{default:ie(()=>[te(Oe,{onComparisonStart:n,onComparisonSuccess:o,onComparisonError:c})]),_:1}),te(f,{label:"对比结果",name:"results",disabled:!l.value},{default:ie(()=>[l.value?(ve(),fe(ga,{key:0,"comparison-result":l.value,onExportResult:r,onSaveAnalysis:u},null,8,["comparison-result"])):(ve(),le("div",ns,[te(g,{description:"还没有对比结果"},{default:ie(()=>[te(v,{type:"primary",onClick:i[0]||(i[0]=e=>a.value="compare")},{default:ie(()=>i[3]||(i[3]=[re("开始对比",-1)])),_:1,__:[3]})]),_:1})]))]),_:1},8,["disabled"]),te(f,{label:"对比历史",name:"history"},{default:ie(()=>[te(wa,{onComparisonSelected:d,onComparisonDeleted:p})]),_:1}),te(f,{label:"对比统计",name:"metrics"},{default:ie(()=>[te(Fa)]),_:1})]),_:1},8,["modelValue"]),te(h,{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=e=>s.value=e),title:"文档对比分析中",width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{default:ie(()=>[t.value?(ve(),fe(ts,{key:0,progress:t.value,onCancelComparison:m},null,8,["progress"])):oe("",!0)]),_:1},8,["modelValue"])])}}});export{os as _};
