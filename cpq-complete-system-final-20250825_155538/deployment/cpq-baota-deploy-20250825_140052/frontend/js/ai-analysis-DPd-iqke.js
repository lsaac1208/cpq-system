var _=Object.defineProperty;var r=(e,t)=>_(e,"name",{value:t,configurable:!0});var g=(e,t,n)=>new Promise((s,c)=>{var a=o=>{try{l(n.next(o))}catch(i){c(i)}},u=o=>{try{l(n.throw(o))}catch(i){c(i)}},l=o=>o.done?s(o.value):Promise.resolve(o.value).then(a,u);l((n=n.apply(e,t)).next())});import{h as p}from"./index-CoBZUWE1.js";import"./vendor-pdf-BeW0Xq92.js";import"./vendor-ui-CE-ZhXxH.js";import"./vendor-vue-XfLkFKXI.js";import"./vendor-utils-B8vW8fJV.js";const m="/ai-analysis",D=r(()=>p.get("".concat(m,"/supported-formats")),"getSupportedFormats"),$=r(e=>{const t=new FormData;return t.append("document",e),p.post("".concat(m,"/analyze-document"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4,"axios-retry":{retries:1,retryDelay:r(n=>n*2e3,"retryDelay"),retryCondition:r(n=>n.code==="ECONNABORTED"||n.response&&n.response.status>=500,"retryCondition")}})},"analyzeDocument"),j=r(e=>p.get("".concat(m,"/analysis/").concat(e)),"getAnalysisResult"),k=r((e,t)=>p.put("".concat(m,"/analysis/").concat(e),t),"updateAnalysisModifications"),O=r(e=>p.post("".concat(m,"/create-product"),e),"createProductFromAnalysis"),S=r(e=>p.get("".concat(m,"/history"),{params:e}),"getAnalysisHistory"),F=r(e=>p.get("".concat(m,"/statistics"),{params:e}),"getAnalysisStatistics"),U=r(e=>p.delete("".concat(m,"/analysis/").concat(e)),"deleteAnalysisRecord"),b=r((e,t)=>g(void 0,null,function*(){const n=[];for(let s=0;s<e.length;s++){const c=e[s];try{t&&t(s,e.length,c.name);const a=yield $(c);n.push(a)}catch(a){n.push({success:!1,document_info:{filename:c.name,mimetype:c.type,size:c.size,type:c.name.split(".").pop()||"unknown"},extracted_data:{basic_info:{name:"",code:"",category:"",base_price:0,description:""},specifications:{},features:[],application_scenarios:[],accessories:[],certificates:[],support_info:{warranty:{period:"",coverage:"",terms:[]},contact_info:{},service_promises:[]}},confidence_scores:{basic_info:0,specifications:0,features:0,overall:0},validation:{valid:!1,warnings:[],suggestions:[],completeness_score:0},summary:"Analysis failed",text_preview:"",analysis_timestamp:Date.now(),error:a instanceof Error?a.message:"Unknown error"})}}return t&&t(e.length,e.length),n}),"batchAnalyzeDocuments"),z=r(e=>{var l,o,i,d,y,f,h;const t=[],n=[],s=(l=e.extracted_data)==null?void 0:l.basic_info;(o=s==null?void 0:s.name)!=null&&o.trim()||t.push("产品名称不能为空"),(i=s==null?void 0:s.code)!=null&&i.trim()||t.push("产品代码不能为空"),(d=s==null?void 0:s.category)!=null&&d.trim()||t.push("产品分类不能为空");const c=((y=e.confidence_scores)==null?void 0:y.overall)||0;c<.5&&n.push("总体置信度较低 (".concat((c*100).toFixed(0),"%)"));const a=Object.keys(((f=e.extracted_data)==null?void 0:f.specifications)||{}).length>0,u=(((h=e.extracted_data)==null?void 0:h.features)||[]).length>0;return!a&&!u&&n.push("未提取到技术规格和产品特性信息"),{isValid:t.length===0,errors:t,warnings:n}},"validateAnalysisResult"),E=r(e=>{var u,l,o,i,d;if(!e.success)return"分析失败: ".concat(e.error||"未知错误");const t=(u=e.extracted_data)==null?void 0:u.basic_info,n=((l=e.confidence_scores)==null?void 0:l.overall)||0,s=[];t!=null&&t.name&&s.push("产品: ".concat(t.name)),t!=null&&t.code&&s.push("型号: ".concat(t.code)),t!=null&&t.category&&s.push("分类: ".concat(t.category));const c=Object.keys(((o=e.extracted_data)==null?void 0:o.specifications)||{}).length;c>0&&s.push("规格: ".concat(c,"项"));const a=((d=(i=e.extracted_data)==null?void 0:i.features)==null?void 0:d.length)||0;return a>0&&s.push("特性: ".concat(a,"项")),s.push("置信度: ".concat((n*100).toFixed(0),"%")),s.join(" | ")||"分析完成但信息有限"},"formatAnalysisSummary"),L=r((e,t)=>{const n=JSON.stringify(e,null,2),s=new Blob([n],{type:"application/json"}),c=URL.createObjectURL(s),a=document.createElement("a");a.href=c,a.download=t||"analysis-".concat(Date.now(),".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(c)},"exportAnalysisResult"),B=r(e=>{const t=e.length,n=e.filter(o=>o.success).length,s=t-n,c=t>0?n/t:0,a=e.filter(o=>o.success),u=a.length>0?a.reduce((o,i)=>{var d;return o+(((d=i.confidence_scores)==null?void 0:d.overall)||0)},0)/a.length:0,l=e.length>0?e.reduce((o,i)=>{var d;return o+(((d=i.document_info)==null?void 0:d.analysis_duration)||0)},0)/e.length:0;return{total:t,successful:n,failed:s,successRate:c,avgConfidence:u,avgDuration:l}},"calculateAnalysisStats");export{$ as analyzeDocument,b as batchAnalyzeDocuments,B as calculateAnalysisStats,O as createProductFromAnalysis,U as deleteAnalysisRecord,L as exportAnalysisResult,E as formatAnalysisSummary,S as getAnalysisHistory,j as getAnalysisResult,F as getAnalysisStatistics,D as getSupportedFormats,k as updateAnalysisModifications,z as validateAnalysisResult};
