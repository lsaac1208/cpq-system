const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/api-BHu6TLr6.js","js/vendor-http-BEJhHwQz.js","js/utils-BjNHK8wL.js","js/element-plus-DR0qywX_.js","js/vue-BMWQU0Ry.js","js/vendor-B3dkwCfs.js","assets/element-plus-5WCGhEuA.css","js/vendor-pdf-BGK3fMt2.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,n=(e,n)=>{for(var i in n||(n={}))a.call(n,i)&&o(e,i,n[i]);if(t)for(var i of t(n))s.call(n,i)&&o(e,i,n[i]);return e},i=(e,t,a)=>new Promise((s,o)=>{var n=e=>{try{r(a.next(e))}catch(t){o(t)}},i=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,i);r((a=a.apply(e,t)).next())});import{u as r,z as l,_ as u}from"./api-BHu6TLr6.js";import{z as c,r as d,Z as p,b as g,l as m,V as v,an as f,A as b,B as h,S as y,J as w,M as k,K as P,C as _,u as C,Q,P as S,U as j,F as A,R as x,a8 as L,x as N,aN as T,aw as q}from"./vue-BMWQU0Ry.js";import{aF as I}from"./vendor-B3dkwCfs.js";import{a3 as O,d as E,ac as z,t as R,a as M,aj as D,bk as V,J as F,bl as U,av as B,X as G,f as W,bm as J,bn as K}from"./element-plus-DR0qywX_.js";import{s as X}from"./utils-BjNHK8wL.js";import{_ as Z}from"./page-aianalysisenhanced.vue-9uq21fmn.js";import"./vendor-http-BEJhHwQz.js";import"./vendor-pdf-BGK3fMt2.js";import"./page-aianalysisenhanced.vue_vue_type_script_setup_true_lang.ts-ClScGMKq.js";/* empty css                                                                                    */!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const H={class:"global-loading-manager"},Y={class:"loading-content"},$={class:"loading-animation"},ee={class:"loading-text"},te={key:0,class:"loading-progress"},ae={class:"progress-details"},se={class:"progress-text"},oe={key:0,class:"estimated-time"},ne={key:1,class:"loading-actions"},ie={class:"feedback-content"},re={class:"feedback-text"},le={class:"feedback-title"},ue={key:0,class:"feedback-message"},ce={class:"feedback-actions"},de={key:0,class:"task-queue-indicator"},pe={class:"queue-header"},ge={class:"queue-title"},me={key:0,class:"queue-details"},ve={class:"task-info"},fe={class:"task-title"},be={class:"task-status"},he={key:0,class:"task-progress"},ye=Z(c({__name:"GlobalLoadingManager",setup(e,{expose:t}){const a=d(!1),s=d(!1),o=d("加载中..."),i=d(!1),r=d("info"),l=d(""),u=d(""),c=d(null),N=d(!1),T=d(!1),q=d([]),I=p({id:"",title:"处理中...",description:"正在执行操作，请稍候",status:"pending",progress:0,progressText:"",estimatedTime:0,showProgress:!1,allowCancel:!1});let J=null,K=null;g(()=>q.value.some(e=>"running"===e.status||"pending"===e.status));const Z=(e={})=>{Object.assign(I,n({id:Date.now().toString(),title:"处理中...",description:"正在执行操作，请稍候",status:"running",progress:0,progressText:"",estimatedTime:0,showProgress:!1,allowCancel:!1},e)),a.value=!0},ye=e=>{Object.assign(I,e)},we=()=>{a.value=!1,Object.assign(I,{status:"completed",progress:100})},ke=(e,t,a="",s,o=5e3)=>{r.value=e,l.value=t,u.value=a,c.value=s||null,i.value=!0,J&&clearTimeout(J),o>0&&(J=window.setTimeout(()=>{Pe()},o))},Pe=()=>{i.value=!1,c.value=null,J&&(clearTimeout(J),J=null)},_e=()=>{c.value&&(c.value.handler(),Pe())},Ce=e=>{const t=q.value.findIndex(t=>t.id===e);-1!==t&&(q.value.splice(t,1),0===t&&q.value.length>0?Qe():0===q.value.length&&(N.value=!1,we()))},Qe=()=>{const e=q.value[0];e&&(Z(e),e.status="running")},Se=()=>{I.onCancel&&I.onCancel(),I.status="cancelled",q.value[0]&&Ce(q.value[0].id),X.warning("操作已取消")},je=()=>{T.value=!T.value},Ae=e=>({pending:"等待中",running:"执行中",completed:"已完成",failed:"已失败",cancelled:"已取消"}[e]),xe=e=>{if(e<60)return"".concat(e,"秒");const t=Math.floor(e/60),a=e%60;return"".concat(t,"分").concat(a,"秒")};return t({startGlobalLoading:Z,updateGlobalLoading:ye,stopGlobalLoading:we,startPageLoading:(e="加载中...")=>{o.value=e,s.value=!0},stopPageLoading:()=>{s.value=!1},showFeedback:ke,showSuccess:(e,t="",a)=>{ke("success",e,t,a)},showWarning:(e,t="",a)=>{ke("warning",e,t,a)},showError:(e,t="",a)=>{ke("error",e,t,a,8e3)},showInfo:(e,t="",a)=>{ke("info",e,t,a)},hideFeedbackBar:Pe,addTask:e=>{const t=n({id:Date.now().toString(),title:"新任务",description:"",status:"pending",progress:0,progressText:"",estimatedTime:0,showProgress:!1,allowCancel:!1},e);return q.value.push(t),N.value=!0,1===q.value.length&&Qe(),t.id},updateTask:(e,t)=>{var a;const s=q.value.find(t=>t.id===e);s&&(Object.assign(s,t),(null==(a=q.value[0])?void 0:a.id)===e&&ye(t))},removeTask:Ce}),m(()=>{K=window.setInterval(()=>{},1e3)}),v(()=>{J&&clearTimeout(J),K&&clearInterval(K)}),(e,t)=>{const n=E,d=R,p=M,g=O,m=D,v=f("Menu"),J=W;return h(),b("div",H,[y(g,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"400px","align-center":"",class:"loading-dialog"},{default:P(()=>[_("div",Y,[_("div",$,[y(n,{class:"rotating",size:"48"},{default:P(()=>[y(C(z))]),_:1})]),_("div",ee,[_("h3",null,Q(I.title),1),_("p",null,Q(I.description),1)]),I.showProgress?(h(),b("div",te,[y(d,{percentage:I.progress,status:I.status,"stroke-width":8},null,8,["percentage","status"]),_("div",ae,[_("span",se,Q(I.progressText),1),I.estimatedTime>0?(h(),b("span",oe," 预计剩余: "+Q(xe(I.estimatedTime)),1)):k("",!0)])])):k("",!0),I.allowCancel?(h(),b("div",ne,[y(p,{type:"warning",size:"small",onClick:Se},{default:P(()=>t[1]||(t[1]=[S(" 取消操作 ",-1)])),_:1,__:[1]})])):k("",!0)])]),_:1},8,["modelValue"]),s.value?(h(),w(m,{key:0,text:o.value,background:"rgba(0, 0, 0.8)","element-loading-background":"rgba(0, 0, 0.8)","element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-svg-view-box":"-10, -10, 50, 50"},null,8,["text"])):k("",!0),y(j,{name:"slide-down"},{default:P(()=>[i.value?(h(),b("div",{key:0,class:A(["feedback-bar",r.value])},[_("div",ie,[y(n,{class:"feedback-icon"},{default:P(()=>["success"===r.value?(h(),w(C(V),{key:0})):k("",!0),"warning"===r.value?(h(),w(C(F),{key:1})):k("",!0),"error"===r.value?(h(),w(C(U),{key:2})):k("",!0),"info"===r.value?(h(),w(C(B),{key:3})):k("",!0)]),_:1}),_("div",re,[_("span",le,Q(l.value),1),u.value?(h(),b("span",ue,Q(u.value),1)):k("",!0)]),_("div",ce,[c.value?(h(),w(p,{key:0,type:"primary",size:"small",onClick:_e},{default:P(()=>[S(Q(c.value.text),1)]),_:1})):k("",!0),y(p,{link:"",size:"small",onClick:Pe},{default:P(()=>[y(n,null,{default:P(()=>[y(C(G))]),_:1})]),_:1})])])],2)):k("",!0)]),_:1}),y(j,{name:"slide-up"},{default:P(()=>[N.value&&q.value.length>0?(h(),b("div",de,[_("div",pe,[_("span",ge,[y(n,null,{default:P(()=>[y(v)]),_:1}),S(" 任务队列 ("+Q(q.value.length)+") ",1)]),y(p,{link:"",size:"small",onClick:je},{default:P(()=>[S(Q(T.value?"收起":"展开"),1)]),_:1})]),T.value?(h(),b("div",me,[(h(!0),b(x,null,L(q.value,(e,t)=>{return h(),b("div",{key:e.id,class:A(["queue-task",{active:0===t}])},[_("div",ve,[_("span",fe,Q(e.title),1),_("span",be,[y(J,{type:(a=e.status,{pending:"info",running:"primary",completed:"success",failed:"danger",cancelled:"warning"}[a]),size:"small"},{default:P(()=>[S(Q(Ae(e.status)),1)]),_:2},1032,["type"])])]),e.showProgress?(h(),b("div",he,[y(d,{percentage:e.progress,"stroke-width":4,"show-text":!1},null,8,["percentage"])])):k("",!0)],2);var a}),128))])):k("",!0)])):k("",!0)]),_:1})])}}}),[["__scopeId","data-v-1cbc3037"]]),we={id:"app"},ke=Z(c({__name:"App",setup(e){const t=r(),a=d();N("loadingManager",a);const s=()=>{"visible"!==document.visibilityState||t.token||localStorage.getItem("cpq_access_token")&&t.initializeAuth()};return m(()=>{t.initializeAuth(),document.addEventListener("visibilitychange",s)}),v(()=>{document.removeEventListener("visibilitychange",s)}),(e,t)=>{const s=f("router-view");return h(),b("div",we,[y(s),y(ye,{ref_key:"loadingManager",ref:a},null,512)])}}}),[["__scopeId","data-v-d80b6e15"]]),Pe=T({legacy:!1,locale:"en",fallbackLocale:"en",messages:{en:{common:{save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",view:"View",create:"Create",update:"Update",search:"Search",reset:"Reset",submit:"Submit",back:"Back",loading:"Loading...",success:"Success",error:"Error",warning:"Warning",info:"Information"},auth:{login:"Login",logout:"Logout",register:"Register",username:"Username",password:"Password",email:"Email",firstName:"First Name",lastName:"Last Name",confirmPassword:"Confirm Password",loginSuccess:"Login successful",logoutSuccess:"Logout successful",registerSuccess:"Registration successful"},navigation:{dashboard:"Dashboard",products:"Products",quotes:"Quotes",profile:"Profile"},dashboard:{welcome:"Welcome to CPQ System",activeProducts:"Active Products",totalQuotes:"Total Quotes",pendingQuotes:"Pending Quotes",totalRevenue:"Total Revenue",recentQuotes:"Recent Quotes",quickActions:"Quick Actions",createNewQuote:"Create New Quote",manageProducts:"Manage Products",viewAllQuotes:"View All Quotes"},products:{title:"Products",addProduct:"Add Product",editProduct:"Edit Product",productCode:"Product Code",productName:"Product Name",category:"Category",basePrice:"Base Price",description:"Description",status:"Status",active:"Active",inactive:"Inactive",allCategories:"All Categories"},quotes:{title:"Quotes",createQuote:"Create Quote",editQuote:"Edit Quote",quoteNumber:"Quote Number",customer:"Customer",company:"Company",status:"Status",amount:"Amount",created:"Created",draft:"Draft",pending:"Pending",approved:"Approved",rejected:"Rejected",expired:"Expired",customerInformation:"Customer Information",productSelection:"Product Selection",pricing:"Pricing",notes:"Notes"}},zh:{common:{save:"保存",cancel:"取消",edit:"编辑",delete:"删除",view:"查看",create:"创建",update:"更新",search:"搜索",reset:"重置",submit:"提交",back:"返回",loading:"加载中...",success:"成功",error:"错误",warning:"警告",info:"信息"},auth:{login:"登录",logout:"退出",register:"注册",username:"用户名",password:"密码",email:"邮箱",firstName:"名字",lastName:"姓氏",confirmPassword:"确认密码",loginSuccess:"登录成功",logoutSuccess:"退出成功",registerSuccess:"注册成功"},navigation:{dashboard:"仪表板",products:"产品",quotes:"报价",profile:"个人资料"},dashboard:{welcome:"欢迎使用CPQ系统",activeProducts:"活跃产品",totalQuotes:"总报价数",pendingQuotes:"待审批报价",totalRevenue:"总收入",recentQuotes:"最近报价",quickActions:"快速操作",createNewQuote:"创建新报价",manageProducts:"管理产品",viewAllQuotes:"查看所有报价"},products:{title:"产品",addProduct:"添加产品",editProduct:"编辑产品",productCode:"产品代码",productName:"产品名称",category:"类别",basePrice:"基础价格",description:"描述",status:"状态",active:"活跃",inactive:"停用",allCategories:"所有类别"},quotes:{title:"报价",createQuote:"创建报价",editQuote:"编辑报价",quoteNumber:"报价编号",customer:"客户",company:"公司",status:"状态",amount:"金额",created:"创建时间",draft:"草稿",pending:"待审批",approved:"已批准",rejected:"已拒绝",expired:"已过期",customerInformation:"客户信息",productSelection:"产品选择",pricing:"定价",notes:"备注"}}}}),_e=q(ke);for(const[Qe,Se]of Object.entries(J))_e.component(Qe,Se);const Ce=I();_e.use(Ce),_e.use(l),_e.use(K),_e.use(Pe),function(){i(this,null,function*(){const{useAuthStore:e}=yield u(()=>i(this,null,function*(){const{useAuthStore:e}=yield import("./api-BHu6TLr6.js").then(e=>e.A);return{useAuthStore:e}}),__vite__mapDeps([0,1,2,3,4,5,6,7])),t=e();try{if(t.initializeAuth(),t.isAuthenticated)try{yield t.loadUserProfile()}catch(a){}}catch(a){}_e.mount("#app")})}();
