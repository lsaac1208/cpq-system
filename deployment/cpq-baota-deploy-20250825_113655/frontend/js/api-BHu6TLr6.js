const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/page-layout.vue-B78OJwwf.js","js/page-layout.vue_vue_type_script_setup_true_lang.ts-Bea3qcFd.js","js/element-plus-DR0qywX_.js","js/vue-BMWQU0Ry.js","js/vendor-B3dkwCfs.js","assets/element-plus-5WCGhEuA.css","js/utils-BjNHK8wL.js","js/vendor-pdf-BGK3fMt2.js","js/page-aianalysisenhanced.vue-9uq21fmn.js","js/page-aianalysisenhanced.vue_vue_type_script_setup_true_lang.ts-ClScGMKq.js","assets/page-aianalysisenhanced.vue_vue_type_script_setup_true_lang-DGawKJCA.css","assets/page-aianalysisenhanced.vue_vue_type_style_index_0_scoped_3fbf611a_lang-CfaT8MIS.css","js/vendor-http-BEJhHwQz.js","assets/page-layout.vue_vue_type_style_index_0_scoped_db359045_lang-Dfc5NSJQ.css","js/page-dashboard.vue-CeoEd79q.js","js/page-dashboard.vue_vue_type_script_setup_true_lang.ts-Cn4KswG5.js","assets/page-dashboard.vue_vue_type_style_index_0_scoped_0c5f3432_lang-BPvGD_wq.css","js/page-products.vue-DOuFgKAE.js","js/page-products.vue_vue_type_script_setup_true_lang.ts-BpruBLMq.js","js/page-createquote.vue_vue_type_script_setup_true_lang.ts-3HW_4Kwy.js","js/page-createproduct.vue_vue_type_script_setup_true_lang.ts-C9H6GPKB.js","assets/page-createproduct.vue_vue_type_script_setup_true_lang-BOt3POul.css","assets/page-products.vue_vue_type_style_index_0_scoped_eb2f03dd_lang-CCUmd8BE.css","js/page-createproduct.vue-CZwq3sRJ.js","assets/page-createproduct.vue_vue_type_style_index_0_scoped_e9594031_lang-B1knDbYY.css","js/page-createproductai.vue-DWsfpZqu.js","js/page-createproductai.vue_vue_type_script_setup_true_lang.ts-DLLeciWB.js","assets/page-createproductai.vue_vue_type_script_setup_true_lang-BokhYJ8V.css","assets/page-createproductai.vue_vue_type_style_index_0_scoped_9ab95708_lang-CCkr-HLw.css","js/page-productdetail.vue-BEOemumG.js","js/page-productdetail.vue_vue_type_script_setup_true_lang.ts-BUAk2LYp.js","assets/page-productdetail.vue_vue_type_style_index_0_scoped_d267162d_lang-BD8WD6jB.css","js/page-searchpage.vue-CoXgRSKZ.js","js/page-searchpage.vue_vue_type_script_setup_true_lang.ts-6tw9eVtP.js","assets/page-searchpage.vue_vue_type_script_setup_true_lang-BH4o7LEe.css","assets/page-searchpage.vue_vue_type_style_index_0_scoped_0635c83b_lang-dyTpT4hL.css","js/page-quotes.vue-l7jcl0se.js","js/page-quotes.vue_vue_type_script_setup_true_lang.ts-CWoO3d4J.js","assets/page-quotes.vue_vue_type_style_index_0_scoped_fbe3e52d_lang-DP-zLOqw.css","js/page-createquote.vue-2iQJwSAL.js","assets/page-createquote.vue_vue_type_style_index_0_scoped_590e0e56_lang-CcbniyN6.css","js/page-quotedetail.vue-1rc3gsP-.js","js/page-quotedetail.vue_vue_type_script_setup_true_lang.ts-Bc3MkcYF.js","assets/page-quotedetail.vue_vue_type_style_index_0_scoped_aa5a659f_lang-B2OFZq15.css","js/page-settings.vue-SzqhxWmJ.js","js/page-settings.vue_vue_type_script_setup_true_lang.ts-DEbykbVS.js","assets/page-settings.vue_vue_type_script_setup_true_lang-CaetY_AL.css","assets/page-settings.vue_vue_type_style_index_0_scoped_ab63fd68_lang-CPyTTF7R.css","js/page-promptoptimization.vue-B0caRC6S.js","js/page-promptoptimization.vue_vue_type_script_setup_true_lang.ts-CenE1cq8.js","assets/page-promptoptimization.vue_vue_type_script_setup_true_lang-Bkgx9YwX.css","assets/page-promptoptimization.vue_vue_type_style_index_0_scoped_098081ab_lang-mtqWVUaw.css","js/page-documentcomparison.vue-DNUyiYcj.js","js/page-documentcomparison.vue_vue_type_script_setup_true_lang.ts-DEZfSzjM.js","assets/page-documentcomparison.vue_vue_type_script_setup_true_lang-BPmO9-CM.css","assets/page-documentcomparison.vue_vue_type_style_index_0_scoped_a3a40164_lang-QRCDh3Lz.css","js/page-batchanalysis.vue-HxCcQ3vz.js","js/page-batchanalysis.vue_vue_type_script_setup_true_lang.ts-ChC6Id0x.js","assets/page-batchanalysis.vue_vue_type_script_setup_true_lang-cZc54e4h.css","assets/page-batchanalysis.vue_vue_type_style_index_0_scoped_a997933d_lang-jAI3dNCh.css","js/page-batchanalysisresultssimple.vue-_vTJS3KO.js","js/page-batchanalysisresultssimple.vue_vue_type_script_setup_true_lang.ts-BKnUw-Cb.js","assets/page-batchanalysisresultssimple.vue_vue_type_style_index_0_scoped_7064121b_lang-CTRCBKvz.css","js/page-pricingdecision.vue-C_TommpS.js","js/page-pricingdecision.vue_vue_type_script_setup_true_lang.ts-CL-ChsA1.js","assets/page-pricingdecision.vue_vue_type_script_setup_true_lang-BNpY2KM4.css","assets/page-pricingdecision.vue_vue_type_style_index_0_scoped_6ee1757a_lang-Cu_egLCv.css","js/page-login.vue-BK-jWZSy.js","js/page-login.vue_vue_type_script_setup_true_lang.ts-DcXJfolf.js","assets/page-login.vue_vue_type_style_index_0_scoped_d1a15efd_lang-HevrezUU.css","js/page-register.vue-Czr5r1aD.js","js/page-register.vue_vue_type_script_setup_true_lang.ts-CDpA9cou.js","assets/page-register.vue_vue_type_style_index_0_scoped_e8c43d35_lang-BvzThd8c.css","js/page-notfound.vue-C5ZqUJgX.js","js/page-notfound.vue_vue_type_script_setup_true_lang.ts-Dpe8iOW9.js","assets/page-notfound.vue_vue_type_style_index_0_scoped_7e4acb65_lang-BT1L_HR5.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,c=(e,t,a)=>s(e,"symbol"!=typeof t?t+"":t,a),i=(e,t,a)=>new Promise((n,r)=>{var o=e=>{try{c(a.next(e))}catch(t){r(t)}},s=e=>{try{c(a.throw(e))}catch(t){r(t)}},c=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,s);c((a=a.apply(e,t)).next())});import{a as u}from"./vendor-http-BEJhHwQz.js";import{s as l}from"./utils-BjNHK8wL.js";import{d}from"./vendor-B3dkwCfs.js";import{c as p,a as h,r as m,b as g,d as _}from"./vue-BMWQU0Ry.js";const y={},f=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in y)return;y[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(e,'"]').concat(n)))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",()=>a(new Error("Unable to preload CSS for ".concat(e))))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},v=[{path:"/",name:"Layout",component:()=>f(()=>import("./page-layout.vue-B78OJwwf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),children:[{path:"",name:"Dashboard",component:()=>f(()=>import("./page-dashboard.vue-CeoEd79q.js"),__vite__mapDeps([14,15,2,3,4,5,8,9,6,7,10,11,12,16])),meta:{requiresAuth:!0}},{path:"/products",name:"Products",component:()=>f(()=>import("./page-products.vue-DOuFgKAE.js"),__vite__mapDeps([17,18,2,3,4,5,19,6,7,20,8,9,10,11,21,12,22])),meta:{requiresAuth:!0}},{path:"/products/create",name:"CreateProduct",component:()=>f(()=>import("./page-createproduct.vue-CZwq3sRJ.js"),__vite__mapDeps([23,20,2,3,4,5,6,7,8,9,10,11,21,12,24])),meta:{requiresAuth:!0}},{path:"/products/create-ai",name:"CreateProductAI",component:()=>f(()=>import("./page-createproductai.vue-DWsfpZqu.js"),__vite__mapDeps([25,26,2,3,4,5,6,7,8,9,10,11,27,12,28])),meta:{requiresAuth:!0}},{path:"/products/:id",name:"ProductDetail",component:()=>f(()=>import("./page-productdetail.vue-BEOemumG.js"),__vite__mapDeps([29,30,2,3,4,5,6,7,20,8,9,10,11,21,12,31])),meta:{requiresAuth:!0}},{path:"/search",name:"Search",component:()=>f(()=>import("./page-searchpage.vue-CoXgRSKZ.js"),__vite__mapDeps([32,33,2,3,4,5,6,7,8,9,10,11,34,12,35])),meta:{requiresAuth:!0}},{path:"/quotes",name:"Quotes",component:()=>f(()=>import("./page-quotes.vue-l7jcl0se.js"),__vite__mapDeps([36,37,2,3,4,5,6,7,8,9,10,11,12,38])),meta:{requiresAuth:!0}},{path:"/quotes/create",name:"CreateQuote",component:()=>f(()=>import("./page-createquote.vue-2iQJwSAL.js"),__vite__mapDeps([39,19,2,3,4,5,6,7,8,9,10,11,12,40])),meta:{requiresAuth:!0}},{path:"/quotes/:id",name:"QuoteDetail",component:()=>f(()=>import("./page-quotedetail.vue-1rc3gsP-.js"),__vite__mapDeps([41,42,2,3,4,5,6,7,8,9,10,11,12,43])),meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:()=>f(()=>import("./page-settings.vue-SzqhxWmJ.js"),__vite__mapDeps([44,45,3,4,8,9,2,5,6,7,10,11,46,12,47])),meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/prompt-optimization",name:"PromptOptimization",component:()=>f(()=>import("./page-promptoptimization.vue-B0caRC6S.js"),__vite__mapDeps([48,49,2,3,4,5,6,7,8,9,10,11,50,12,51])),meta:{requiresAuth:!0}},{path:"/document-comparison",name:"DocumentComparison",component:()=>f(()=>import("./page-documentcomparison.vue-DNUyiYcj.js"),__vite__mapDeps([52,53,2,3,4,5,6,7,8,9,10,11,54,12,55])),meta:{requiresAuth:!0}},{path:"/batch-analysis",name:"BatchAnalysis",component:()=>f(()=>import("./page-batchanalysis.vue-HxCcQ3vz.js"),__vite__mapDeps([56,57,2,3,4,5,6,7,8,9,10,11,58,12,59])),meta:{requiresAuth:!0}},{path:"/batch-analysis/results/:jobId",name:"BatchAnalysisResults",component:()=>f(()=>import("./page-batchanalysisresultssimple.vue-_vTJS3KO.js"),__vite__mapDeps([60,61,2,3,4,5,6,7,8,9,10,11,12,62])),meta:{requiresAuth:!0}},{path:"/ai-analysis-enhanced",name:"AIAnalysisEnhanced",component:()=>f(()=>import("./page-aianalysisenhanced.vue-9uq21fmn.js").then(e=>e.A),__vite__mapDeps([8,9,2,3,4,5,6,7,10,11])),meta:{requiresAuth:!0}},{path:"/pricing-decision",name:"PricingDecision",component:()=>f(()=>import("./page-pricingdecision.vue-C_TommpS.js"),__vite__mapDeps([63,64,2,3,4,5,8,9,6,7,10,11,65,12,66])),meta:{requiresAuth:!0}}]},{path:"/login",name:"Login",component:()=>f(()=>import("./page-login.vue-BK-jWZSy.js"),__vite__mapDeps([67,68,2,3,4,5,6,7,8,9,10,11,12,69])),meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:()=>f(()=>import("./page-register.vue-Czr5r1aD.js"),__vite__mapDeps([70,71,2,3,4,5,6,7,8,9,10,11,12,72])),meta:{requiresGuest:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>f(()=>import("./page-notfound.vue-C5ZqUJgX.js"),__vite__mapDeps([73,74,2,3,4,5,8,9,6,7,10,11,12,75]))}],A=p({history:h(),routes:v});A.beforeEach((e,t,a)=>i(void 0,null,function*(){const t=k();if(e.meta.requiresAuth&&!t.isAuthenticated&&localStorage.getItem("cpq_access_token")&&(t.initializeAuth(),!t.user))try{yield t.loadUserProfile()}catch(n){}if(!e.meta.requiresAuth||t.isAuthenticated)if(e.meta.requiresGuest&&t.isAuthenticated)a("/");else{if(e.meta.requiresAdmin){if(t.isAuthenticated&&!t.user)try{yield t.loadUserProfile()}catch(n){}if(!t.isAdmin)return void a("/")}a()}else a("/login")}));const q=u.create({baseURL:"http://cpqh.100yse.com/api/v1",timeout:12e4,headers:{"Content-Type":"application/json"}});q.interceptors.request.use(e=>{const t=k();return t.token&&e.headers&&(e.headers.Authorization="Bearer ".concat(t.token)),e.data instanceof FormData&&e.headers&&delete e.headers["Content-Type"],e},e=>Promise.reject(e)),q.interceptors.response.use(e=>e,e=>i(void 0,null,function*(){const t=k(),a=e.config;if(e.response){const{status:r,data:o}=e.response;switch(r){case 401:if(!a._retry&&t.refreshToken){a._retry=!0;try{return yield t.refreshAccessToken(),a.headers.Authorization="Bearer ".concat(t.token),q(a)}catch(n){t.logout(),A.push("/login"),l.error("登录已过期，请重新登录");break}}else t.logout(),A.push("/login"),l.error("登录已过期，请重新登录");break;case 403:l.error("Access forbidden");break;case 404:l.error("Resource not found");break;case 422:l.error("Validation error");break;case 500:l.error("Server error. Please try again later.");break;default:l.error((null==o?void 0:o.error)||"An error occurred")}}else e.request?l.error("Network error. Please check your connection."):l.error("Request failed");return Promise.reject(e)}));const b=e=>q.post("/auth/login",e),E=e=>q.post("/auth/register",e),S=()=>q.post("/auth/refresh"),P=()=>q.get("/auth/me"),k=d("auth",()=>{const e=m(null),t=m(null),a=m(null),n=m(!1),r=g(()=>!!t.value),o=g(()=>{var t;return(null==(t=e.value)?void 0:t.role)||"sales"}),s=g(()=>"admin"===o.value),c=g(()=>"engineer"===o.value),u=g(()=>"manager"===o.value),l=g(()=>["engineer","admin","manager"].includes(o.value)),d=g(()=>["engineer","admin","manager"].includes(o.value)),p=g(()=>["engineer","admin","manager"].includes(o.value)),h=g(()=>r.value&&p.value),y=()=>{e.value=null,t.value=null,a.value=null,localStorage.removeItem("cpq_access_token"),localStorage.removeItem("cpq_refresh_token")};return{user:_(e),token:_(t),refreshToken:_(a),loading:_(n),isAuthenticated:r,userRole:o,isAdmin:s,isEngineer:c,isManager:u,canEditProducts:l,canDeleteProducts:d,canUseAIAnalysis:p,hasAIAnalysisRole:h,initializeAuth:()=>{const e=localStorage.getItem("cpq_access_token"),n=localStorage.getItem("cpq_refresh_token");e&&(t.value=e,a.value=n)},loadUserProfile:()=>i(void 0,null,function*(){if(t.value)try{const t=yield P();e.value=t.data.user}catch(a){}}),login:r=>i(void 0,null,function*(){n.value=!0;try{const n=yield b(r);if(!(n&&n.data&&n.data.data&&n.data.data.tokens))throw new Error("登录响应格式错误");return t.value=n.data.data.tokens.access_token,a.value=n.data.data.tokens.refresh_token,e.value=n.data.data.user,localStorage.setItem("cpq_access_token",n.data.data.tokens.access_token),localStorage.setItem("cpq_refresh_token",n.data.data.tokens.refresh_token),n}catch(o){throw o}finally{n.value=!1}}),register:r=>i(void 0,null,function*(){n.value=!0;try{const n=yield E(r);return t.value=n.data.data.tokens.access_token,a.value=n.data.data.tokens.refresh_token,e.value=n.data.data.user,localStorage.setItem("cpq_access_token",n.data.data.tokens.access_token),localStorage.setItem("cpq_refresh_token",n.data.data.tokens.refresh_token),n}finally{n.value=!1}}),refreshAccessToken:()=>i(void 0,null,function*(){try{const e=yield S();return t.value=e.data.access_token,localStorage.setItem("cpq_access_token",e.data.access_token),e}catch(e){throw y(),e}}),logout:()=>{y()},updateUser:t=>{e.value=t}}}),j=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:k},Symbol.toStringTag,{value:"Module"})),w=e=>q.get("/quotes",{params:e}),O=e=>q.get("/quotes/".concat(e)),I=e=>q.post("/quotes",e),D=(e,t)=>q.put("/quotes/".concat(e),t),R=(e,t)=>q.patch("/quotes/".concat(e,"/status"),t),T=e=>q.delete("/quotes/".concat(e)),C=e=>q.get("/multi-quotes",{params:e}),L=e=>q.get("/multi-quotes/".concat(e)),V=e=>q.post("/multi-quotes",e),x=(e,t)=>q.put("/multi-quotes/".concat(e),t),F=(e,t)=>q.put("/multi-quotes/".concat(e,"/status"),t),z=e=>q.delete("/multi-quotes/".concat(e)),U={getAllQuotes(e){return i(this,null,function*(){var t,a;const n=[],r=[];let o=0,s=0;const[c,i]=yield Promise.allSettled([w(e).catch(e=>null),C(e).catch(e=>null)]);if("fulfilled"===c.status&&c.value){const e=c.value;e.quotes&&Array.isArray(e.quotes)&&(n.push(...e.quotes),o=(null==(t=e.pagination)?void 0:t.total)||e.quotes.length)}if("fulfilled"===i.status&&i.value){const e=i.value;e.quotes&&Array.isArray(e.quotes)?(r.push(...e.quotes),s=(null==(a=e.pagination)?void 0:a.total)||e.quotes.length):Array.isArray(e)&&(r.push(...e),s=e.length)}const u=[...n,...r],l=o+s;u.sort((e,t)=>{const a=new Date(e.created_at||0).getTime();return new Date(t.created_at||0).getTime()-a});const d=(null==e?void 0:e.page)||1,p=(null==e?void 0:e.per_page)||20,h=(d-1)*p,m=h+p;return{quotes:u.slice(h,m),pagination:{page:d,per_page:p,total:l,pages:Math.ceil(l/p)}}})},createQuote(e){return i(this,null,function*(){if(e.items&&e.items.length>0)return V(e);if(e.product_id)return I(e);throw new Error("Quote must have either items array or product_id")})},getQuote(e){return i(this,null,function*(){var t;try{return yield L(e)}catch(a){if(404===(null==(t=a.response)?void 0:t.status))return O(e);throw a}})},updateQuote(e,t){return i(this,null,function*(){var a;try{return yield x(e,t)}catch(n){if(404===(null==(a=n.response)?void 0:a.status))return D(e,t);throw n}})},updateQuoteStatus(e,t){return i(this,null,function*(){var a;try{return yield F(e,t)}catch(n){if(404===(null==(a=n.response)?void 0:a.status))return R(e,t);throw n}})},deleteQuote(e){return i(this,null,function*(){var t;try{return yield z(e)}catch(a){if(404===(null==(t=a.response)?void 0:t.status))return T(e);throw a}})}},N={getProducts(e){return i(this,null,function*(){try{const t=yield q.get("/products",{params:e});return t.data||t}catch(t){throw t}})},getProduct(e){return i(this,null,function*(){try{const t=yield q.get("/products/".concat(e));return t.data||t}catch(t){throw t}})},createProduct(e){return i(this,null,function*(){try{const t=yield q.post("/products",e);return t.data||t}catch(t){throw t}})},updateProduct(e,t){return i(this,null,function*(){try{const a=yield q.put("/products/".concat(e),t);return a.data||a}catch(a){throw a}})},deleteProduct(e){return i(this,null,function*(){try{const t=yield q.delete("/products/".concat(e));return t.data||t}catch(t){throw t}})},getCategories(){return i(this,null,function*(){try{const e=yield q.get("/products/categories");return e.data||e}catch(e){return{categories:[]}}})},uploadImage:(e,t)=>q.post("/products/".concat(e,"/gallery/upload"),t).then(e=>e.data),deleteImage:e=>q.delete("/products/".concat(e,"/delete-image")).then(e=>e.data)},Q="/ai-analysis",B=()=>q.get("".concat(Q,"/supported-formats")),M=e=>{const t=new FormData;return t.append("document",e),q.post("".concat(Q,"/analyze-document"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4,"axios-retry":{retries:1,retryDelay:e=>2e3*e,retryCondition:e=>"ECONNABORTED"===e.code||e.response&&e.response.status>=500}})},J=e=>q.post("".concat(Q,"/create-product"),e),H=e=>q.get("".concat(Q,"/history"),{params:e}),G=e=>q.get("".concat(Q,"/statistics"),{params:e}),W=Object.freeze(Object.defineProperty({__proto__:null,analyzeDocument:M,batchAnalyzeDocuments:(e,t)=>i(void 0,null,function*(){const a=[];for(let r=0;r<e.length;r++){const o=e[r];try{t&&t(r,e.length,o.name);const n=yield M(o);a.push(n)}catch(n){a.push({success:!1,document_info:{filename:o.name,mimetype:o.type,size:o.size,type:o.name.split(".").pop()||"unknown"},extracted_data:{basic_info:{name:"",code:"",category:"",base_price:0,description:""},specifications:{},features:[],application_scenarios:[],accessories:[],certificates:[],support_info:{warranty:{period:"",coverage:"",terms:[]},contact_info:{},service_promises:[]}},confidence_scores:{basic_info:0,specifications:0,features:0,overall:0},validation:{valid:!1,warnings:[],suggestions:[],completeness_score:0},summary:"Analysis failed",text_preview:"",analysis_timestamp:Date.now(),error:n instanceof Error?n.message:"Unknown error"})}}return t&&t(e.length,e.length),a}),calculateAnalysisStats:e=>{const t=e.length,a=e.filter(e=>e.success).length,n=t-a,r=t>0?a/t:0,o=e.filter(e=>e.success);return{total:t,successful:a,failed:n,successRate:r,avgConfidence:o.length>0?o.reduce((e,t)=>{var a;return e+((null==(a=t.confidence_scores)?void 0:a.overall)||0)},0)/o.length:0,avgDuration:e.length>0?e.reduce((e,t)=>{var a;return e+((null==(a=t.document_info)?void 0:a.analysis_duration)||0)},0)/e.length:0}},createProductFromAnalysis:J,deleteAnalysisRecord:e=>q.delete("".concat(Q,"/analysis/").concat(e)),exportAnalysisResult:(e,t)=>{const a=JSON.stringify(e,null,2),n=new Blob([a],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=t||"analysis-".concat(Date.now(),".json"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)},formatAnalysisSummary:e=>{var t,a,n,r,o;if(!e.success)return"分析失败: ".concat(e.error||"未知错误");const s=null==(t=e.extracted_data)?void 0:t.basic_info,c=(null==(a=e.confidence_scores)?void 0:a.overall)||0,i=[];(null==s?void 0:s.name)&&i.push("产品: ".concat(s.name)),(null==s?void 0:s.code)&&i.push("型号: ".concat(s.code)),(null==s?void 0:s.category)&&i.push("分类: ".concat(s.category));const u=Object.keys((null==(n=e.extracted_data)?void 0:n.specifications)||{}).length;u>0&&i.push("规格: ".concat(u,"项"));const l=(null==(o=null==(r=e.extracted_data)?void 0:r.features)?void 0:o.length)||0;return l>0&&i.push("特性: ".concat(l,"项")),i.push("置信度: ".concat((100*c).toFixed(0),"%")),i.join(" | ")||"分析完成但信息有限"},getAnalysisHistory:H,getAnalysisResult:e=>q.get("".concat(Q,"/analysis/").concat(e)),getAnalysisStatistics:G,getSupportedFormats:B,updateAnalysisModifications:(e,t)=>q.put("".concat(Q,"/analysis/").concat(e),t),validateAnalysisResult:e=>{var t,a,n,r,o,s,c;const i=[],u=[],l=null==(t=e.extracted_data)?void 0:t.basic_info;(null==(a=null==l?void 0:l.name)?void 0:a.trim())||i.push("产品名称不能为空"),(null==(n=null==l?void 0:l.code)?void 0:n.trim())||i.push("产品代码不能为空"),(null==(r=null==l?void 0:l.category)?void 0:r.trim())||i.push("产品分类不能为空");const d=(null==(o=e.confidence_scores)?void 0:o.overall)||0;d<.5&&u.push("总体置信度较低 (".concat((100*d).toFixed(0),"%)"));const p=Object.keys((null==(s=e.extracted_data)?void 0:s.specifications)||{}).length>0,h=((null==(c=e.extracted_data)?void 0:c.features)||[]).length>0;return p||h||u.push("未提取到技术规格和产品特性信息"),{isValid:0===i.length,errors:i,warnings:u}}},Symbol.toStringTag,{value:"Module"})),K={getSettings(){return i(this,null,function*(){return(yield q.get("/settings")).data.data})},updateSettings(e){return i(this,null,function*(){return(yield q.put("/settings",e)).data.data})},getCompanyInfo(){return i(this,null,function*(){return(yield q.get("/settings/company")).data.data})},updateCompanyInfo(e){return i(this,null,function*(){return(yield q.put("/settings/company",e)).data.data})},testEmailSettings(){return i(this,null,function*(){return{message:(yield q.post("/settings/test-email")).data.message}})},resetSettings(){return i(this,null,function*(){return(yield q.post("/settings/reset")).data.data})}},X=new class{constructor(){c(this,"cache",null),c(this,"lastFetch",null),c(this,"CACHE_DURATION",3e5)}getSettings(e=!1){return i(this,null,function*(){const t=new Date;return(e||!this.cache||!this.lastFetch||t.getTime()-this.lastFetch.getTime()>this.CACHE_DURATION)&&(this.cache=yield K.getSettings(),this.lastFetch=t),this.cache})}updateCache(e){this.cache=e,this.lastFetch=new Date}clearCache(){this.cache=null,this.lastFetch=null}},Y={getSettings(e=!1){return i(this,null,function*(){return X.getSettings(e)})},updateSettings(e){return i(this,null,function*(){const t=yield K.updateSettings(e);return X.updateCache(t),t})},getCompanyInfo(e=!1){return i(this,null,function*(){return(yield this.getSettings(e)).company_info})},updateCompanyInfo(e){return i(this,null,function*(){const c=yield K.updateCompanyInfo(e),i=(u=((e,t)=>{for(var a in t||(t={}))r.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))o.call(t,a)&&s(e,a,t[a]);return e})({},yield this.getSettings()),t(u,a({company_info:c})));var u;return X.updateCache(i),c})},resetSettings(){return i(this,null,function*(){const e=yield K.resetSettings();return X.updateCache(e),e})},testEmailSettings(){return i(this,null,function*(){return K.testEmailSettings()})},clearCache(){X.clearCache()}};class Z{static searchProducts(){return i(this,arguments,function*(e={}){const t=new URLSearchParams;e.query&&t.append("query",e.query),e.filters&&Object.entries(e.filters).forEach(([e,a])=>{null!=a&&""!==a&&t.append(e,String(a))}),e.sort&&"relevance"!==e.sort&&t.append("sort",e.sort),e.page&&e.page>1&&t.append("page",String(e.page)),e.per_page&&20!==e.per_page&&t.append("per_page",String(e.per_page));const a=yield q.get("/search/products?".concat(t.toString()));let n=a;if(a&&a.success&&a.data&&(n=a.data),!n||"object"!=typeof n)throw new Error("Invalid response format from search API");return{products:n.products||[],pagination:n.pagination||{page:1,per_page:20,total:0,pages:0},search_info:n.search_info||{query:e.query||"",total_results:0,search_time:(new Date).toISOString(),filters_applied:e.filters||{}}}})}static getSearchSuggestions(e,t=10){return i(this,null,function*(){return!e||e.length<2?[]:(yield q.get("/search/products/suggestions",{params:{query:e,limit:t}})).suggestions||[]})}static getHotSearches(e=10,t=7){return i(this,null,function*(){return(yield q.get("/search/products/hot",{params:{limit:e,days:t}})).hot_searches||[]})}static batchSearchProducts(e){return i(this,arguments,function*(e,t={}){return yield q.post("/search/products/batch",{queries:e,options:t})})}static batchSearchFromFile(e){return i(this,arguments,function*(e,t={}){const a=new FormData;return a.append("file",e),t.query_column&&a.append("query_column",t.query_column),t.per_query&&a.append("per_query",String(t.per_query)),yield q.post("/search/products/batch/upload",a,{headers:{"Content-Type":"multipart/form-data"}})})}static exportBatchResults(e){return i(this,null,function*(){return yield q.post("/search/products/batch/export",{results:e},{responseType:"blob"})})}static getSearchStats(e=30){return i(this,null,function*(){return(yield q.get("/search/stats",{params:{days:e}})).stats})}}const $="/prompt-optimization",ee=e=>q.post("".concat($,"/optimize"),e),te=e=>q.get("".concat($,"/templates"),{params:e}),ae=e=>{const t=new FormData;return e.documents.forEach((e,a)=>{t.append("document_".concat(a),e.file),t.append("document_".concat(a,"_name"),e.name||e.file.name),e.description&&t.append("document_".concat(a,"_description"),e.description)}),t.append("comparison_config",JSON.stringify(e.comparison_config)),e.analysis_focus&&t.append("analysis_focus",JSON.stringify(e.analysis_focus)),q.post("".concat("/document-comparison","/compare"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5})},ne="/batch-analysis",re=e=>{const t=new FormData;return e.documents.forEach(e=>{t.append("files",e)}),t.append("settings",JSON.stringify(e.analysis_config)),t.append("priority","0"),e.batch_name&&t.append("batch_name",e.batch_name),e.description&&t.append("description",e.description),q.post("".concat(ne,"/submit"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})},oe=e=>q.get("".concat(ne,"/jobs/").concat(e,"/status")),se=e=>q.post("".concat(ne,"/jobs/").concat(e,"/cancel")),ce=e=>q.get("".concat(ne,"/history"),{params:e}),ie=e=>q.get("".concat(ne,"/statistics"),{params:e}),ue=e=>q.get("".concat(ne,"/jobs/").concat(e,"/results")),le=e=>q.post("".concat(ne,"/jobs/").concat(e,"/start")),de=(e,t)=>q.post("".concat(ne,"/retry/").concat(e),t),pe=e=>q.delete("".concat(ne,"/record/").concat(e)),he=()=>q.delete("".concat(ne,"/history/clear")),me=()=>q.get("".concat(ne,"/system/status")),ge={generateRecommendations(e){return i(this,null,function*(){return(yield q.get("/pricing-decision/recommendations/".concat(e))).data})},getMarketAnalysis(e){return i(this,null,function*(){return(yield q.get("/pricing-decision/market-analysis/".concat(e))).data})},getProductRecommendations(e){return i(this,null,function*(){return(yield q.get("/pricing-decision/product-recommendations/".concat(e))).data})},getPricingStrategies(e){return i(this,null,function*(){return(yield q.get("/pricing-decision/pricing-strategies/".concat(e))).data})},getCompletedJobs(){return i(this,null,function*(){return(yield q.get("/pricing-decision/batch-jobs")).data})},createQuoteFromRecommendation(e){return i(this,null,function*(){return(yield q.post("/pricing-decision/create-quote",e)).data})},exportRecommendations(e){return i(this,null,function*(){return(yield q.get("/pricing-decision/export-recommendations/".concat(e))).data})}};export{j as A,W as B,Z as S,f as _,M as a,se as b,J as c,ce as d,pe as e,he as f,G as g,ie as h,me as i,oe as j,le as k,ue as l,q as m,B as n,U as o,N as p,H as q,de as r,re as s,ae as t,k as u,ge as v,te as w,ee as x,Y as y,A as z};
