var R=Object.defineProperty;var _=(b,c)=>R(b,"name",{value:c,configurable:!0});var w=(b,c,u)=>new Promise((x,f)=>{var p=r=>{try{g(u.next(r))}catch(m){f(m)}},E=r=>{try{g(u.throw(r))}catch(m){f(m)}},g=r=>r.done?x(r.value):Promise.resolve(r.value).then(p,E);g((u=u.apply(b,c)).next())});import{s as y,_ as j}from"./index-CoBZUWE1.js";/* empty css                         *//* empty css                 *//* empty css                *//* empty css                           */import{x as q,r as A,j as z,y as Q,A as t,Q as e,I as o,M as s,u as i,aC as D,z as H}from"./vendor-vue-XfLkFKXI.js";import{a3 as J,b as O,O as U,a4 as G,V as K,a5 as L,j as W,J as P,d as X,a6 as Y,a7 as T,a8 as Z,a9 as $,aa as tt,ab as lt,ac as et,ad as ot,ae as k}from"./vendor-ui-CE-ZhXxH.js";import{P as st}from"./ProductForm-D0V7EeKH.js";import{p as V}from"./products-CqbSQiZB.js";import"./vendor-pdf-BeW0Xq92.js";import"./vendor-utils-B8vW8fJV.js";/* empty css                *//* empty css                    *//* empty css                 *//* empty css                       *//* empty css                        *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                  *//* empty css                     *//* empty css               */import"./el-form-item-l0sNRNKZ.js";import"./ProductGallery-B8sbjOQ2.js";/* empty css                        *//* empty css                         *//* empty css                 */const at={class:"create-product"},nt={class:"page-header"},rt={class:"header-content"},it={class:"page-title"},ut={class:"card-title"},dt={class:"mode-options"},ct={class:"mode-option active"},pt={class:"mode-icon"},mt={class:"mode-status"},_t={class:"mode-icon"},ft={class:"mode-status"},gt={class:"card-title"},vt={class:"card-title"},Ct=q({__name:"CreateProduct",setup(b){const c=D(),u=A(!1),x=A([]),f=A(["basic"]),p=A();z(()=>w(this,null,function*(){yield E()}));const E=_(()=>w(this,null,function*(){try{const v=yield V.getCategories();x.value=v.categories||[]}catch(v){y.error("加载产品分类失败")}}),"loadCategories"),g=_((v,l)=>w(this,null,function*(){var C,I,a;u.value=!0;try{const n=yield V.createProduct(v);n&&n.product&&n.product.id?(y.success("产品创建成功！"),l&&((C=p.value)!=null&&C.uploadImageAfterCreate)&&(yield p.value.uploadImageAfterCreate(n.product.id.toString())),setTimeout(()=>{c.push({name:"ProductDetail",params:{id:n.product.id}})},1500)):y.error("产品创建失败：服务器响应异常")}catch(n){let d="产品创建失败";(a=(I=n.response)==null?void 0:I.data)!=null&&a.error?d=n.response.data.error:n.message&&(d=n.message),y.error(d)}finally{u.value=!1}}),"handleSubmit"),r=_(()=>{k.confirm("确定要离开吗？未保存的数据将会丢失。","确认离开",{confirmButtonText:"确定离开",cancelButtonText:"继续编辑",type:"warning"}).then(()=>{c.push({name:"Products"})}).catch(()=>{})},"handleCancel"),m=_(()=>{k.confirm("切换到AI智能创建模式？当前填写的数据将会丢失。","切换创建模式",{confirmButtonText:"切换到AI模式",cancelButtonText:"继续手动创建",type:"info"}).then(()=>{c.push({name:"CreateProductAI"})}).catch(()=>{})},"switchToAIMode"),M=_(()=>{k.confirm("确定要重置表单吗？所有填写的数据将会清空。","重置表单",{confirmButtonText:"确定重置",cancelButtonText:"取消",type:"warning"}).then(()=>{p.value&&location.reload(),y.success("表单已重置")}).catch(()=>{})},"resetForm");return document.title="创建产品 - CPQ系统",(v,l)=>{const C=G,I=J,a=O,n=W,d=X,h=U,F=Z,B=et,S=lt;return H(),Q("div",at,[t("div",nt,[e(I,{separator:"/"},{default:o(()=>[e(C,{to:{name:"Products"}},{default:o(()=>l[1]||(l[1]=[s("产品管理",-1)])),_:1,__:[1]}),e(C,null,{default:o(()=>l[2]||(l[2]=[s("创建产品",-1)])),_:1,__:[2]})]),_:1}),t("div",rt,[t("h1",it,[e(a,null,{default:o(()=>[e(i(K))]),_:1}),l[3]||(l[3]=s(" 创建产品 ",-1))]),l[4]||(l[4]=t("p",{class:"page-description"}," 手动录入产品详细信息，支持完整的产品信息管理 ",-1))])]),e(h,{class:"mode-selection-card"},{header:o(()=>[t("span",ut,[e(a,null,{default:o(()=>[e(i(T))]),_:1}),l[5]||(l[5]=s(" 创建模式选择 ",-1))])]),default:o(()=>[t("div",dt,[t("div",ct,[t("div",pt,[e(a,null,{default:o(()=>[e(i(L))]),_:1})]),l[7]||(l[7]=t("div",{class:"mode-info"},[t("h3",null,"手动创建"),t("p",null,"逐步填写产品信息，适合精确控制产品详情")],-1)),t("div",mt,[e(n,{type:"primary"},{default:o(()=>l[6]||(l[6]=[s("当前模式",-1)])),_:1,__:[6]})])]),t("div",{class:"mode-option",onClick:m},[t("div",_t,[e(a,null,{default:o(()=>[e(i(P))]),_:1})]),l[9]||(l[9]=t("div",{class:"mode-info"},[t("h3",null,"AI智能创建"),t("p",null,"上传文档，AI自动提取产品信息，快速高效")],-1)),t("div",ft,[e(d,{type:"success",size:"small"},{default:o(()=>[e(a,null,{default:o(()=>[e(i(Y))]),_:1}),l[8]||(l[8]=s(" 切换模式 ",-1))]),_:1,__:[8]})])])])]),_:1}),e(st,{ref_key:"productFormRef",ref:p,categories:x.value,loading:u.value,onSubmit:g,onCancel:r},null,8,["categories","loading"]),e(h,{class:"quick-actions"},{header:o(()=>[t("span",gt,[e(a,null,{default:o(()=>[e(i(T))]),_:1}),l[10]||(l[10]=s(" 快速操作 ",-1))])]),default:o(()=>[e(F,{wrap:""},{default:o(()=>[e(d,{onClick:r},{default:o(()=>[e(a,null,{default:o(()=>[e(i($))]),_:1}),l[11]||(l[11]=s(" 返回列表 ",-1))]),_:1,__:[11]}),e(d,{type:"success",onClick:m},{default:o(()=>[e(a,null,{default:o(()=>[e(i(P))]),_:1}),l[12]||(l[12]=s(" AI智能创建 ",-1))]),_:1,__:[12]}),e(d,{type:"warning",onClick:M},{default:o(()=>[e(a,null,{default:o(()=>[e(i(tt))]),_:1}),l[13]||(l[13]=s(" 重置表单 ",-1))]),_:1,__:[13]})]),_:1})]),_:1}),e(h,{class:"help-card"},{header:o(()=>[t("span",vt,[e(a,null,{default:o(()=>[e(i(ot))]),_:1}),l[14]||(l[14]=s(" 填写指南 ",-1))])]),default:o(()=>[e(S,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=N=>f.value=N)},{default:o(()=>[e(B,{title:"基本信息填写",name:"basic"},{default:o(()=>l[15]||(l[15]=[t("div",{class:"help-content"},[t("p",null,[t("strong",null,"产品名称:"),s(" 简洁明了的产品名称，便于识别和搜索")]),t("p",null,[t("strong",null,"产品代码:"),s(" 唯一的产品标识符，建议使用字母数字组合")]),t("p",null,[t("strong",null,"分类:"),s(" 产品所属类别，可选择现有分类或创建新分类")]),t("p",null,[t("strong",null,"基础价格:"),s(" 产品的标准价格，支持小数")])],-1)])),_:1,__:[15]}),e(B,{title:"技术规格说明",name:"specifications"},{default:o(()=>l[16]||(l[16]=[t("div",{class:"help-content"},[t("ul",null,[t("li",null,"技术规格用于描述产品的具体参数"),t("li",null,"每个规格包含名称、值、单位和描述"),t("li",null,"建议按重要性和类型分组填写"),t("li",null,"单位字段可选，但建议填写以提高专业性")])],-1)])),_:1,__:[16]}),e(B,{title:"配置架构设置",name:"configuration"},{default:o(()=>l[17]||(l[17]=[t("div",{class:"help-content"},[t("p",null,"当产品支持配置时，需要定义配置架构："),t("ul",null,[t("li",null,[t("strong",null,"文本类型:"),s(" 适用于名称、描述等文本输入")]),t("li",null,[t("strong",null,"数字类型:"),s(" 适用于尺寸、重量等数值输入")]),t("li",null,[t("strong",null,"布尔类型:"),s(" 适用于是/否选择")]),t("li",null,[t("strong",null,"选择类型:"),s(" 单选，需要预设选项")]),t("li",null,[t("strong",null,"多选类型:"),s(" 多选，需要预设选项")])])],-1)])),_:1,__:[17]}),e(B,{title:"图片上传建议",name:"images"},{default:o(()=>l[18]||(l[18]=[t("div",{class:"help-content"},[t("div",{class:"image-tips"},[t("h4",null,"单图模式:"),t("ul",null,[t("li",null,"适合只有一张主图的产品"),t("li",null,"支持快速上传和压缩优化"),t("li",null,"建议图片尺寸不小于 800x600")]),t("h4",null,"图集模式:"),t("ul",null,[t("li",null,"适合多角度、多规格的产品展示"),t("li",null,"支持批量上传和图集管理"),t("li",null,"可设置主图和排序")])])],-1)])),_:1,__:[18]})]),_:1},8,["modelValue"])]),_:1})])}}}),Kt=j(Ct,[["__scopeId","data-v-e9594031"]]);export{Kt as default};
