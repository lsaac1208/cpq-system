var ye=Object.defineProperty,Fe=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var ge=(S,c,m)=>c in S?ye(S,c,{enumerable:!0,configurable:!0,writable:!0,value:m}):S[c]=m,he=(S,c)=>{for(var m in c||(c={}))Ae.call(c,m)&&ge(S,m,c[m]);if(ve)for(var m of ve(c))Be.call(c,m)&&ge(S,m,c[m]);return S},be=(S,c)=>Fe(S,qe(c)),n=(S,c)=>ye(S,"name",{value:c,configurable:!0});var se=(S,c,m)=>new Promise((l,r)=>{var b=v=>{try{i(m.next(v))}catch(o){r(o)}},k=v=>{try{i(m.throw(v))}catch(o){r(o)}},i=v=>v.done?l(v.value):Promise.resolve(v.value).then(b,k);i((m=m.apply(S,c)).next())});import{h as Ie,s as T,_ as Z}from"./index-CoBZUWE1.js";/* empty css                    *//* empty css                 *//* empty css                *//* empty css                *//* empty css                 *//* empty css                        *//* empty css                  */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                       *//* empty css                 *//* empty css                          *//* empty css                    */import"./el-form-item-l0sNRNKZ.js";/* empty css                  */import{O as oe,af as Me,ag as Pe,at as Ne,b as ue,au as Le,B as we,W as ke,d as ae,al as Ce,b3 as He,am as Oe,ai as je,bd as Qe,b4 as We,V as Xe,Z as Ge,j as ne,ae as le,M as ce,N as me,T as Ve,R as pe,S as _e,aS as Je,aY as Ke,aI as Ye,ar as Ze,X as es,Y as ss,a$ as ts,a0 as as,I as $e,b9 as ls,c as os,av as ns,aw as is,ak as Se,b6 as rs,a as ds,b7 as us,bc as cs}from"./vendor-ui-CE-ZhXxH.js";import{x as ee,r as V,X as ms,c as de,w as ps,y as w,Q as e,I as s,A as t,K as te,u as M,M as d,O as y,P as L,a6 as H,al as _s,H as G,z as _,J as Ee,j as ie,S as fs,D as vs,t as gs}from"./vendor-vue-XfLkFKXI.js";/* empty css                        *//* empty css                        *//* empty css               *//* empty css                      *//* empty css                  *//* empty css                       *//* empty css                */import"./vendor-pdf-BeW0Xq92.js";import"./vendor-utils-B8vW8fJV.js";const ys="/document-comparison",hs=n(S=>{const c=new FormData;return S.documents.forEach((m,l)=>{c.append("document_".concat(l),m.file),c.append("document_".concat(l,"_name"),m.name||m.file.name),m.description&&c.append("document_".concat(l,"_description"),m.description)}),c.append("comparison_config",JSON.stringify(S.comparison_config)),S.analysis_focus&&c.append("analysis_focus",JSON.stringify(S.analysis_focus)),Ie.post("".concat(ys,"/compare"),c,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5})},"submitDocumentComparison"),bs={class:"comparison-form"},ws={class:"document-upload-area"},Cs={class:"upload-content"},$s={key:0,class:"document-list"},ks={class:"document-info"},Vs={class:"file-details"},Ss={class:"file-name"},Es={class:"file-size"},Ts={class:"document-meta"},xs={class:"comparison-options"},zs={class:"weight-config"},Us={class:"weight-label"},Ds={class:"custom-criteria"},Rs={class:"criteria-header"},Fs={class:"action-buttons"},qs={class:"presets"},As=["onClick"],Bs={class:"preset-tags"},Is=ee({__name:"DocumentComparisonForm",emits:["comparison-start","comparison-success","comparison-error"],setup(S,{emit:c}){const m=c,l=V(),r=V(),b=V(!1),k=V([]),i=ms({documents:[],comparison_config:{dimensions:["content","structure"],analysis_depth:"detailed",include_similarities:!0,include_differences:!0,generate_recommendations:!0,custom_criteria:[]},analysis_focus:{focus_areas:[],priority_weights:{},specific_requirements:[]}}),v=V([]),o=V({}),U={documents:[{required:!0,message:"请至少上传2个文档",trigger:"change",validator:R}],dimensions:[{required:!0,message:"请选择至少一个对比维度",trigger:"change"}],analysis_depth:[{required:!0,message:"请选择分析深度",trigger:"change"}]},I=[{name:"产品规格对比",description:"专门用于产品技术规格和功能特性的对比分析",tags:["产品","技术规格","功能"],config:{dimensions:["specifications","features","quality"],analysis_depth:"detailed",focus_areas:["technical_specs","features","performance"]}},{name:"价格方案对比",description:"针对不同供应商价格方案的全面对比分析",tags:["价格","成本","供应商"],config:{dimensions:["content","quality"],analysis_depth:"comprehensive",focus_areas:["pricing","quality"]}},{name:"合规性对比",description:"重点关注文档的合规性和标准符合度对比",tags:["合规","标准","认证"],config:{dimensions:["compliance","quality","structure"],analysis_depth:"comprehensive",focus_areas:["compliance","quality"]}}],j=de(()=>i.documents.length>=2&&i.comparison_config.dimensions.length>0),D=de(()=>i.comparison_config.dimensions.length>0&&i.comparison_config.analysis_depth);function R(u,a,A){!a||a.length<2?A(new Error("请至少上传2个文档进行对比")):a.length>10?A(new Error("最多支持同时对比10个文档")):A()}n(R,"validateDocuments");const C=n((u,a)=>{k.value=a;const A=a.filter(z=>z.raw).map(z=>({file:z.raw,name:z.name,description:""}));i.documents=A},"handleFileChange"),f=n((u,a)=>{k.value=a;const A=a.filter(z=>z.raw).map(z=>({file:z.raw,name:z.name,description:""}));i.documents=A},"handleFileRemove"),F=n(u=>{const a=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(u.type),A=u.size/1024/1024<10;return a?(A||T.error("文件大小不能超过 10MB"),!1):(T.error("只支持 PDF、Word、TXT 格式的文件"),!1)},"beforeUpload"),B=n(u=>{i.documents.splice(u,1),k.value.splice(u,1)},"removeDocument"),Q=n(()=>{i.comparison_config.custom_criteria=i.comparison_config.custom_criteria||[],i.comparison_config.custom_criteria.push({name:"",description:"",weight:.5})},"addCustomCriteria"),E=n(u=>{var a;(a=i.comparison_config.custom_criteria)==null||a.splice(u,1)},"removeCustomCriteria"),p=n(u=>({technical_specs:"技术规格",pricing:"价格信息",features:"功能特性",quality:"质量标准",compliance:"合规要求",performance:"性能指标"})[u]||u,"getFocusLabel"),h=n(u=>u<1024?"".concat(u," B"):u<1024*1024?"".concat((u/1024).toFixed(1)," KB"):"".concat((u/1024/1024).toFixed(1)," MB"),"formatFileSize"),W=n(()=>se(this,null,function*(){if(l.value)try{yield l.value.validate();const u=be(he({},i),{analysis_focus:{focus_areas:v.value,priority_weights:o.value,specific_requirements:[]}});b.value=!0,m("comparison-start");const a=yield hs(u);if(a.success&&a.result)m("comparison-success",a.result),T.success("文档对比分析完成！");else throw new Error(a.error||"对比分析失败")}catch(u){const a=u instanceof Error?u.message:"对比分析过程中发生错误";m("comparison-error",a),T.error(a)}finally{b.value=!1}}),"startComparison"),$=n(()=>{le.confirm("确定要重置表单吗？所有输入的数据将丢失。","确认重置",{type:"warning"}).then(()=>{var u,a;(u=l.value)==null||u.resetFields(),i.documents=[],i.comparison_config.custom_criteria=[],v.value=[],o.value={},k.value=[],(a=r.value)==null||a.clearFiles(),T.success("表单已重置")}).catch(()=>{})},"resetForm"),X=n(()=>{T.info("配置模板保存功能即将推出")},"saveAsTemplate"),re=n(u=>{le.confirm('确定要加载预设配置"'.concat(u.name,'"吗？当前配置将被替换。'),"确认加载预设",{type:"info"}).then(()=>{i.comparison_config.dimensions=u.config.dimensions,i.comparison_config.analysis_depth=u.config.analysis_depth,v.value=u.config.focus_areas,u.config.focus_areas.forEach(a=>{o.value[a]=.5}),T.success("已加载预设配置：".concat(u.name))}).catch(()=>{})},"loadPreset");return ps(v,u=>{Object.keys(o.value).forEach(a=>{u.includes(a)||delete o.value[a]}),u.forEach(a=>{a in o.value||(o.value[a]=.5)})},{deep:!0}),(u,a)=>{const A=ue,z=Ne,K=ke,J=ae,O=Pe,q=Oe,x=He,Y=Qe,Te=je,xe=We,ze=Ge,Ue=_s("Connection"),De=Me,fe=oe,Re=ne;return _(),w("div",bs,[e(fe,{class:"form-card"},{header:s(()=>a[6]||(a[6]=[t("div",{class:"card-header"},[t("h3",null,"文档对比配置"),t("p",null,"上传多个文档进行智能对比分析")],-1)])),default:s(()=>[e(De,{ref_key:"formRef",ref:l,model:i,rules:U,"label-width":"140px",class:"comparison-form-content"},{default:s(()=>[e(O,{label:"待对比文档",prop:"documents",required:""},{default:s(()=>[t("div",ws,[e(z,{ref_key:"uploadRef",ref:r,class:"document-uploader",drag:"","auto-upload":!1,multiple:!0,"file-list":k.value,"on-change":C,"on-remove":f,"before-upload":F,accept:".pdf,.docx,.doc,.txt"},{default:s(()=>[t("div",Cs,[e(A,{class:"upload-icon"},{default:s(()=>[e(M(Le))]),_:1}),a[7]||(a[7]=t("div",{class:"upload-text"},[t("p",null,[d("将文档拖拽到此处或"),t("em",null,"点击上传")]),t("p",{class:"upload-tip"},"支持 PDF、Word、TXT 格式，单个文件不超过10MB")],-1))])]),_:1},8,["file-list"]),i.documents.length>0?(_(),w("div",$s,[t("h4",null,"已选择的文档 ("+y(i.documents.length)+")",1),(_(!0),w(L,null,H(i.documents,(g,P)=>(_(),w("div",{key:P,class:"document-item"},[t("div",ks,[e(A,{class:"file-icon"},{default:s(()=>[e(M(we))]),_:1}),t("div",Vs,[t("div",Ss,y(g.file.name),1),t("div",Es,y(h(g.file.size)),1)])]),t("div",Ts,[e(K,{modelValue:g.name,"onUpdate:modelValue":n(N=>g.name=N,"onUpdate:modelValue"),placeholder:"文档别名（可选）",size:"small",style:{width:"150px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),e(K,{modelValue:g.description,"onUpdate:modelValue":n(N=>g.description=N,"onUpdate:modelValue"),placeholder:"文档描述（可选）",size:"small",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),e(J,{type:"danger",size:"small",text:"",onClick:n(N=>B(P),"onClick"),icon:M(Ce)},{default:s(()=>a[8]||(a[8]=[d(" 移除 ",-1)])),_:2,__:[8]},1032,["onClick","icon"])])]))),128))])):te("",!0)])]),_:1}),e(O,{label:"对比维度",prop:"dimensions",required:""},{default:s(()=>[e(x,{modelValue:i.comparison_config.dimensions,"onUpdate:modelValue":a[0]||(a[0]=g=>i.comparison_config.dimensions=g),class:"dimension-checkboxes"},{default:s(()=>[e(q,{label:"content"},{default:s(()=>a[9]||(a[9]=[d("内容对比",-1)])),_:1,__:[9]}),e(q,{label:"structure"},{default:s(()=>a[10]||(a[10]=[d("结构对比",-1)])),_:1,__:[10]}),e(q,{label:"features"},{default:s(()=>a[11]||(a[11]=[d("特性对比",-1)])),_:1,__:[11]}),e(q,{label:"specifications"},{default:s(()=>a[12]||(a[12]=[d("规格对比",-1)])),_:1,__:[12]}),e(q,{label:"quality"},{default:s(()=>a[13]||(a[13]=[d("质量对比",-1)])),_:1,__:[13]}),e(q,{label:"compliance"},{default:s(()=>a[14]||(a[14]=[d("合规性对比",-1)])),_:1,__:[14]})]),_:1},8,["modelValue"])]),_:1}),e(O,{label:"分析深度",prop:"analysis_depth",required:""},{default:s(()=>[e(Te,{modelValue:i.comparison_config.analysis_depth,"onUpdate:modelValue":a[1]||(a[1]=g=>i.comparison_config.analysis_depth=g),class:"depth-radios"},{default:s(()=>[e(Y,{value:"basic"},{default:s(()=>a[15]||(a[15]=[t("div",{class:"radio-content"},[t("div",{class:"radio-title"},"基础分析"),t("div",{class:"radio-desc"},"快速对比主要差异，适合初步了解")],-1)])),_:1,__:[15]}),e(Y,{value:"detailed"},{default:s(()=>a[16]||(a[16]=[t("div",{class:"radio-content"},[t("div",{class:"radio-title"},"详细分析"),t("div",{class:"radio-desc"},"深入分析各个维度，提供详细报告")],-1)])),_:1,__:[16]}),e(Y,{value:"comprehensive"},{default:s(()=>a[17]||(a[17]=[t("div",{class:"radio-content"},[t("div",{class:"radio-title"},"全面分析"),t("div",{class:"radio-desc"},"最深入的分析，包含所有可能的对比维度")],-1)])),_:1,__:[17]})]),_:1},8,["modelValue"])]),_:1}),e(O,{label:"对比选项"},{default:s(()=>[t("div",xs,[e(q,{modelValue:i.comparison_config.include_similarities,"onUpdate:modelValue":a[2]||(a[2]=g=>i.comparison_config.include_similarities=g)},{default:s(()=>a[18]||(a[18]=[d(" 包含相似性分析 ",-1)])),_:1,__:[18]},8,["modelValue"]),e(q,{modelValue:i.comparison_config.include_differences,"onUpdate:modelValue":a[3]||(a[3]=g=>i.comparison_config.include_differences=g)},{default:s(()=>a[19]||(a[19]=[d(" 包含差异性分析 ",-1)])),_:1,__:[19]},8,["modelValue"]),e(q,{modelValue:i.comparison_config.generate_recommendations,"onUpdate:modelValue":a[4]||(a[4]=g=>i.comparison_config.generate_recommendations=g)},{default:s(()=>a[20]||(a[20]=[d(" 生成建议报告 ",-1)])),_:1,__:[20]},8,["modelValue"])])]),_:1}),e(O,{label:"分析焦点"},{default:s(()=>[e(x,{modelValue:u.analysisFocus,"onUpdate:modelValue":a[5]||(a[5]=g=>u.analysisFocus=g),class:"focus-checkboxes"},{default:s(()=>[e(q,{label:"technical_specs"},{default:s(()=>a[21]||(a[21]=[d("技术规格",-1)])),_:1,__:[21]}),e(q,{label:"pricing"},{default:s(()=>a[22]||(a[22]=[d("价格信息",-1)])),_:1,__:[22]}),e(q,{label:"features"},{default:s(()=>a[23]||(a[23]=[d("功能特性",-1)])),_:1,__:[23]}),e(q,{label:"quality"},{default:s(()=>a[24]||(a[24]=[d("质量标准",-1)])),_:1,__:[24]}),e(q,{label:"compliance"},{default:s(()=>a[25]||(a[25]=[d("合规要求",-1)])),_:1,__:[25]}),e(q,{label:"performance"},{default:s(()=>a[26]||(a[26]=[d("性能指标",-1)])),_:1,__:[26]})]),_:1},8,["modelValue"])]),_:1}),e(O,{label:"权重配置"},{default:s(()=>[t("div",zs,[(_(!0),w(L,null,H(u.analysisFocus,g=>(_(),w("div",{key:g,class:"weight-item"},[t("span",Us,y(p(g)),1),e(xe,{modelValue:o.value[g],"onUpdate:modelValue":n(P=>o.value[g]=P,"onUpdate:modelValue"),min:0,max:1,step:.1,"show-stops":"","show-input":"","input-size":"small",style:{width:"250px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])]),_:1}),e(O,{label:"自定义标准"},{default:s(()=>[t("div",Ds,[t("div",Rs,[a[28]||(a[28]=t("span",null,"自定义对比标准",-1)),e(J,{type:"primary",size:"small",onClick:Q,icon:M(Xe)},{default:s(()=>a[27]||(a[27]=[d(" 添加标准 ",-1)])),_:1,__:[27]},8,["icon"])]),(_(!0),w(L,null,H(i.comparison_config.custom_criteria,(g,P)=>(_(),w("div",{key:P,class:"criteria-item"},[e(K,{modelValue:g.name,"onUpdate:modelValue":n(N=>g.name=N,"onUpdate:modelValue"),placeholder:"标准名称",style:{width:"150px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),e(K,{modelValue:g.description,"onUpdate:modelValue":n(N=>g.description=N,"onUpdate:modelValue"),placeholder:"标准描述",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),e(ze,{modelValue:g.weight,"onUpdate:modelValue":n(N=>g.weight=N,"onUpdate:modelValue"),min:0,max:1,step:.1,placeholder:"权重",style:{width:"100px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),e(J,{type:"danger",size:"small",text:"",onClick:n(N=>E(P),"onClick"),icon:M(Ce)},{default:s(()=>a[29]||(a[29]=[d(" 删除 ",-1)])),_:2,__:[29]},1032,["onClick","icon"])]))),128))])]),_:1}),e(O,null,{default:s(()=>[t("div",Fs,[e(J,{type:"primary",size:"large",loading:b.value,onClick:W,disabled:!j.value},{icon:s(()=>[e(A,null,{default:s(()=>[e(Ue)]),_:1})]),default:s(()=>[a[30]||(a[30]=d(" 开始对比分析 ",-1))]),_:1,__:[30]},8,["loading","disabled"]),e(J,{size:"large",onClick:$},{default:s(()=>a[31]||(a[31]=[d(" 重置表单 ",-1)])),_:1,__:[31]}),e(J,{type:"success",size:"large",onClick:X,disabled:!D.value},{icon:s(()=>[e(A,null,{default:s(()=>[e(M(we))]),_:1})]),default:s(()=>[a[32]||(a[32]=d(" 保存配置模板 ",-1))]),_:1,__:[32]},8,["disabled"])])]),_:1})]),_:1},8,["model"])]),_:1}),e(fe,{class:"preset-card"},{header:s(()=>a[33]||(a[33]=[t("h3",null,"快速配置",-1)])),default:s(()=>[t("div",qs,[(_(),w(L,null,H(I,g=>t("div",{key:g.name,class:"preset-item",onClick:n(P=>re(g),"onClick")},[t("h4",null,y(g.name),1),t("p",null,y(g.description),1),t("div",Bs,[(_(!0),w(L,null,H(g.tags,P=>(_(),G(Re,{key:P,size:"small",type:"info"},{default:s(()=>[d(y(P),1)]),_:2},1024))),128))])],8,As)),64))])]),_:1})])}}}),Ms=Z(Is,[["__scopeId","data-v-f34bc185"]]),Ps={class:"comparison-results"},Ns={class:"summary-section"},Ls={class:"stat-item"},Hs={class:"stat-value"},Os={class:"stat-item"},js={class:"stat-value"},Qs={class:"stat-item"},Ws={class:"stat-value"},Xs={class:"stat-item"},Gs={class:"stat-value"},Js={class:"differences-section"},Ks={class:"card-header"},Ys={key:0},Zs={key:1,class:"differences-list"},et={class:"diff-header"},st={class:"diff-category"},tt={class:"diff-content"},at={class:"diff-field"},lt={class:"diff-comparison"},ot={class:"diff-item"},nt={class:"diff-value"},it={class:"diff-item"},rt={class:"diff-value"},dt={class:"similarities-section"},ut={class:"similarities-list"},ct={class:"similarity-header"},mt={class:"similarity-category"},pt={class:"similarity-score"},_t={class:"similarity-content"},ft={class:"actions-section"},vt=ee({__name:"ComparisonResults",props:{results:{default:n(()=>({similarity:78,differences:12,commonItems:45,confidence:85,differenceDetails:[{category:"技术规格",field:"额定电压",document1:"220V",document2:"380V",type:"数值不同"},{category:"产品特性",field:"工作温度",document1:"-10~50℃",document2:"0~60℃",type:"范围不同"},{category:"基本信息",field:"型号",document1:"A703",document2:"A704",type:"内容不同"}],similarities:[{category:"产品类别",content:"三相继电保护测试仪",score:95},{category:"制造商",content:"电力设备制造有限公司",score:100},{category:"应用场景",content:"电力系统继电保护测试",score:88}]}),"default")},loading:{type:Boolean,default:!1}},emits:["new-comparison"],setup(S,{emit:c}){const m=c,l=V("table"),r=n(v=>({数值不同:"warning",范围不同:"info",内容不同:"danger",格式不同:"success"})[v]||"info","getDifferenceType"),b=n(()=>{T.success("报告下载中...")},"downloadReport"),k=n(()=>{T.success("分享链接已复制到剪贴板")},"shareResults"),i=n(()=>{m("new-comparison")},"newComparison");return(v,o)=>{const U=oe,I=me,j=ce,D=ae,R=Je,C=_e,f=ne,F=pe,B=ue,Q=Ve;return _(),w("div",Ps,[o[16]||(o[16]=t("div",{class:"results-header"},[t("h3",null,"对比分析结果"),t("p",null,"详细的文档对比分析结果和差异报告")],-1)),t("div",Ns,[e(j,{gutter:20},{default:s(()=>[e(I,{span:6},{default:s(()=>[e(U,{class:"stat-card"},{default:s(()=>[t("div",Ls,[t("div",Hs,y(v.results.similarity||0)+"%",1),o[2]||(o[2]=t("div",{class:"stat-label"},"相似度",-1))])]),_:1})]),_:1}),e(I,{span:6},{default:s(()=>[e(U,{class:"stat-card"},{default:s(()=>[t("div",Os,[t("div",js,y(v.results.differences||0),1),o[3]||(o[3]=t("div",{class:"stat-label"},"差异点",-1))])]),_:1})]),_:1}),e(I,{span:6},{default:s(()=>[e(U,{class:"stat-card"},{default:s(()=>[t("div",Qs,[t("div",Ws,y(v.results.commonItems||0),1),o[4]||(o[4]=t("div",{class:"stat-label"},"共同点",-1))])]),_:1})]),_:1}),e(I,{span:6},{default:s(()=>[e(U,{class:"stat-card"},{default:s(()=>[t("div",Xs,[t("div",Gs,y(v.results.confidence||0)+"%",1),o[5]||(o[5]=t("div",{class:"stat-label"},"置信度",-1))])]),_:1})]),_:1})]),_:1})]),t("div",Js,[e(U,null,{header:s(()=>[t("div",Ks,[o[8]||(o[8]=t("h4",null,"差异详情",-1)),e(R,null,{default:s(()=>[e(D,{type:l.value==="table"?"primary":"",onClick:o[0]||(o[0]=E=>l.value="table"),size:"small"},{default:s(()=>o[6]||(o[6]=[d(" 表格视图 ",-1)])),_:1,__:[6]},8,["type"]),e(D,{type:l.value==="list"?"primary":"",onClick:o[1]||(o[1]=E=>l.value="list"),size:"small"},{default:s(()=>o[7]||(o[7]=[d(" 列表视图 ",-1)])),_:1,__:[7]},8,["type"])]),_:1})])]),default:s(()=>[l.value==="table"?(_(),w("div",Ys,[Ee((_(),G(F,{data:v.results.differenceDetails},{default:s(()=>[e(C,{prop:"category",label:"类别",width:"120"}),e(C,{prop:"field",label:"字段",width:"150"}),e(C,{prop:"document1",label:"文档1","min-width":"200"}),e(C,{prop:"document2",label:"文档2","min-width":"200"}),e(C,{prop:"type",label:"差异类型",width:"100"},{default:s(E=>[e(f,{type:r(E.row.type)},{default:s(()=>[d(y(E.row.type),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])),[[Q,v.loading]])])):(_(),w("div",Zs,[(_(!0),w(L,null,H(v.results.differenceDetails,(E,p)=>(_(),w("div",{key:p,class:"difference-item"},[t("div",et,[t("span",st,y(E.category),1),e(f,{type:r(E.type),size:"small"},{default:s(()=>[d(y(E.type),1)]),_:2},1032,["type"])]),t("div",tt,[t("div",at,[o[9]||(o[9]=t("strong",null,"字段：",-1)),d(y(E.field),1)]),t("div",lt,[t("div",ot,[o[10]||(o[10]=t("span",{class:"diff-label"},"文档1：",-1)),t("span",nt,y(E.document1),1)]),t("div",it,[o[11]||(o[11]=t("span",{class:"diff-label"},"文档2：",-1)),t("span",rt,y(E.document2),1)])])])]))),128))]))]),_:1})]),t("div",dt,[e(U,null,{header:s(()=>o[12]||(o[12]=[t("h4",null,"相似内容",-1)])),default:s(()=>[t("div",ut,[(_(!0),w(L,null,H(v.results.similarities,(E,p)=>(_(),w("div",{key:p,class:"similarity-item"},[t("div",ct,[t("span",mt,y(E.category),1),t("span",pt,y(E.score)+"%",1)]),t("div",_t,y(E.content),1)]))),128))])]),_:1})]),t("div",ft,[e(D,{type:"primary",onClick:b},{default:s(()=>[e(B,null,{default:s(()=>[e(M(Ke))]),_:1}),o[13]||(o[13]=d(" 下载报告 ",-1))]),_:1,__:[13]}),e(D,{onClick:k},{default:s(()=>[e(B,null,{default:s(()=>[e(M(Ye))]),_:1}),o[14]||(o[14]=d(" 分享结果 ",-1))]),_:1,__:[14]}),e(D,{onClick:i},{default:s(()=>[e(B,null,{default:s(()=>[e(M(Ze))]),_:1}),o[15]||(o[15]=d(" 新建对比 ",-1))]),_:1,__:[15]})])])}}}),gt=Z(vt,[["__scopeId","data-v-2b6de523"]]),yt={class:"comparison-history"},ht={class:"filters"},bt={class:"pagination"},wt=ee({__name:"ComparisonHistory",emits:["view-comparison"],setup(S,{emit:c}){const m=c,l=V(!1),r=V(""),b=V(""),k=V([]),i=V(1),v=V(20),o=V(0),U=V([{id:1,name:"A703与A704产品对比",documentCount:2,similarity:78,status:"completed",createdAt:"2024-08-16 14:30:25",documents:["A703说明书.pdf","A704说明书.pdf"]},{id:2,name:"继电保护设备规格对比",documentCount:3,similarity:65,status:"completed",createdAt:"2024-08-15 09:15:12",documents:["设备A.pdf","设备B.pdf","设备C.pdf"]},{id:3,name:"技术标准文档对比",documentCount:2,similarity:92,status:"processing",createdAt:"2024-08-16 16:20:08",documents:["标准V1.pdf","标准V2.pdf"]}]),I=de(()=>{let p=U.value;r.value&&(p=p.filter($=>$.name.toLowerCase().includes(r.value.toLowerCase()))),b.value&&(p=p.filter($=>$.status===b.value)),o.value=p.length;const h=(i.value-1)*v.value,W=h+v.value;return p.slice(h,W)}),j=n(p=>({completed:"success",processing:"warning",failed:"danger"})[p]||"info","getStatusType"),D=n(()=>{i.value=1},"handleSearch"),R=n(()=>{i.value=1},"handleDateChange"),C=n(p=>{v.value=p,i.value=1},"handleSizeChange"),f=n(p=>{i.value=p},"handleCurrentChange"),F=n(()=>se(this,null,function*(){l.value=!0;try{yield new Promise(p=>setTimeout(p,1e3)),T.success("历史记录已刷新")}catch(p){T.error("刷新失败")}finally{l.value=!1}}),"refreshHistory"),B=n(p=>{m("view-comparison",p)},"viewComparison"),Q=n(p=>{T.success("正在下载对比报告: ".concat(p.name))},"downloadReport"),E=n(p=>se(this,null,function*(){try{yield le.confirm('确定要删除对比记录"'.concat(p.name,'"吗？'),"确认删除",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"});const h=U.value.findIndex(W=>W.id===p.id);h>-1&&(U.value.splice(h,1),T.success("删除成功"))}catch(h){}}),"deleteComparison");return ie(()=>{F()}),(p,h)=>{const W=ke,$=me,X=ss,re=es,u=ts,a=ae,A=ce,z=_e,K=ne,J=pe,O=as,q=Ve;return _(),w("div",yt,[h[9]||(h[9]=t("div",{class:"history-header"},[t("h3",null,"对比历史"),t("p",null,"查看和管理历史文档对比记录")],-1)),t("div",ht,[e(A,{gutter:16},{default:s(()=>[e($,{span:6},{default:s(()=>[e(W,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=x=>r.value=x),placeholder:"搜索对比记录...",clearable:"",onChange:D},null,8,["modelValue"])]),_:1}),e($,{span:4},{default:s(()=>[e(re,{modelValue:b.value,"onUpdate:modelValue":h[1]||(h[1]=x=>b.value=x),placeholder:"状态",clearable:""},{default:s(()=>[e(X,{label:"全部",value:""}),e(X,{label:"已完成",value:"completed"}),e(X,{label:"进行中",value:"processing"}),e(X,{label:"失败",value:"failed"})]),_:1},8,["modelValue"])]),_:1}),e($,{span:6},{default:s(()=>[e(u,{modelValue:k.value,"onUpdate:modelValue":h[2]||(h[2]=x=>k.value=x),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:R},null,8,["modelValue"])]),_:1}),e($,{span:4},{default:s(()=>[e(a,{type:"primary",onClick:F},{default:s(()=>h[5]||(h[5]=[d("刷新",-1)])),_:1,__:[5]})]),_:1})]),_:1})]),Ee((_(),G(J,{data:I.value},{default:s(()=>[e(z,{prop:"id",label:"ID",width:"80"}),e(z,{prop:"name",label:"对比名称","min-width":"200"}),e(z,{prop:"documentCount",label:"文档数量",width:"100"}),e(z,{prop:"similarity",label:"相似度",width:"100"},{default:s(x=>[t("span",null,y(x.row.similarity)+"%",1)]),_:1}),e(z,{prop:"status",label:"状态",width:"100"},{default:s(x=>[e(K,{type:j(x.row.status)},{default:s(()=>[d(y(x.row.status),1)]),_:2},1032,["type"])]),_:1}),e(z,{prop:"createdAt",label:"创建时间",width:"180"}),e(z,{label:"操作",width:"200"},{default:s(x=>[e(a,{size:"small",onClick:n(Y=>B(x.row),"onClick")},{default:s(()=>h[6]||(h[6]=[d(" 查看 ",-1)])),_:2,__:[6]},1032,["onClick"]),e(a,{size:"small",type:"primary",onClick:n(Y=>Q(x.row),"onClick")},{default:s(()=>h[7]||(h[7]=[d(" 下载 ",-1)])),_:2,__:[7]},1032,["onClick"]),e(a,{size:"small",type:"danger",onClick:n(Y=>E(x.row),"onClick")},{default:s(()=>h[8]||(h[8]=[d(" 删除 ",-1)])),_:2,__:[8]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,l.value]]),t("div",bt,[e(O,{"current-page":i.value,"onUpdate:currentPage":h[3]||(h[3]=x=>i.value=x),"page-size":v.value,"onUpdate:pageSize":h[4]||(h[4]=x=>v.value=x),total:o.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:C,onCurrentChange:f},null,8,["current-page","page-size","total"])])])}}}),Ct=Z(wt,[["__scopeId","data-v-baf2ef0e"]]),$t={class:"comparison-metrics"},kt={class:"metrics-summary"},Vt={class:"metric-item"},St={class:"metric-value"},Et={class:"metric-item"},Tt={class:"metric-value"},xt={class:"metric-item"},zt={class:"metric-value"},Ut={class:"metric-item"},Dt={class:"metric-value"},Rt={class:"charts-section"},Ft={class:"chart-placeholder"},qt={class:"chart-placeholder"},At={class:"chart-placeholder"},Bt={class:"detailed-stats"},It=ee({__name:"ComparisonMetrics",setup(S){const c=V({totalComparisons:256,avgSimilarity:73.2,avgProcessingTime:18.5,successRate:96.1}),m=V([{category:"产品规格对比",count:89,avgSimilarity:78.5,avgTime:15.2,successRate:97.8},{category:"技术文档对比",count:67,avgSimilarity:71.3,avgTime:22.1,successRate:95.5},{category:"标准文件对比",count:45,avgSimilarity:84.2,avgTime:12.8,successRate:98.9},{category:"其他对比",count:55,avgSimilarity:65.1,avgTime:25.3,successRate:92.7}]);return ie(()=>{}),(l,r)=>{const b=oe,k=me,i=ce,v=ue,o=_e,U=pe;return _(),w("div",$t,[r[11]||(r[11]=t("div",{class:"metrics-header"},[t("h3",null,"对比统计"),t("p",null,"文档对比分析的统计数据和趋势")],-1)),t("div",kt,[e(i,{gutter:20},{default:s(()=>[e(k,{span:6},{default:s(()=>[e(b,{class:"metric-card"},{default:s(()=>[t("div",Vt,[t("div",St,y(c.value.totalComparisons),1),r[0]||(r[0]=t("div",{class:"metric-label"},"总对比次数",-1))])]),_:1})]),_:1}),e(k,{span:6},{default:s(()=>[e(b,{class:"metric-card"},{default:s(()=>[t("div",Et,[t("div",Tt,y(c.value.avgSimilarity)+"%",1),r[1]||(r[1]=t("div",{class:"metric-label"},"平均相似度",-1))])]),_:1})]),_:1}),e(k,{span:6},{default:s(()=>[e(b,{class:"metric-card"},{default:s(()=>[t("div",xt,[t("div",zt,y(c.value.avgProcessingTime)+"s",1),r[2]||(r[2]=t("div",{class:"metric-label"},"平均处理时间",-1))])]),_:1})]),_:1}),e(k,{span:6},{default:s(()=>[e(b,{class:"metric-card"},{default:s(()=>[t("div",Ut,[t("div",Dt,y(c.value.successRate)+"%",1),r[3]||(r[3]=t("div",{class:"metric-label"},"成功率",-1))])]),_:1})]),_:1})]),_:1})]),t("div",Rt,[e(i,{gutter:20},{default:s(()=>[e(k,{span:12},{default:s(()=>[e(b,null,{header:s(()=>r[4]||(r[4]=[t("h4",null,"相似度分布",-1)])),default:s(()=>[t("div",Ft,[e(v,null,{default:s(()=>[e(M($e))]),_:1}),r[5]||(r[5]=t("p",null,"相似度分布图表",-1))])]),_:1})]),_:1}),e(k,{span:12},{default:s(()=>[e(b,null,{header:s(()=>r[6]||(r[6]=[t("h4",null,"对比类型分布",-1)])),default:s(()=>[t("div",qt,[e(v,null,{default:s(()=>[e(M(ls))]),_:1}),r[7]||(r[7]=t("p",null,"对比类型饼图",-1))])]),_:1})]),_:1})]),_:1}),e(i,{gutter:20,style:{"margin-top":"20px"}},{default:s(()=>[e(k,{span:24},{default:s(()=>[e(b,null,{header:s(()=>r[8]||(r[8]=[t("h4",null,"对比趋势",-1)])),default:s(()=>[t("div",At,[e(v,null,{default:s(()=>[e(M($e))]),_:1}),r[9]||(r[9]=t("p",null,"对比次数趋势图",-1))])]),_:1})]),_:1})]),_:1})]),t("div",Bt,[e(b,null,{header:s(()=>r[10]||(r[10]=[t("h4",null,"详细统计",-1)])),default:s(()=>[e(U,{data:m.value},{default:s(()=>[e(o,{prop:"category",label:"分类",width:"150"}),e(o,{prop:"count",label:"次数",width:"100"}),e(o,{prop:"avgSimilarity",label:"平均相似度",width:"120"}),e(o,{prop:"avgTime",label:"平均时长(s)",width:"120"}),e(o,{prop:"successRate",label:"成功率",width:"100"})]),_:1},8,["data"])]),_:1})])])}}}),Mt=Z(It,[["__scopeId","data-v-46cd2d4f"]]),Pt={class:"comparison-progress"},Nt={key:0,class:"current-task"},Lt={class:"task-header"},Ht={class:"task-info"},Ot={class:"task-name"},jt={class:"task-documents"},Qt={class:"progress-section"},Wt={class:"progress-info"},Xt={class:"steps-progress"},Gt={class:"task-actions"},Jt={key:1,class:"no-task"},Kt={key:2,class:"task-queue"},Yt={class:"queue-info"},Zt={class:"queue-name"},ea={class:"queue-time"},sa={class:"task-logs"},ta={class:"logs-header"},aa={class:"logs-container"},la={class:"log-time"},oa={class:"log-message"},na=ee({__name:"ComparisonProgress",emits:["view-results","start-comparison"],setup(S,{emit:c}){const m=c,l=V({id:1,name:"A703与A704产品对比",documents:["A703说明书.pdf","A704说明书.pdf"],status:"processing",progress:65,estimatedTime:45,currentStep:2,steps:[{id:1,title:"文档解析",description:"解析上传的文档内容",status:"finish"},{id:2,title:"内容分析",description:"分析文档结构和内容",status:"process"},{id:3,title:"对比计算",description:"计算文档间的相似度",status:"wait"},{id:4,title:"生成报告",description:"生成详细对比报告",status:"wait"}]}),r=V([{id:2,name:"技术标准对比",estimatedStartTime:"14:35:20"},{id:3,name:"产品规格对比",estimatedStartTime:"14:42:15"}]),b=V([{time:"14:28:15",level:"info",message:"开始解析文档 A703说明书.pdf"},{time:"14:28:18",level:"success",message:"文档解析完成，提取到 156 个段落"},{time:"14:28:22",level:"info",message:"开始解析文档 A704说明书.pdf"},{time:"14:28:25",level:"success",message:"文档解析完成，提取到 142 个段落"},{time:"14:28:28",level:"info",message:"开始内容分析和特征提取"},{time:"14:29:05",level:"warning",message:"检测到部分内容格式不规范，自动修正中..."},{time:"14:29:15",level:"info",message:"正在计算语义相似度..."}]);let k=null;const i=n(C=>({processing:"warning",completed:"success",failed:"danger",cancelled:"info"})[C]||"info","getStatusType"),v=n(()=>se(this,null,function*(){try{yield le.confirm("确定要取消当前对比任务吗？","确认取消",{confirmButtonText:"取消任务",cancelButtonText:"继续任务",type:"warning"}),l.value&&(l.value.status="cancelled",D("warning","用户取消了对比任务"),T.warning("任务已取消"))}catch(C){}}),"cancelTask"),o=n(()=>{m("view-results",l.value)},"viewResults"),U=n(()=>{m("start-comparison")},"startNewComparison"),I=n(C=>{const f=r.value.findIndex(F=>F.id===C);f>-1&&(r.value.splice(f,1),T.success("已从队列中移除"))},"removeFromQueue"),j=n(()=>{b.value=[]},"clearLogs"),D=n((C,f)=>{const F=new Date,B="".concat(F.getHours().toString().padStart(2,"0"),":").concat(F.getMinutes().toString().padStart(2,"0"),":").concat(F.getSeconds().toString().padStart(2,"0"));b.value.push({time:B,level:C,message:f}),b.value.length>50&&b.value.shift()},"addLog"),R=n(()=>{l.value&&l.value.status==="processing"&&(l.value.progress<100?(l.value.progress+=Math.random()*3,l.value.estimatedTime=Math.max(0,l.value.estimatedTime-2),l.value.progress>25&&l.value.currentStep<1&&(l.value.currentStep=1,l.value.steps[1].status="process",D("info","开始内容分析阶段")),l.value.progress>50&&l.value.currentStep<2&&(l.value.currentStep=2,l.value.steps[1].status="finish",l.value.steps[2].status="process",D("info","开始对比计算阶段")),l.value.progress>80&&l.value.currentStep<3&&(l.value.currentStep=3,l.value.steps[2].status="finish",l.value.steps[3].status="process",D("info","开始生成报告阶段"))):(l.value.progress=100,l.value.status="completed",l.value.estimatedTime=0,l.value.currentStep=4,l.value.steps[3].status="finish",D("success","对比任务完成！相似度: 78.5%")))},"simulateProgress");return ie(()=>{k=setInterval(R,2e3)}),fs(()=>{k&&clearInterval(k)}),(C,f)=>{const F=ne,B=os,Q=is,E=ns,p=ae,h=oe,W=Se;return _(),w("div",Pt,[f[9]||(f[9]=t("div",{class:"progress-header"},[t("h3",null,"对比进度"),t("p",null,"实时监控文档对比分析的进度")],-1)),l.value?(_(),w("div",Nt,[e(h,null,{header:s(()=>[t("div",Lt,[f[0]||(f[0]=t("span",null,"当前对比任务",-1)),e(F,{type:i(l.value.status)},{default:s(()=>[d(y(l.value.status),1)]),_:1},8,["type"])])]),default:s(()=>[t("div",Ht,[t("div",Ot,y(l.value.name),1),t("div",jt,[f[1]||(f[1]=t("span",null,"对比文档：",-1)),(_(!0),w(L,null,H(l.value.documents,$=>(_(),G(F,{key:$,size:"small",style:{"margin-right":"8px"}},{default:s(()=>[d(y($),1)]),_:2},1024))),128))])]),t("div",Qt,[t("div",Wt,[t("span",null,"整体进度："+y(l.value.progress)+"%",1),t("span",null,"预计剩余时间："+y(l.value.estimatedTime)+"s",1)]),e(B,{percentage:l.value.progress,status:l.value.progress===100?"success":"primary","stroke-width":12},null,8,["percentage","status"])]),t("div",Xt,[e(E,{active:l.value.currentStep,"align-center":""},{default:s(()=>[(_(!0),w(L,null,H(l.value.steps,$=>(_(),G(Q,{key:$.id,title:$.title,description:$.description,status:$.status},null,8,["title","description","status"]))),128))]),_:1},8,["active"])]),t("div",Gt,[l.value.status==="processing"?(_(),G(p,{key:0,type:"danger",onClick:v},{default:s(()=>f[2]||(f[2]=[d(" 取消任务 ",-1)])),_:1,__:[2]})):te("",!0),l.value.status==="completed"?(_(),G(p,{key:1,type:"primary",onClick:o},{default:s(()=>f[3]||(f[3]=[d(" 查看结果 ",-1)])),_:1,__:[3]})):te("",!0)])]),_:1})])):(_(),w("div",Jt,[e(W,{description:"当前没有正在进行的对比任务"},{default:s(()=>[e(p,{type:"primary",onClick:U},{default:s(()=>f[4]||(f[4]=[d(" 开始新对比 ",-1)])),_:1,__:[4]})]),_:1})])),r.value.length>0?(_(),w("div",Kt,[e(h,null,{header:s(()=>f[5]||(f[5]=[t("h4",null,"等待队列",-1)])),default:s(()=>[(_(!0),w(L,null,H(r.value,$=>(_(),w("div",{key:$.id,class:"queue-item"},[t("div",Yt,[t("span",Zt,y($.name),1),t("span",ea,"预计开始时间："+y($.estimatedStartTime),1)]),e(p,{size:"small",text:"",onClick:n(X=>I($.id),"onClick")},{default:s(()=>f[6]||(f[6]=[d(" 移除 ",-1)])),_:2,__:[6]},1032,["onClick"])]))),128))]),_:1})])):te("",!0),t("div",sa,[e(h,null,{header:s(()=>[t("div",ta,[f[8]||(f[8]=t("h4",null,"实时日志",-1)),e(p,{size:"small",onClick:j},{default:s(()=>f[7]||(f[7]=[d("清空日志",-1)])),_:1,__:[7]})])]),default:s(()=>[t("div",aa,[(_(!0),w(L,null,H(b.value,($,X)=>(_(),w("div",{key:X,class:vs(["log-item",$.level])},[t("span",la,y($.time),1),t("span",oa,y($.message),1)],2))),128))])]),_:1})])])}}}),ia=Z(na,[["__scopeId","data-v-d56211a5"]]),ra={class:"document-comparison"},da={key:1,class:"empty-results"},ua=ee({__name:"DocumentComparison",setup(S){const c=V("compare"),m=V(!1),l=V(null),r=V(null),b=V(0);gs("refreshTrigger",b);const k=n(()=>{m.value=!0,r.value={current_step:"准备分析...",percentage:0,estimated_remaining_time:0},T.info("开始文档对比分析")},"handleComparisonStart"),i=n(R=>{m.value=!1,l.value=R,c.value="results",cs({title:"对比分析完成",message:"成功对比 ".concat(R.documents_analyzed.length," 个文档"),type:"success",duration:5e3}),b.value++},"handleComparisonSuccess"),v=n(R=>{m.value=!1,r.value=null,T.error("对比分析失败: ".concat(R))},"handleComparisonError"),o=n(R=>{T.success("开始导出".concat(R.toUpperCase(),"格式报告"))},"handleExportResult"),U=n(()=>{T.success("分析结果已保存"),b.value++},"handleSaveAnalysis"),I=n(R=>{T.info("正在加载对比记录: ".concat(R.document_names.join(", "))),c.value="results"},"handleHistorySelected"),j=n(()=>{T.success("对比记录已删除"),b.value++},"handleComparisonDeleted"),D=n(()=>{T.warning("对比分析已取消"),m.value=!1,r.value=null},"handleCancelComparison");return ie(()=>{T.info("多文档对比分析系统已就绪")}),(R,C)=>{const f=us,F=ae,B=Se,Q=rs,E=ds;return _(),w("div",ra,[C[4]||(C[4]=t("div",{class:"page-header"},[t("h1",null,"多文档对比分析"),t("p",{class:"page-description"},"智能对比分析多个文档，识别相似性、差异性，并提供专业建议")],-1)),e(Q,{modelValue:c.value,"onUpdate:modelValue":C[1]||(C[1]=p=>c.value=p),class:"comparison-tabs"},{default:s(()=>[e(f,{label:"开始对比",name:"compare"},{default:s(()=>[e(Ms,{onComparisonStart:k,onComparisonSuccess:i,onComparisonError:v})]),_:1}),e(f,{label:"对比结果",name:"results",disabled:!l.value},{default:s(()=>[l.value?(_(),G(gt,{key:0,"comparison-result":l.value,onExportResult:o,onSaveAnalysis:U},null,8,["comparison-result"])):(_(),w("div",da,[e(B,{description:"还没有对比结果"},{default:s(()=>[e(F,{type:"primary",onClick:C[0]||(C[0]=p=>c.value="compare")},{default:s(()=>C[3]||(C[3]=[d("开始对比",-1)])),_:1,__:[3]})]),_:1})]))]),_:1},8,["disabled"]),e(f,{label:"对比历史",name:"history"},{default:s(()=>[e(Ct,{onComparisonSelected:I,onComparisonDeleted:j})]),_:1}),e(f,{label:"对比统计",name:"metrics"},{default:s(()=>[e(Mt)]),_:1})]),_:1},8,["modelValue"]),e(E,{modelValue:m.value,"onUpdate:modelValue":C[2]||(C[2]=p=>m.value=p),title:"文档对比分析中",width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{default:s(()=>[r.value?(_(),G(ia,{key:0,progress:r.value,onCancelComparison:D},null,8,["progress"])):te("",!0)]),_:1},8,["modelValue"])])}}}),Ma=Z(ua,[["__scopeId","data-v-a3a40164"]]);export{Ma as default};
