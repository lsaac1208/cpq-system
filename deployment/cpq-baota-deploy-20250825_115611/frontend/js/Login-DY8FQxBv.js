var k=Object.defineProperty;var w=(m,u)=>k(m,"name",{value:u,configurable:!0});var v=(m,u,l)=>new Promise((d,r)=>{var f=e=>{try{n(l.next(e))}catch(s){r(s)}},p=e=>{try{n(l.throw(e))}catch(s){r(s)}},n=e=>e.done?d(e.value):Promise.resolve(e.value).then(f,p);n((l=l.apply(m,u)).next())});import{u as h,s as x,_ as C}from"./index-CoBZUWE1.js";import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import{x as b,r as E,X as F,y as z,A as o,Q as t,I as a,V as B,u as g,M as i,al as I,a4 as M,aC as R,z as L}from"./vendor-vue-XfLkFKXI.js";import{af as N,ag as S,W as q,u as A,aM as K,d as Q}from"./vendor-ui-CE-ZhXxH.js";import"./vendor-pdf-BeW0Xq92.js";import"./vendor-utils-B8vW8fJV.js";const U={class:"login-container"},P={class:"login-card"},T={class:"login-footer"},W=b({__name:"Login",setup(m){const u=R(),l=h(),d=E(),r=F({username:"",password:""}),f={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少需要6个字符",trigger:"blur"}]},p=w(()=>v(this,null,function*(){var n,e;if(d.value)try{yield d.value.validate();const s=yield l.login(r);x.success(s.data.message||"登录成功"),u.push("/")}catch(s){x.error(((e=(n=s.response)==null?void 0:n.data)==null?void 0:e.error)||"登录失败")}}),"handleLogin");return(n,e)=>{const s=q,_=S,y=Q,V=I("router-link");return L(),z("div",U,[o("div",P,[e[5]||(e[5]=o("div",{class:"login-header"},[o("h2",null,"CPQ系统"),o("p",null,"电力设备制造商配置定价报价系统")],-1)),t(g(N),{ref_key:"loginFormRef",ref:d,model:r,rules:f,onSubmit:B(p,["prevent"])},{default:a(()=>[t(_,{prop:"username"},{default:a(()=>[t(s,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=c=>r.username=c),placeholder:"用户名",size:"large","prefix-icon":g(A)},null,8,["modelValue","prefix-icon"])]),_:1}),t(_,{prop:"password"},{default:a(()=>[t(s,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=c=>r.password=c),type:"password",placeholder:"密码",size:"large","prefix-icon":g(K),"show-password":"",onKeyup:M(p,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),t(_,null,{default:a(()=>[t(y,{type:"primary",size:"large",style:{width:"100%"},loading:g(l).loading,onClick:p},{default:a(()=>e[2]||(e[2]=[i(" 登录 ",-1)])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",T,[o("p",null,[e[4]||(e[4]=i(" 还没有账户？ ",-1)),t(V,{to:"/register",class:"link"},{default:a(()=>e[3]||(e[3]=[i("立即注册",-1)])),_:1,__:[3]})])]),e[6]||(e[6]=o("div",{class:"demo-info"},[o("h4",null,"演示账户"),o("p",null,[o("strong",null,"管理员:"),i(" admin / password123")]),o("p",null,[o("strong",null,"销售员:"),i(" sales / password123")]),o("p",null,[o("strong",null,"工程师:"),i(" engineer / password123")])],-1))])])}}}),Z=C(W,[["__scopeId","data-v-d1a15efd"]]);export{Z as default};
