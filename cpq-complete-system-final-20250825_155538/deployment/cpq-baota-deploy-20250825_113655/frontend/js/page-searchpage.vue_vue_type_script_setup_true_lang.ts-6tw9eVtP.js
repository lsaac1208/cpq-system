var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,o=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&c(e,l,a[l]);if(s)for(var l of s(a))u.call(a,l)&&c(e,l,a[l]);return e},i=(e,a,l)=>new Promise((s,t)=>{var u=e=>{try{o(l.next(e))}catch(a){t(a)}},c=e=>{try{o(l.throw(e))}catch(a){t(a)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(u,c);o((l=l.apply(e,a)).next())});import{i as n,a as r,d,U as v,l as p,bj as h,b7 as m,f as g,p as y,j as f,aq as _,V as b,a2 as k,u as w,b9 as M,a3 as j,am as I,aJ as S,aK as V,w as C,x as z,y as x,z as T,k as N,ac as R,b as q}from"./element-plus-DR0qywX_.js";import{z as O,r as D,b as H,w as W,l as P,A as U,C as L,M as A,S as B,L as E,u as Y,a6 as Z,K as F,R as G,a8 as Q,P as J,J as K,Q as X,B as $,F as ee,X as ae,an as le,Z as se,aA as te,az as ue,aE as ce}from"./vue-BMWQU0Ry.js";import{s as oe}from"./utils-BjNHK8wL.js";import{S as ie}from"./api-BHu6TLr6.js";import{P as ne}from"./vendor-B3dkwCfs.js";import{_ as re}from"./page-aianalysisenhanced.vue-9uq21fmn.js";const de={class:"search-box"},ve={class:"search-input-container"},pe={key:0,class:"suggestions-dropdown"},he=["onClick"],me={class:"suggestion-icon"},ge={class:"suggestion-content"},ye=["innerHTML"],fe={class:"suggestion-meta"},_e={key:0,class:"category"},be={key:1,class:"count"},ke={key:0,class:"hot-searches"},we={class:"hot-searches-list"},Me={class:"search-count"},je=re(O({__name:"SearchBox",props:{modelValue:{default:""},placeholder:{default:"搜索产品名称、型号、规格..."},size:{default:"default"},showHotSearches:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!1}},emits:["update:modelValue","search","select-suggestion"],setup(e,{emit:a}){const l=e,s=a,t=D(l.modelValue),u=D([]),c=D([]),o=D(!1),y=D(!1),f=D(!1),_=D(!1);H(()=>f.value&&_.value&&t.value.length>=2),W(()=>l.modelValue,e=>{t.value=e}),W(t,e=>{s("update:modelValue",e)});const b=ne.debounce(e=>i(this,null,function*(){if(!e||e.length<2)u.value=[];else try{o.value=!0,u.value=yield ie.getSearchSuggestions(e,8)}catch(a){u.value=[]}finally{o.value=!1}}),300),k=e=>{t.value=e,b(e),f.value=!0},w=()=>{_.value=!0,t.value.length>=2&&(f.value=!0)},M=()=>{setTimeout(()=>{_.value=!1,f.value=!1},200)},j=()=>{if(t.value.trim()){y.value=!0,f.value=!1;try{s("search",t.value.trim())}finally{y.value=!1}}},I=()=>{f.value=!1},S=()=>i(this,null,function*(){try{c.value=yield ie.getHotSearches(6,7)}catch(e){}});P(()=>{l.showHotSearches&&S()});const V={mounted(e,a){e._clickOutsideHandler=l=>{e===l.target||e.contains(l.target)||a.value()},document.addEventListener("click",e._clickOutsideHandler)},unmounted(e){document.removeEventListener("click",e._clickOutsideHandler)}};return(e,a)=>($(),U("div",de,[L("div",ve,[B(Y(n),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:e.placeholder,size:e.size,loading:o.value,clearable:"",onInput:k,onKeyup:Z(j,["enter"]),onFocus:w,onBlur:M,class:"search-input"},{prefix:F(()=>[B(Y(d),null,{default:F(()=>[B(Y(v))]),_:1})]),suffix:F(()=>[B(Y(r),{type:"primary",size:e.size,loading:y.value,onClick:j,class:"search-button"},{default:F(()=>a[1]||(a[1]=[J(" 搜索 ",-1)])),_:1,__:[1]},8,["size","loading"])]),_:1},8,["modelValue","placeholder","size","loading"]),f.value&&u.value.length>0?E(($(),U("div",pe,[($(!0),U(G,null,Q(u.value,(e,a)=>($(),U("div",{key:"".concat(e.type,"-").concat(a),class:"suggestion-item",onClick:a=>(e=>{t.value=e.text,f.value=!1,s("select-suggestion",e),setTimeout(()=>{j()},100)})(e)},[L("div",me,["product"===e.type?($(),K(Y(d),{key:0},{default:F(()=>[B(Y(p))]),_:1})):"code"===e.type?($(),K(Y(d),{key:1},{default:F(()=>[B(Y(h))]),_:1})):($(),K(Y(d),{key:2},{default:F(()=>[B(Y(m))]),_:1}))]),L("div",ge,[L("div",{class:"suggestion-text",innerHTML:e.highlighted||e.text},null,8,ye),L("div",fe,[e.category?($(),U("span",_e,X(e.category),1)):A("",!0),e.count?($(),U("span",be,X(e.count)+" 个结果 ",1)):A("",!0)])])],8,he))),128))])),[[V,I]]):A("",!0)]),e.showHotSearches&&c.value.length>0?($(),U("div",ke,[a[2]||(a[2]=L("div",{class:"hot-searches-label"},"热门搜索：",-1)),L("div",we,[($(!0),U(G,null,Q(c.value,e=>($(),K(Y(g),{key:e.query,class:"hot-search-tag",onClick:a=>{return l=e.query,t.value=l,void j();var l}},{default:F(()=>[J(X(e.query)+" ",1),L("span",Me,"("+X(e.count)+")",1)]),_:2},1032,["onClick"]))),128))])])):A("",!0)]))}}),[["__scopeId","data-v-d789b871"]]),Ie={class:"product-image"},Se=["src","alt"],Ve={key:1,class:"relevance-badge"},Ce={class:"product-info"},ze=["innerHTML","title"],xe={class:"product-meta"},Te={class:"product-code"},Ne={class:"product-category"},Re=["innerHTML"],qe=["innerHTML","title"],Oe={key:1,class:"product-specs"},De={class:"spec-label"},He={class:"spec-value"},We={class:"product-footer"},Pe={class:"product-price"},Ue={class:"price-value"},Le={key:0,class:"price-note"},Ae={class:"product-actions"},Be="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDIwMCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTUwIiBmaWxsPSIjRjVGN0ZBIi8+CjxwYXRoIGQ9Ik03NyA2N0g4M1Y3M0g3N1Y2N1pNODMgNjFINzdWNjdIODNWNjFaTTc3IDczSDgzVjc5SDc3VjczWk04OSA2N0g5NVY3M0g4OVY2N1pNOTUgNjFIOTlWNjdIOTVWNjFaTTEwMSA2N0gxMDdWNzNIMTAxVjY3Wk0xMDcgNjFIMTEzVjY3SDEwN1Y2MVpNMTEzIDY3SDExOVY3M0gxMTNWNjdaTTExOSA2MUgxMjVWNjdIMTE5VjYxWiIgZmlsbD0iI0MwQzRDQyIvPgo8dGV4dCB4PSIxMDAiIHk9IjkwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5MDkzOTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPueUn+WTgeWbvueJhzwvdGV4dD4KPC9zdmc+",Ee=re(O({__name:"ProductCard",props:{product:{},viewMode:{default:"grid"},searchQuery:{default:""},showRelevanceScore:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["select","add-to-quote","view-details"],setup(e,{emit:a}){const l=e,s=a,t=D(!1),u=H(()=>{var e;return(null==(e=l.product.match_highlights)?void 0:e.name)||l.product.name}),c=H(()=>{var e;return(null==(e=l.product.match_highlights)?void 0:e.category)||l.product.category}),o=H(()=>{var e;const a=l.product.description||"",s=null==(e=l.product.match_highlights)?void 0:e.description;if(s)return s;const t="grid"===l.viewMode?100:200;return a.length>t?a.substring(0,t)+"...":a}),n=H(()=>null),v=H(()=>{const e=l.product.image_url||l.product.image||l.product.photo_url||null;return e&&"string"==typeof e&&e.trim()?e.startsWith("/")||e.startsWith("http")?e:"/images/products/".concat(e):Be}),p=H(()=>{if(!l.product.specifications)return[];const e=l.product.specifications,a="grid"===l.viewMode?3:5;return Object.entries(e).slice(0,a).map(([e,a])=>({key:e,label:g(e),value:f(a)}))}),g=e=>({power:"功率",voltage:"电压",speed:"转速",efficiency:"效率",weight:"重量",dimensions:"尺寸",protection:"防护等级",mounting:"安装方式",cooling:"冷却方式"}[e]||e.charAt(0).toUpperCase()+e.slice(1)),f=e=>{if(null==e)return"-";if("object"==typeof e){if(Array.isArray(e))return e.join(", ");if("object"==typeof e){if(void 0!==e.value)return"".concat(e.value).concat(e.unit?e.unit:"");if(void 0!==e.min&&void 0!==e.max)return"".concat(e.min,"-").concat(e.max).concat(e.unit?e.unit:"");if(void 0!==e.nominal)return"".concat(e.nominal).concat(e.unit?e.unit:"");const a=Object.entries(e);return a.length<=3?a.map(([e,a])=>"".concat(e,": ").concat(a)).join(", "):"详见详情页"}}return"boolean"==typeof e?e?"是":"否":String(e)},_=e=>{e.target.src=Be},b=()=>{l.loading||s("select",l.product)},k=()=>i(this,null,function*(){if(!t.value){t.value=!0;try{s("add-to-quote",l.product)}catch(e){}finally{t.value=!1}}}),w=()=>{s("view-details",l.product)};return(e,a)=>{return $(),U("div",{class:ee(["product-card",{["product-card--".concat(e.viewMode)]:!0,"product-card--hover":!e.loading}]),onClick:b},[L("div",Ie,[L("img",{src:v.value,alt:e.product.name,loading:"lazy",onError:_},null,40,Se),n.value?($(),U("div",{key:0,class:ee(["stock-badge",n.value.class])},X(n.value.text),3)):A("",!0),e.product.relevance_score&&e.showRelevanceScore?($(),U("div",Ve," 匹配度: "+X(e.product.relevance_score)+"% ",1)):A("",!0)]),L("div",Ce,[L("h3",{class:"product-name",innerHTML:u.value,title:e.product.name},null,8,ze),L("div",xe,[L("span",Te,[B(Y(d),null,{default:F(()=>[B(Y(h))]),_:1}),J(" "+X(e.product.code),1)]),L("span",Ne,[B(Y(d),null,{default:F(()=>[B(Y(m))]),_:1}),L("span",{innerHTML:c.value},null,8,Re)])]),e.product.description?($(),U("div",{key:0,class:"product-description",innerHTML:o.value,title:e.product.description},null,8,qe)):A("",!0),p.value.length>0?($(),U("div",Oe,[($(!0),U(G,null,Q(p.value,e=>($(),U("div",{key:e.key,class:"spec-item"},[L("span",De,X(e.label)+":",1),L("span",He,X(e.value),1)]))),128))])):A("",!0),L("div",We,[L("div",Pe,[a[0]||(a[0]=L("span",{class:"price-label"},"价格:",-1)),L("span",Ue,"¥"+X((l=e.product.base_price,("string"==typeof l?parseFloat(l):l).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}))),1),e.product.is_configurable?($(),U("span",Le,"起")):A("",!0)]),L("div",Ae,[B(Y(r),{type:"primary",size:"small",loading:t.value,onClick:ae(k,["stop"])},{default:F(()=>[B(Y(d),null,{default:F(()=>[B(Y(y))]),_:1}),a[1]||(a[1]=J(" 加入询价单 ",-1))]),_:1,__:[1]},8,["loading"]),B(Y(r),{size:"small",onClick:ae(w,["stop"])},{default:F(()=>a[2]||(a[2]=[J(" 查看详情 ",-1)])),_:1,__:[2]})])])])],2);var l}}}),[["__scopeId","data-v-992fffe1"]]),Ye={class:"search-results"},Ze={class:"results-header"},Fe={class:"results-info"},Ge={key:0,class:"search-query"},Qe={class:"results-controls"},Je={key:0,class:"results-loading"},Ke={key:1,class:"results-empty"},Xe={class:"empty-icon"},$e={key:3,class:"results-pagination"},ea=re(O({__name:"SearchResults",props:{searchResult:{default:null},loading:{type:Boolean,default:!1},viewMode:{default:"grid"},sort:{default:"relevance"}},emits:["update:viewMode","update:sort","page-change","size-change","product-select","add-to-quote","view-details"],setup(e,{emit:a}){const l=e,s=a,t=D(l.sort),u=D(1),c=[{label:"相关性",value:"relevance"},{label:"名称",value:"name"},{label:"价格从低到高",value:"price"},{label:"价格从高到低",value:"price_desc"},{label:"最新",value:"newest"},{label:"最旧",value:"oldest"}],o=H({get:()=>l.viewMode,set:e=>s("update:viewMode",e)});W(()=>l.sort,e=>{t.value=e}),W(()=>l.searchResult,e=>{e&&(u.value=e.pagination.page)});const i=e=>{s("update:sort",e)},n=e=>{s("update:viewMode",e)},p=e=>{s("page-change",e)},h=e=>{s("size-change",e)},m=e=>{s("product-select",e)},g=e=>{s("add-to-quote",e)},y=e=>{s("view-details",e)};return(e,a)=>{var l;const s=le("Menu");return $(),U("div",Ye,[L("div",Ze,[L("div",Fe,[(null==(l=e.searchResult)?void 0:l.search_info)?($(),U(G,{key:0},[a[5]||(a[5]=J(" 找到 ",-1)),L("strong",null,X(e.searchResult.pagination.total),1),a[6]||(a[6]=J(" 个产品 ",-1)),e.searchResult.search_info.query?($(),U("span",Ge,[a[4]||(a[4]=J(" ，关键词：",-1)),L("strong",null,'"'+X(e.searchResult.search_info.query)+'"',1)])):A("",!0)],64)):A("",!0)]),L("div",Qe,[B(Y(f),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"排序方式",size:"small",style:{width:"140px"},onChange:i},{default:F(()=>[($(),U(G,null,Q(c,e=>B(Y(w),{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),B(Y(_),{class:"view-toggle"},{default:F(()=>[B(Y(r),{type:"grid"===o.value?"primary":"default",size:"small",onClick:a[1]||(a[1]=e=>n("grid"))},{default:F(()=>[B(Y(d),null,{default:F(()=>[B(Y(M))]),_:1})]),_:1},8,["type"]),B(Y(r),{type:"list"===o.value?"primary":"default",size:"small",onClick:a[2]||(a[2]=e=>n("list"))},{default:F(()=>[B(Y(d),null,{default:F(()=>[B(s)]),_:1})]),_:1},8,["type"])]),_:1})])]),e.loading?($(),U("div",Je,[B(Y(b),{rows:6,animated:""})])):e.searchResult&&e.searchResult.products&&0!==e.searchResult.products.length?($(),U("div",{key:2,class:ee(["results-container",o.value])},[($(!0),U(G,null,Q(e.searchResult.products,a=>($(),K(Ee,{key:a.id,product:a,"view-mode":o.value,"search-query":e.searchResult.search_info.query,onSelect:m,onAddToQuote:g,onViewDetails:y},null,8,["product","view-mode","search-query"]))),128))],2)):($(),U("div",Ke,[L("div",Xe,[B(Y(d),{size:"64"},{default:F(()=>[B(Y(v))]),_:1})]),a[7]||(a[7]=L("h3",null,"未找到相关产品",-1)),a[8]||(a[8]=L("p",null,"尝试使用不同的关键词或调整筛选条件",-1)),a[9]||(a[9]=L("div",{class:"search-suggestions"},[L("h4",null,"搜索建议："),L("ul",null,[L("li",null,"检查拼写是否正确"),L("li",null,"尝试使用更通用的关键词"),L("li",null,"减少筛选条件"),L("li",null,"尝试搜索产品分类或型号")])],-1))])),e.searchResult&&e.searchResult.pagination.pages>1?($(),U("div",$e,[B(Y(k),{"current-page":u.value,"onUpdate:currentPage":a[3]||(a[3]=e=>u.value=e),"page-size":e.searchResult.pagination.per_page,total:e.searchResult.pagination.total,"page-sizes":[10,20,50,100],small:!1,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:h,onCurrentChange:p},null,8,["current-page","page-size","total"])])):A("",!0)])}}}),[["__scopeId","data-v-416a7689"]]),aa={class:"search-page"},la={class:"search-section"},sa={class:"container"},ta={key:0,class:"search-history"},ua={class:"history-header"},ca={class:"history-list"},oa={class:"results-section"},ia={class:"container"},na={key:0,class:"batch-search-section"},ra={class:"container"},da={class:"batch-search-card"},va={class:"batch-header"},pa={class:"batch-icon"},ha={class:"batch-actions"},ma={class:"batch-dialog"},ga={key:0,class:"batch-upload"},ya={class:"upload-config"},fa={class:"batch-actions"},_a={key:1,class:"batch-processing"},ba={class:"processing-content"},ka={key:2,class:"batch-results"},wa={class:"results-summary"},Ma={class:"summary-item"},ja={class:"value"},Ia={class:"summary-item"},Sa={class:"value success"},Va={class:"summary-item"},Ca={class:"value error"},za={class:"summary-item"},xa={class:"value"},Ta={class:"batch-actions"},Na=O({__name:"SearchPage",setup(e){const s=ue(),t=te(),u=D(""),c=D(null),v=D(!1),p=D(!1),h=D("grid"),m=D("relevance"),y=D([]),f=D(!1),_=D(0),b=D(null),k=se({query_column:"product_name",per_query:5}),w=D(null),M=D(!1),O=D(1),H=D(20);P(()=>{E();const e=t.query.q;e&&(u.value=e,ee())}),W(()=>t.query.q,e=>{e&&e!==u.value&&(u.value=e,ee())});const E=()=>{const e=localStorage.getItem("search_history");if(e)try{y.value=JSON.parse(e).slice(0,10)}catch(a){y.value=[]}},Z=e=>{if(!e.trim())return;const a=y.value.indexOf(e);a>-1&&y.value.splice(a,1),y.value.unshift(e),y.value.length>10&&(y.value=y.value.slice(0,10)),localStorage.setItem("search_history",JSON.stringify(y.value))},ee=()=>i(this,null,function*(){const e=u.value.trim();if(e){v.value=!0,p.value=!0;try{const u={query:e,sort:m.value,page:O.value,per_page:H.value},r=yield ie.searchProducts(u);c.value=r,Z(e),yield s.replace({query:(i=o({},t.query),n={q:e,page:O.value>1?O.value:void 0,sort:"relevance"!==m.value?m.value:void 0},a(i,l(n)))})}catch(r){oe.error("搜索失败，请稍后重试"),c.value=null}finally{v.value=!1}var i,n}}),ae=e=>{u.value=e,O.value=1,ee()},le=e=>{u.value=e.text,O.value=1,ee()},ne=()=>i(this,null,function*(){try{yield q.confirm("确定要清空所有搜索历史吗？","确认清空",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),y.value=[],localStorage.removeItem("search_history"),oe.success("搜索历史已清空")}catch(e){}}),re=e=>{m.value=e,O.value=1,ee()},de=e=>{O.value=e,ee()},ve=e=>{H.value=e,O.value=1,ee()},pe=e=>{s.push("/products/".concat(e.id))},he=e=>{oe.success('产品 "'.concat(e.name,'" 已添加到询价单'))},me=e=>{s.push("/products/".concat(e.id))},ge=e=>{b.value=e.raw},ye=()=>{b.value=null},fe=()=>i(this,null,function*(){if(b.value){_.value=1;try{w.value=yield ie.batchSearchFromFile(b.value,k),_.value=2,oe.success("批量搜索完成")}catch(e){oe.error("批量搜索失败，请检查文件格式"),_e()}}}),_e=()=>{_.value=0,b.value=null,w.value=null},be=()=>i(this,null,function*(){if(w.value){M.value=!0;try{const e=yield ie.exportBatchResults(w.value.results),a=window.URL.createObjectURL(e),l=document.createElement("a");l.href=a,l.download="batch_search_results_".concat((new Date).getTime(),".csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(a),oe.success("结果导出成功")}catch(e){oe.error("导出失败")}finally{M.value=!1}}});return(e,a)=>{const l=r,s=g,t=d,o=V,i=S,q=C,D=n,H=T,W=N,P=x,E=j;return $(),U("div",aa,[a[24]||(a[24]=ce('<div class="page-header" data-v-0635c83b><div class="container" data-v-0635c83b><div class="header-content" data-v-0635c83b><h1 class="page-title" data-v-0635c83b>产品搜索</h1><p class="page-description" data-v-0635c83b> 快速找到您需要的产品，支持按名称、型号、规格等多维度搜索 </p></div></div></div>',1)),L("div",la,[L("div",sa,[B(je,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),"show-hot-searches":!p.value,size:"large",onSearch:ae,onSelectSuggestion:le},null,8,["modelValue","show-hot-searches"]),y.value.length>0&&!p.value?($(),U("div",ta,[L("div",ua,[a[8]||(a[8]=L("span",{class:"history-title"},"搜索历史",-1)),B(l,{link:"",size:"small",onClick:ne,class:"clear-history"},{default:F(()=>a[7]||(a[7]=[J(" 清空 ",-1)])),_:1,__:[7]})]),L("div",ca,[($(!0),U(G,null,Q(y.value,(e,a)=>($(),K(s,{key:a,class:"history-tag",onClick:a=>{return l=e,u.value=l,O.value=1,void ee();var l},closable:"",onClose:e=>(e=>{y.value.splice(e,1),Z("")})(a)},{default:F(()=>[J(X(e),1)]),_:2},1032,["onClick","onClose"]))),128))])])):A("",!0)])]),L("div",oa,[L("div",ia,[B(ea,{"search-result":c.value,loading:v.value,"view-mode":h.value,sort:m.value,"onUpdate:viewMode":a[1]||(a[1]=e=>h.value=e),"onUpdate:sort":re,onPageChange:de,onSizeChange:ve,onProductSelect:pe,onAddToQuote:he,onViewDetails:me},null,8,["search-result","loading","view-mode","sort"])])]),p.value?A("",!0):($(),U("div",na,[L("div",ra,[L("div",da,[L("div",va,[L("div",pa,[B(t,null,{default:F(()=>[B(Y(I))]),_:1})]),a[10]||(a[10]=L("div",{class:"batch-content"},[L("h3",null,"批量搜索"),L("p",null,"上传CSV文件批量搜索多个产品，提高工作效率")],-1)),L("div",ha,[B(l,{type:"primary",onClick:a[2]||(a[2]=e=>f.value=!0)},{default:F(()=>a[9]||(a[9]=[J(" 开始批量搜索 ",-1)])),_:1,__:[9]})])])])])])),B(E,{modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=e=>f.value=e),title:"批量搜索产品",width:"600px","close-on-click-modal":!1},{default:F(()=>{var e,s,u,c;return[L("div",ma,[B(i,{active:_.value,"align-center":""},{default:F(()=>[B(o,{title:"上传文件"}),B(o,{title:"处理中"}),B(o,{title:"查看结果"})]),_:1},8,["active"]),0===_.value?($(),U("div",ga,[B(q,{ref:"uploadRef","auto-upload":!1,"on-change":ge,"before-remove":ye,accept:".csv",drag:"",class:"upload-area"},{tip:F(()=>a[11]||(a[11]=[L("div",{class:"el-upload__tip"}," 只能上传CSV文件，文件大小不超过10MB ",-1)])),default:F(()=>[B(t,{class:"el-icon--upload"},{default:F(()=>[B(Y(z))]),_:1}),a[12]||(a[12]=L("div",{class:"el-upload__text"},[J(" 将CSV文件拖到此处，或"),L("em",null,"点击上传")],-1))]),_:1,__:[12]},512),L("div",ya,[B(P,{model:k,"label-width":"120px"},{default:F(()=>[B(H,{label:"查询列名"},{default:F(()=>[B(D,{modelValue:k.query_column,"onUpdate:modelValue":a[3]||(a[3]=e=>k.query_column=e),placeholder:"包含搜索关键词的列名 (如: product_name)"},null,8,["modelValue"])]),_:1}),B(H,{label:"每个查询返回"},{default:F(()=>[B(W,{modelValue:k.per_query,"onUpdate:modelValue":a[4]||(a[4]=e=>k.per_query=e),min:1,max:50},null,8,["modelValue"]),a[13]||(a[13]=L("span",{class:"form-tip"},"个结果",-1))]),_:1,__:[13]})]),_:1},8,["model"])]),L("div",fa,[B(l,{onClick:a[5]||(a[5]=e=>f.value=!1)},{default:F(()=>a[14]||(a[14]=[J("取消",-1)])),_:1,__:[14]}),B(l,{type:"primary",disabled:!b.value,onClick:fe},{default:F(()=>a[15]||(a[15]=[J(" 开始处理 ",-1)])),_:1,__:[15]},8,["disabled"])])])):A("",!0),1===_.value?($(),U("div",_a,[L("div",ba,[B(t,{class:"processing-icon"},{default:F(()=>[B(Y(R))]),_:1}),a[16]||(a[16]=L("h3",null,"正在处理批量搜索...",-1)),a[17]||(a[17]=L("p",null,"请稍等，正在处理您的文件",-1))])])):A("",!0),2===_.value?($(),U("div",ka,[L("div",wa,[L("div",Ma,[a[18]||(a[18]=L("span",{class:"label"},"总查询数:",-1)),L("span",ja,X((null==(e=w.value)?void 0:e.summary.total_queries)||0),1)]),L("div",Ia,[a[19]||(a[19]=L("span",{class:"label"},"成功:",-1)),L("span",Sa,X((null==(s=w.value)?void 0:s.summary.successful)||0),1)]),L("div",Va,[a[20]||(a[20]=L("span",{class:"label"},"失败:",-1)),L("span",Ca,X((null==(u=w.value)?void 0:u.summary.failed)||0),1)]),L("div",za,[a[21]||(a[21]=L("span",{class:"label"},"找到产品:",-1)),L("span",xa,X((null==(c=w.value)?void 0:c.summary.total_products_found)||0),1)])]),L("div",Ta,[B(l,{onClick:_e},{default:F(()=>a[22]||(a[22]=[J("重新开始",-1)])),_:1,__:[22]}),B(l,{type:"primary",onClick:be,loading:M.value},{default:F(()=>a[23]||(a[23]=[J(" 导出结果 ",-1)])),_:1,__:[23]},8,["loading"])])])):A("",!0)])]}),_:1},8,["modelValue"])])}}});export{Na as _};
