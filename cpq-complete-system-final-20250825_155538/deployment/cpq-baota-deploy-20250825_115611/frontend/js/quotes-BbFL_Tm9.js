var l=(t,e,u)=>new Promise((s,a)=>{var g=n=>{try{i(u.next(n))}catch(c){a(c)}},d=n=>{try{i(u.throw(n))}catch(c){a(c)}},i=n=>n.done?s(n.value):Promise.resolve(n.value).then(g,d);i((u=u.apply(t,e)).next())});import{h as r}from"./index-CoBZUWE1.js";const Q={getQuotes(t){return r.get("/quotes",{params:t})},getQuote(t){return r.get("/quotes/".concat(t))},createQuote(t){return r.post("/quotes",t)},updateQuote(t,e){return r.put("/quotes/".concat(t),e)},updateQuoteStatus(t,e){return r.patch("/quotes/".concat(t,"/status"),e)},deleteQuote(t){return r.delete("/quotes/".concat(t))}},p={getMultiQuotes(t){return r.get("/multi-quotes",{params:t})},getMultiQuote(t){return r.get("/multi-quotes/".concat(t))},createMultiQuote(t){return r.post("/multi-quotes",t)},updateMultiQuote(t,e){return r.put("/multi-quotes/".concat(t),e)},updateMultiQuoteStatus(t,e){return r.put("/multi-quotes/".concat(t,"/status"),e)},deleteMultiQuote(t){return r.delete("/multi-quotes/".concat(t))}},v={getAllQuotes(t){return l(this,null,function*(){var f,y;const e=[],u=[];let s=0,a=0;const[g,d]=yield Promise.allSettled([Q.getQuotes(t).catch(o=>null),p.getMultiQuotes(t).catch(o=>null)]);if(g.status==="fulfilled"&&g.value){const o=g.value;o.quotes&&Array.isArray(o.quotes)&&(e.push(...o.quotes),s=((f=o.pagination)==null?void 0:f.total)||o.quotes.length)}if(d.status==="fulfilled"&&d.value){const o=d.value;o.quotes&&Array.isArray(o.quotes)?(u.push(...o.quotes),a=((y=o.pagination)==null?void 0:y.total)||o.quotes.length):Array.isArray(o)&&(u.push(...o),a=o.length)}const i=[...e,...u],n=s+a;i.sort((o,w)=>{const A=new Date(o.created_at||0).getTime();return new Date(w.created_at||0).getTime()-A});const c=(t==null?void 0:t.page)||1,h=(t==null?void 0:t.per_page)||20,q=(c-1)*h,M=q+h;return{quotes:i.slice(q,M),pagination:{page:c,per_page:h,total:n,pages:Math.ceil(n/h)}}})},createQuote(t){return l(this,null,function*(){if(t.items&&t.items.length>0)return p.createMultiQuote(t);if(t.product_id)return Q.createQuote(t);throw new Error("Quote must have either items array or product_id")})},getQuote(t){return l(this,null,function*(){var e;try{return yield p.getMultiQuote(t)}catch(u){if(((e=u.response)==null?void 0:e.status)===404)return Q.getQuote(t);throw u}})},updateQuote(t,e){return l(this,null,function*(){var u;try{return yield p.updateMultiQuote(t,e)}catch(s){if(((u=s.response)==null?void 0:u.status)===404)return Q.updateQuote(t,e);throw s}})},updateQuoteStatus(t,e){return l(this,null,function*(){var u;try{return yield p.updateMultiQuoteStatus(t,e)}catch(s){if(((u=s.response)==null?void 0:u.status)===404)return Q.updateQuoteStatus(t,e);throw s}})},deleteQuote(t){return l(this,null,function*(){var e;try{return yield p.deleteMultiQuote(t)}catch(u){if(((e=u.response)==null?void 0:e.status)===404)return Q.deleteQuote(t);throw u}})}};export{v as u};
